"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[52302],{14496:(e,t,n)=>{n.d(t,{b:()=>S});var a=n(74848),r=n(16522),l=n(94236),s=n(21373),o=n(5524),i=n(73077),c=n(38621),u=n(51120),d=n(42455),m=n(69599),h=n(95869),p=n(77430),g=n(78223);function f(e){let t,n,l,s=(0,r.c)(12),{topLevelAgents:i,customAgents:c,selectedAgent:u,onSelectAgent:d}=e;return s[0]!==d||s[1]!==u||s[2]!==i?(t=i.length>0&&(0,a.jsxs)(o.l.Group,{selectionVariant:"single",children:[(0,a.jsx)(o.l.GroupHeading,{children:"Agents"}),i.map(e=>{let t=(0,g.sS)(e.slug),n=u?.typeName==="topLevel"&&u.topLevelAgentId===e.id,r=!u?.typeName&&t,l=n||r;return(0,a.jsxs)(o.l.Item,{disabled:!1,selected:l,onSelect:()=>d(l?{}:{typeName:"topLevel",topLevelAgentId:e.id}),children:[(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(p.r,{src:e.avatar_url||"",size:16,square:!0})}),e.display_name]},e.id)})]}),s[0]=d,s[1]=u,s[2]=i,s[3]=t):t=s[3],s[4]!==c||s[5]!==d||s[6]!==u||s[7]!==i.length?(n=c.length>0&&(0,a.jsxs)(a.Fragment,{children:[i.length>0&&(0,a.jsx)(o.l.Divider,{}),(0,a.jsxs)(o.l.Group,{selectionVariant:"single",children:[(0,a.jsx)(o.l.GroupHeading,{children:"Custom agents"}),c.map(e=>{let t=!!e.config_error&&e.config_error.length>0,n=u.subAgentSlug===e.name;return(0,a.jsx)(o.l.Item,{disabled:t,inactiveText:t?e.config_error:void 0,selected:n,onSelect:()=>d(n?{}:{typeName:"customSubAgent",subAgentSlug:e.name}),children:e.display_name||e.name},e.name)})]})]}),s[4]=c,s[5]=d,s[6]=u,s[7]=i.length,s[8]=n):n=s[8],s[9]!==t||s[10]!==n?(l=(0,a.jsxs)(a.Fragment,{children:[t,n]}),s[9]=t,s[10]=n,s[11]=l):l=s[11],l}try{f.displayName||(f.displayName="AgentListItems")}catch{}var y=n(82156),b=n(63422),v=n(34164),C=n(96540);function S(e){let t,n,i,S,x,w,N,A,k,j,P,L,R,$=(0,r.c)(50),{repo:E,branch:O,selectedAgent:B,onSelectAgent:T,iconOnly:F,disabled:G,buttonProps:M}=e,q=void 0===F||F,D=void 0!==G&&G;$[0]!==E?(t={repo:E},$[0]=E,$[1]=t):t=$[1];let{data:K,isLoading:V}=function(e){let t,n,a=(0,r.c)(4),{repo:l}=e;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.G7)("agent_session_retry_fetch_capi_on_401"),a[0]=t):t=a[0];let s=t;return a[1]!==l.nameOnly||a[2]!==l.owner?(n={queryKey:["custom-agents",l.owner,l.nameOnly],queryFn:async()=>{try{let e=await (0,u.I)({path:`/agents/swe/custom-agents/${l.owner}/${l.nameOnly}`,retryOn401:s});if(404===e.status)return[];return(await e.json()).agents}catch{return[]}}},a[1]=l.nameOnly,a[2]=l.owner,a[3]=n):n=a[3],(0,d.b)(n)}(t);$[2]!==K?(n=void 0===K?[]:K,$[2]=K,$[3]=n):n=$[3];let W=n,{data:H,isLoading:U}=(0,h.n)(E.nameWithOwner);$[4]!==H?(i=void 0===H?[]:H,$[4]=H,$[5]=i):i=$[5];let Q=i,z=E.isEmpty||!O||V||U;$[6]!==W||$[7]!==Q?(S=[...Q,...W],$[6]=W,$[7]=Q,$[8]=S):S=$[8];let J=S;$[9]!==J||$[10]!==z||$[11]!==T||$[12]!==B?(w=()=>{z||0===J.length||!B?.typeName||("topLevel"===B.typeName?J.some(e=>"id"in e&&e.id===B.topLevelAgentId):J.some(e=>"name"in e&&e.name===B.subAgentSlug))||T({})},x=[z,J,B,T],$[9]=J,$[10]=z,$[11]=T,$[12]=B,$[13]=x,$[14]=w):(x=$[13],w=$[14]),(0,C.useEffect)(w,x);let Y=_,X=Y(B)?"Copilot":B,Z="string"==typeof X?"Copilot"===X?"topLevel":"customSubAgent":X.typeName;if($[15]!==Z||$[16]!==J||$[17]!==O||$[18]!==M||$[19]!==D||$[20]!==X||$[21]!==q||$[22]!==z||$[23]!==E||$[24]!==B){let e,t,n,r,o,i,u=J.find(e=>"string"==typeof X?e.display_name===X:"topLevel"===Z?"id"in e&&e.id===X.topLevelAgentId:"customSubAgent"===Z?"name"in e&&e.name===X.subAgentSlug:void 0);e:{if("string"==typeof X){e=X;break e}if(!u){e=void 0;break e}e=u.display_name||("name"in u?u.name:void 0)}let d=e;if($[29]!==O||$[30]!==E.nameOnly||$[31]!==E.owner){let e=new URLSearchParams({filename:".github/agents/my-agent.agent.md",value:`---
# Fill in the fields below to create a basic custom agent for your repository.
# The Copilot CLI can be used for local testing: https://gh.io/customagents/cli
# To make this agent available, merge this file into the default repository branch.
# For format details, see: https://gh.io/customagents/config

name:
description:
---

# My Agent

Describe what your agent does here...`});t=E.owner,n=E.nameOnly,r=O,o=e.toString(),$[29]=O,$[30]=E.nameOnly,$[31]=E.owner,$[32]=t,$[33]=n,$[34]=r,$[35]=o}else t=$[32],n=$[33],r=$[34],o=$[35];k=`/${t}/${n}/new/${r}?${o}`;t:{if(Y(B)){i=!0;break t}if("topLevel"===B.typeName&&u&&"slug"in u){i=(0,g.sS)(u.slug);break t}i=!1}let m=i,h=d||"None",f=d?`${"topLevel"===Z?"Agent":"Custom agent"}: ${d}`:"Select an agent";A=l.W,N=l.W.Anchor,j=q?function({isLoading:e,isCopilotSelected:t,selectedAgentObj:n,agentType:r,ariaLabel:l,disabled:o,variant:i,className:u}){return e?(0,a.jsx)(s.Q,{"aria-label":"Loading agents",disabled:!0,variant:i,className:(0,v.$)("AgentSelector-module__avatarButtonSkeleton--jkY1N",u),children:(0,a.jsx)(y.f,{width:"32px",height:"32px","data-testid":"agent-selector-skeleton"})}):t?(0,a.jsx)(b.L,{icon:c.CopilotIcon,selectedIcon:c.CopilotIcon,"aria-label":l,selected:!1,disabled:o,variant:i,className:u}):n&&"object"==typeof n&&"customSubAgent"===r?(0,a.jsx)(b.L,{icon:c.CopilotIcon,selectedIcon:c.FileCheckIcon,"aria-label":l,selected:!!n,disabled:o,variant:i,className:u}):n&&"object"==typeof n&&"avatar_url"in n?(0,a.jsx)(s.Q,{"aria-label":l,disabled:o||e,variant:i,className:(0,v.$)("AgentSelector-module__avatarButton--vp2Ab",u),children:(0,a.jsx)(p.r,{src:n.avatar_url,size:18,square:!0})}):(0,a.jsx)(b.L,{icon:c.CopilotIcon,selectedIcon:c.FileCheckIcon,"aria-label":l,selected:!!n,disabled:o,variant:i,className:u})}({isLoading:z,isCopilotSelected:m,selectedAgentObj:u,agentType:Z,ariaLabel:f,disabled:D,variant:M?.variant,className:M?.className}):(0,a.jsx)(s.Q,{leadingVisual:d?c.FileCheckIcon:c.CopilotIcon,trailingAction:c.TriangleDownIcon,"aria-label":f,className:"AgentSelector-module__anchor--SnbmM","data-selected":!!u,disabled:D||z,...M,children:h}),$[15]=Z,$[16]=J,$[17]=O,$[18]=M,$[19]=D,$[20]=X,$[21]=q,$[22]=z,$[23]=E,$[24]=B,$[25]=N,$[26]=A,$[27]=k,$[28]=j}else N=$[25],A=$[26],k=$[27],j=$[28];return $[36]!==N||$[37]!==j?(P=(0,a.jsx)(N,{children:j}),$[36]=N,$[37]=j,$[38]=P):P=$[38],$[39]!==J.length||$[40]!==W||$[41]!==k||$[42]!==T||$[43]!==B||$[44]!==Q?(L=(0,a.jsx)(l.W.Overlay,{width:"auto",children:0===J.length?(0,a.jsx)(I,{newFileUrl:k}):(0,a.jsxs)(o.l,{children:[(0,a.jsx)(f,{topLevelAgents:Q,customAgents:W,selectedAgent:B,onSelectAgent:T}),(0,a.jsx)(o.l.Divider,{}),(0,a.jsx)(o.l.Group,{selectionVariant:!1,children:(0,a.jsxs)(o.l.LinkItem,{href:k,target:"_blank",children:[(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(c.PlusIcon,{})}),"Create a custom agent"]})})]})}),$[39]=J.length,$[40]=W,$[41]=k,$[42]=T,$[43]=B,$[44]=Q,$[45]=L):L=$[45],$[46]!==A||$[47]!==P||$[48]!==L?(R=(0,a.jsxs)(A,{children:[P,L]}),$[46]=A,$[47]=P,$[48]=L,$[49]=R):R=$[49],R}function _(e){return!e?.typeName}let I=e=>{let t,n,l,s=(0,r.c)(4),{newFileUrl:o}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("h3",{className:"AgentSelector-module__emptyStateTitle--coj6M",children:"This repository has no custom agents"}),n=(0,a.jsx)("p",{className:"AgentSelector-module__emptyStateDescription--C58Xx",children:"Custom agents are reusable instructions and tools in your repository."}),s[0]=t,s[1]=n):(t=s[0],n=s[1]),s[2]!==o?(l=(0,a.jsxs)("div",{className:"AgentSelector-module__emptyStateContainer--FrxRO",children:[t,n,(0,a.jsx)(i.z,{href:o,children:"Create a custom agent"})]}),s[2]=o,s[3]=l):l=s[3],l};try{S.displayName||(S.displayName="AgentSelector")}catch{}try{I.displayName||(I.displayName="EmptyState")}catch{}},25811:(e,t,n)=>{n.d(t,{s:()=>s});var a=n(16522),r=n(96540),l=n(64846);function s(){let e,t,n,s=(0,a.c)(7),{value:o,setValue:i}=(0,l.Q)("AGENT_SESSIONS_LAST_SELECTED_AGENT");s[0]!==o?(e=()=>o??{},s[0]=o,s[1]=e):e=s[1];let[c,u]=(0,r.useState)(e);s[2]!==i?(t=e=>{u(e),i(e)},s[2]=i,s[3]=t):t=s[3];let d=t;return s[4]!==c||s[5]!==d?(n=[c,d],s[4]=c,s[5]=d,s[6]=n):n=s[6],n}},34267:(e,t,n)=>{n.d(t,{D:()=>s,t:()=>o});var a=n(74848),r=n(96540);let l=(0,r.createContext)({updateOpenState:()=>void 0,anyItemPickerOpen:()=>!1});function s({children:e}){let t=(0,r.useRef)({}),n=(0,r.useCallback)((e,n)=>{let a=t.current;return a[e]===n||(t.current={...a,[e]:n}),t.current},[]),s=(0,r.useCallback)(()=>Object.values(t.current).some(e=>e),[t]),o=(0,r.useMemo)(()=>({updateOpenState:n,anyItemPickerOpen:s}),[s,n]);return(0,a.jsx)(l.Provider,{value:o,children:e})}function o(){let e=(0,r.useContext)(l);if(!e)throw Error("useItemPickersContext must be used within a ItemPickersContextProvider.");return e}try{l.displayName||(l.displayName="ItemPickersContext")}catch{}try{s.displayName||(s.displayName="ItemPickersContextProvider")}catch{}},34295:(e,t,n)=>{n.d(t,{l:()=>AgentSessionsTokenProvider});var a=n(65411);let AgentSessionsTokenProvider=class AgentSessionsTokenProvider extends a.JR{constructor(){super([],"/copilot/agent-sessions/token","AGENT_SESSIONS_TOKEN")}}},42455:(e,t,n)=>{n.d(t,{b:()=>u});var a=n(97286),r=n(51120),l=n(97189),s=n(34295),o=n(96540),i=n(65411),c=n(69599);function u(...e){let t=(0,a.I)(...e),{numberOf401s:n,increment401s:d,reset401s:m}=(0,l.eS)(),{isError:h,isLoading:p,error:g}=t;return(0,o.useEffect)(()=>{h&&g instanceof r.Y&&401===g.status?n>=5?(((0,c.G7)("mission_control_use_capi_token_provider")?new i.JR([]):new s.l).removeLocalStorageAuthToken(),m()):d():h||p||!(n>0)||m()},[h,p,g,d,m,n]),t}},46642:(e,t,n)=>{n.d(t,{P:()=>u});var a=n(74848),r=n(96540),l=n(38621),s=n(69497),o=n(21373),i=n(70170),c=n(86391);function u({currentSelection:e,repositoryLoader:t,onSelect:n,selectionVariant:u,selectAllOption:d,additionalButtonProps:m,buttonText:h="",width:p,truncateMaxWidth:g,height:f,fullscreenOnNarrow:y,defaultOwner:b,onLoad:v,loadingElement:C,liveSelection:S=!1,onOpen:_}){let[I,x]=(0,r.useState)(""),[w,N]=(0,r.useState)([]),[A,k]=(0,r.useState)(!0),[j,P]=(0,r.useState)(!1),L=(0,r.useCallback)((0,i.s)(async e=>{try{let n=await t(e,b);N(n),v?.(n)}catch{}k(!1),P(!0)},200),[t,b]);(0,r.useEffect)(()=>{k(!0),L(I)},[I,L,k]);let R=(0,r.useCallback)(e=>{"single"===u?!e[0]||e[0]._all?n(void 0):n(e[0]):n(e)},[u,n]),$=(0,r.useMemo)(()=>"multiple"===u?e||[]:e?[e]:[],[u,e]),E=(0,r.useCallback)(e=>{let t,n="medium"===p?35:"large"===p?60:24;return(e.name.length>n&&(t=`${e.name.substring(0,n)}...`),e._all)?{id:e.name,text:"All repositories",source:e,groupId:"all"}:{id:e.name,text:t||e.name,source:e,groupId:"select",disabled:!1===e.enabled,leadingVisual:()=>e.private?(0,a.jsx)(l.RepoLockedIcon,{size:16}):(0,a.jsx)(l.RepoIcon,{size:16})}},[p]),O=(0,r.useCallback)(e=>e.name,[]),B=(0,r.useMemo)(()=>{let e=[];return e.push(...w),d&&e.push({name:"$all$",_all:!0}),e},[w,d]),T=h,F=l.RepoIcon;return T||("multiple"===u?T=$.length>0?`${$.length} repositor${$.length>1?"ies":"y"}`:"Select repositories":$.length>0&&$[0]?(T=$[0].name,F=$[0].private?l.RepoLockedIcon:l.RepoIcon):T=d?"All repositories":"Select a repository"),C&&A&&!e&&!j?C:(0,a.jsx)(c.O,{renderAnchor:({"aria-labelledby":e,...t})=>(0,a.jsx)(o.Q,{leadingVisual:F,trailingAction:l.TriangleDownIcon,"aria-labelledby":e,...t,...m,children:(0,a.jsx)(s.A,{title:T,maxWidth:g??195,children:T})}),placeholderText:"Search",items:B,loading:A,groups:d?[{groupId:"all"},{groupId:"select"}]:[],selectionVariant:u,initialSelectedItems:$,onSelectionChange:R,onLiveSelectionChange:S?R:void 0,filterItems:x,getItemKey:O,convertToItemProps:E,title:"Select a repository",width:p,height:f,responsiveOnNarrow:y,onOpen:_})}try{u.displayName||(u.displayName="ReposSelector")}catch{}},51120:(e,t,n)=>{n.d(t,{I:()=>c,Y:()=>FetchCAPIError});var a=n(50467),r=n(34295),l=n(25641),s=n(21067),o=n(69599),i=n(65411);let FetchCAPIError=class FetchCAPIError extends Error{constructor(e,t){super(e),(0,a._)(this,"status",void 0),this.name="FetchCAPIError",this.status=t}};async function c({path:e,method:t="GET",streamingResponse:n=!1,body:a,retryOn401:l=!1}){let c=(0,o.G7)("mission_control_use_capi_token_provider")?new i.JR([]):new r.l;return u({path:e,method:t,streamingResponse:n,body:a,basePath:(0,s._$)().copilotApiOverrideUrl??"https://api.githubcopilot.com",retryOn401:l},c)}async function u(e,t,n=0){let a=await t.getAuthToken();if(!a)throw Error("No token available");let r=await (0,l.p)({authToken:a,basePath:e.basePath,method:e.method,path:e.path,streamingResponse:e.streamingResponse,body:e.body});if(!r.ok){if(e.retryOn401&&401===r.status&&n<1)return t.removeLocalStorageAuthToken(),u(e,t,n+1);let a="error"in r?r.error:`Failed CAPI request (${r.status})`;if("response"in r&&r.response)try{let e=await r.response.text();e&&e.trim()&&(a=e.trim())}catch{}throw new FetchCAPIError(a,r.status)}return r}},57019:(e,t,n)=>{n.d(t,{A:()=>s,_:()=>o});var a=n(88431),r=n(44569),l=n(96540);let s={ctrlKey:"ctrlKey",altKey:"altKey",shiftKey:"shiftKey",metaKey:"metaKey"},o=(e,t,n)=>{let o=(0,l.useRef)(t);(0,a.N)(()=>{o.current=t});let i=(0,l.useCallback)(t=>{(![...document.querySelectorAll('#__primerPortalRoot__, [id$="-portal-root"]')].some(function e(t){if(t.clientHeight>0)return!0;for(let n of t.children)if(e(n))return!0;return!1})||n?.triggerWhenPortalIsActive)&&(function(e,t){for(let n of Object.values(s))if(t&&t[n]&&!e[n]||e[n]&&(!t||!t[n]))return!1;return!0}(t,n)||n?.ignoreModifierKeys)&&!(!n?.triggerWhenInputElementHasFocus&&(0,r.fg)(t.target))&&e.some(e=>/^\d$/.test(e)?t.code===`Digit${e}`:"/"===e?"Slash"===t.code:t.key===e)&&o.current(t)},[e,n]);(0,l.useEffect)(()=>{let e=n?.scopeRef?.current||document;return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)},[i,n?.scopeRef])}},63422:(e,t,n)=>{n.d(t,{L:()=>o});var a=n(74848),r=n(16522),l=n(26108),s=n(34164);let o=e=>{let t,n,o,i,c,u,d,m=(0,r.c)(14);if(m[0]!==e){let{ref:a,...r}=e;o=a;let{selected:d,icon:h,selectedIcon:p,...g}=r;t=(i=d)&&p?p:h,n=l.K,c=g,u=(0,s.$)("IconButtonSelector-module__anchor--t8Bzw",g.className),m[0]=e,m[1]=t,m[2]=n,m[3]=o,m[4]=i,m[5]=c,m[6]=u}else t=m[1],n=m[2],o=m[3],i=m[4],c=m[5],u=m[6];return m[7]!==t||m[8]!==n||m[9]!==o||m[10]!==i||m[11]!==c||m[12]!==u?(d=(0,a.jsx)(n,{...c,className:u,icon:t,"data-selected":i,ref:o}),m[7]=t,m[8]=n,m[9]=o,m[10]=i,m[11]=c,m[12]=u,m[13]=d):d=m[13],d};o.displayName="IconButtonSelector"},64846:(e,t,n)=>{n.d(t,{Q:()=>l});var a=n(82075),r=n(96540);function l(e){let t=(0,a.D)("localStorage");return{value:(0,r.useMemo)(()=>t.getItem(e)??void 0,[t,e]),setValue:n=>{t.setItem(e,n)},removeItem:()=>{t.removeItem(e)}}}},67126:(e,t,n)=>{n.d(t,{S:()=>a});let a={couldNotUpdateAssignees:"Could not update assignees",couldNotSearchAssignees:"Could not search assignees",couldNotUpdateLabels:"Could not update labels",couldNotSearchLabels:"Could not search labels",couldNotUpdateMilestone:"Could not update milestone",couldNotUpdateType:"Could not update type",couldNotSearchMilestones:"Could not search milestones",couldNotUpdateIssueType:"Could not update issue type",couldNotSearchRepositories:"Could not search repositories",couldNotSearchPullRequests:"Could not search pull requests",couldNotSearchProjects:"Could not search projects",couldNotSearchBranches:"Could not search branches",noMatches:"No matches",noResults:"No results",couldNotCreateBranch:"Could not create branch",couldNotCreateLabel:"Could not create label",couldNotCreateMilestone:"Could not create milestone",branchAlreadyExists:e=>`The branch ${e} already exists.`}},74563:(e,t,n)=>{n.d(t,{B:()=>a});let a={itemPickerRootId:"item-picker-root-id",itemPickerTestId:"item-picker-root"}},76027:(e,t,n)=>{n.d(t,{Z:()=>a});let a={activePickerOption:e=>`[data-id="${e}"] [data-is-active-descendant="activated-directly"]`}},78223:(e,t,n)=>{function a(e){return"copilot-swe-agent"===e}function r(e,t){return!e.topLevelAgentId||a(t)||!!e.subAgentSlug}n.d(t,{CF:()=>r,sS:()=>a})},86391:(e,t,n)=>{n.d(t,{D:()=>y,O:()=>f});var a=n(74848),r=n(69599),l=n(53419),s=n(83494),o=n(57019),i=n(93330),c=n(5839),u=n(50279),d=n(96540),m=n(74563),h=n(76027),p=n(34267),g=n(89850);function f({items:e,initialSelectedItems:t,placeholderText:n,selectionVariant:f="single",loading:b,groups:v,filterItems:C,renderAnchor:S,getItemKey:_,convertToItemProps:I,onSelectionChange:x,onOpen:w,onClose:N,onLiveSelectionChange:A,eventsTag:k,height:j="small",width:P="small",selectPanelRef:L,enforceAtleastOneSelected:R,insidePortal:$,maxVisibleItems:E=9,nested:O=!1,resultListAriaLabel:B,title:T,subtitle:F,preventClose:G,triggerOpen:M,initialFilter:q,customNoResultsItem:D,customNoMatchItem:K,footer:V,keybindingCommandId:W,pickerId:H,responsiveOnNarrow:U,secondaryAction:Q,notice:z,className:J,improvedNoMatchAccessibility:Y,noMatchMessage:X,suppressNoMatchItem:Z,focusPrependedElements:ee}){let[et,en]=(0,d.useState)(M??!1),[ea,er]=(0,d.useState)(()=>et?Date.now():null),[el,es]=(0,d.useState)([]),[eo,ei]=(0,d.useState)(q??""),ec=(0,d.useDeferredValue)(eo),{updateOpenState:eu,anyItemPickerOpen:ed}=(0,p.t)(),[em,eh]=(0,d.useState)(!1),ep=(0,d.useId)();H&&(ep=H);let eg=U||(0,r.G7)("primer_react_select_panel_fullscreen_on_narrow");(0,i.w)(()=>{eh(window.innerWidth<768)});let ef=(0,d.useCallback)(e=>{en(e),e?er(Date.now()):er(null)},[en]);(0,d.useEffect)(()=>{void 0!==M&&ef(M)},[ef,M]);let ey=(0,d.useCallback)(()=>{ed()||et||(ef(!0),w&&w())},[ed,et,ef,w]);(0,d.useEffect)(()=>{eu(ep,et)},[ep,et,eu]);let eb=(0,d.useMemo)(()=>new Map,[ep,t]),ev=(0,d.useCallback)(e=>{for(let[,t]of eb)t!==e&&(t.selected=!1)},[eb]),eC=(0,d.useCallback)(e=>"string"==typeof e?e:_(e),[_]),eS=(0,d.useCallback)((e,n)=>{if(G&&!e||"cancel"===n)return;if(!e&&document.activeElement instanceof HTMLElement&&document.activeElement?.blur(),ef(e),e&&w)return void w();ei(""),N&&N();let a=[...eb.values()].filter(e=>e.selected).map(e=>e.source);if(a.length!==t.length||a.some(e=>!t.some(t=>eC(t)===_(e)))){if(ea&&k){let e=Date.now()-ea,n=a.filter(e=>!t.some(t=>eC(t)===_(e))).length,r=t.filter(e=>!a.some(t=>eC(t)===_(e))).length;(0,l.BI)(`item-picker-${k}-selection-duration`,{selectionDuration:e,totalItemsCount:a.length,addedItemsCount:n,removedItemsCount:r})}x(a)}},[G,ef,w,N,eb,t,eC,_,ea,k,x]),e_=(0,d.useCallback)((e,t)=>{let n=_(e),a=eb.get(n),r=I(e);if(a)return{...a,disabled:r.disabled};(a=r).selected=t;let l=a.onAction;return a.onAction=(t,a)=>{let r=eb.get(n);r&&(r.selected=!r.selected,"single"===f&&e.id!==eo&&ev(r),l&&l(t,a))},eb.set(n,a),a},[I,eo,_,eb,f,ev]),eI=(0,d.useMemo)(()=>{let n=e.map(e=>e.__isNew__?(delete e.__isNew__,K&&eb.delete(_(K)),e_(e,!0)):e_(e,t.some(t=>eC(t)===_(e))));return 0===n.length?Y?[]:K?[e_(K,!1)]:Z?[]:eo?[K?e_(K,!1):g.Q3]:[D??g.v8]:n},[K,e,eb,e_,t,eC,_,eo,D,Y,Z]);(0,d.useEffect)(()=>{es(eI.filter(e=>e.selected))},[eI]);let ex=(0,d.useMemo)(()=>"single"===f?el[0]:el,[el,f]),ew=(0,d.useCallback)(e=>{if(void 0===e){R||es([]);return}let t=(Array.isArray(e)?e:[e]).map(e=>eI.find(t=>e.id===t.id)).filter(e=>void 0!==e);es(t),A&&A(t.map(e=>e.source))},[R,eI,A]);(0,o._)([" "],e=>{if(et){let t=document.querySelector(h.Z.activePickerOption(m.B.itemPickerRootId));if(t){let n=t.getAttribute("data-id"),a=[...eb.values()].find(e=>e.id===n);if(a){if(I(a.source).disabled)return;e.preventDefault(),e.stopPropagation(),a.selected=!a.selected,es([...eb.values()].filter(e=>e.selected)),A&&A([...eb.values()].filter(e=>e.selected).map(e=>e.source))}}}},{triggerWhenInputElementHasFocus:!0,triggerWhenPortalIsActive:!0});let eN=(0,d.useCallback)(()=>{if(G)return;ei("");let e=[...eb.values()].filter(e=>e.selected).map(e=>e.source);if(e.length!==t.length||e.some(e=>!t.some(t=>eC(t)===_(e)))){for(let e of eb.values())t.some(t=>eC(t)===_(e.source))?e.selected=!0:e.selected=!1;es([...eb.values()].filter(e=>e.selected))}ef(!1),N&&N()},[G,eb,t,ef,N,eC,_]);(0,d.useEffect)(()=>{C(ec)},[ec,C]);let eA=eI.length>0;1===eI.length&&(eI[0].id===g.Q3.id||eI[0].id===g.v8.id)&&(eA=!1);let ek=(0,d.useMemo)(()=>v&&v?.length>1&&eA?{groupMetadata:v}:{},[v,eA]),ej=y($,L,eI.length<=E?"auto":j,em&&eg),eP=(0,d.useMemo)(()=>X||(eo?{variant:"empty",title:"No matches found",body:"Try a different search term"}:{variant:"empty",title:"No items to show",body:""}),[X,eo]),eL=(0,d.useMemo)(()=>({renderAnchor:S,placeholderText:n,open:et,onOpenChange:eS,loading:b,items:eI,selected:ex,onSelectedChange:ew,filterValue:eo,onFilterChange:ei,showItemDividers:!0,overlayProps:{width:P,className:J,...ej},...ek,"aria-label":B,"data-id":m.B.itemPickerRootId,"data-testid":m.B.itemPickerTestId,title:T,subtitle:F,footer:V,onCancel:eN,secondaryAction:Q,notice:z,message:Y&&0===eI.length?eP:void 0,focusPrependedElements:ee}),[S,n,et,eS,b,eI,ex,ew,eo,P,ej,ek,B,T,F,V,eP,eN,Q,z,J,Y,ee]);return(0,a.jsxs)(u.g,{flags:{primer_react_select_panel_fullscreen_on_narrow:void 0===V&&eg},children:[W&&(0,a.jsx)(s.ak,{commands:{[W]:ey}}),(0,a.jsx)(c.X,{anchorRef:O?void 0:L,...eL})]})}function y(e,t,n,a=!1){let r=e?"large":n;if(!e||!t?.current)return{height:r};let{top:l}=t.current.getBoundingClientRect(),s=a?0:l-436;return s<0?{height:r}:{height:r,top:s,position:"fixed"}}try{f.displayName||(f.displayName="ItemPicker")}catch{}},89850:(e,t,n)=>{n.d(t,{A2:()=>o,Q3:()=>l,v8:()=>s});var a=n(38621),r=n(67126);let l={leadingVisual:a.CircleSlashIcon,text:r.S.noMatches,disabled:!0,selected:void 0,key:"no-matches",id:"no-matches"},s={leadingVisual:a.CircleSlashIcon,text:r.S.noResults,disabled:!0,selected:void 0,key:"no-results",id:"no-results"},o=(e="",t="",n="")=>{let a=e&&`owner:${e.trim()} `,r=n&&`repo:${n.trim()} `,l=t&&`${t.trim()}`,s=(e=>{try{new URL(e)}catch{return!1}return new RegExp(/^.+\/issues\/\d+$/).test(e)})(t),o="in:title",i=l&&"#"===l.charAt(0)?l.slice(1):l;i&&!isNaN(Number(i))&&(o+=" in:number");let c=`${a}${r}is:issue ${o}`;return{commenters:`${c} commenter:@me ${l}`.trim(),mentions:`${c} mentions:@me ${l}`.trim(),assignee:`${c} assignee:@me ${l}`.trim(),author:`${c} author:@me ${l}`.trim(),other:`${c} ${l}`.trim(),resource:s?encodeURI(t):"",queryIsUrl:s}}},92352:(e,t,n)=>{n.d(t,{s:()=>b,P:()=>C});var a=n(74848),r=n(16522),l=n(14496),s=n(97189),o=n(69599),i=n(66990),c=n(46642),u=n(96379),d=n(38621),m=n(82156),h=n(26108),p=n(96540),g=n(79064),f=n(63422);let y="RepoBranchAgentSelector-module__invisibleSelectorButton--vpcnl",b=e=>{let t,n,u,b,_,I,x,w=(0,r.c)(30),{hideRepoSelector:N,initialRepoNWO:A,initialBranch:k,selectedRepo:j,selectedBranch:P,selectedAgent:L,onRepoSelect:R,onBranchSelect:$,onAgentSelect:E,agentSelectionEnabled:O}=e,B=void 0===O||O,T=(0,p.useRef)(!1);w[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.G7)("swe_agent_member_requests_agent_panel"),w[0]=t):t=w[0];let F=t;w[1]!==k||w[2]!==A||w[3]!==$||w[4]!==R||w[5]!==j?(n=e=>{let t;if(!j&&!T.current){if(A&&(t=e.find(e=>e.nameWithOwner===A))&&(t.enabled||F&&v(t))){R(t),$(k||t.defaultBranch),T.current=!0;return}let n=g.Jt.getLastUsedRepository();if(n){let t=e.find(e=>e.nameWithOwner===`${n.ownerLogin}/${n.name}`);if(t&&(t.enabled||F&&v(t))){R(t),$(t?.defaultBranch),T.current=!0;return}}let a=e.find(S);a?(R(a),$(a.defaultBranch),T.current=!0):t&&(R(t),$(k||t.defaultBranch),T.current=!0)}},w[1]=k,w[2]=A,w[3]=$,w[4]=R,w[5]=j,w[6]=n):n=w[6];let G=n;w[7]!==A?(u=(e,t)=>C(e,t,A),w[7]=A,w[8]=u):u=w[8];let M=u;return w[9]!==N||w[10]!==$||w[11]!==G||w[12]!==R||w[13]!==M||w[14]!==j?(b=!N&&(0,a.jsx)(c.P,{repositoryLoader:M,selectionVariant:"single",selectAllOption:!1,onSelect:e=>{e&&(R(e),$(e.defaultBranch))},currentSelection:j,width:"medium",additionalButtonProps:{"aria-label":`Repository: ${j?.nameWithOwner||"Select repository"}`,className:"RepoBranchAgentSelector-module__repoSelectorButton--tAnOR",variant:"invisible"},onLoad:G,loadingElement:(0,a.jsx)(m.f,{width:"150px",height:"32px"})}),w[9]=N,w[10]=$,w[11]=G,w[12]=R,w[13]=M,w[14]=j,w[15]=b):b=w[15],w[16]!==$||w[17]!==P||w[18]!==j?(_=(0,a.jsx)(a.Fragment,{children:j?(0,a.jsx)(i.PI,{cacheKey:"repo-branch-agent-selector",canCreate:!1,currentCommitish:P??j.defaultBranch,defaultBranch:j.defaultBranch,owner:j.owner,repo:j.nameOnly,types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,actionListHeadingText:"Select a branch",onSelectItem:$,renderAnchor:e=>(0,a.jsx)(f.L,{...e,icon:d.GitBranchIcon,selectedIcon:d.GitBranchCheckIcon,selected:P!==j.defaultBranch,"aria-label":`Branch: ${P||"Select branch"}`,"aria-labelledby":void 0,variant:"invisible",className:y})}):(0,a.jsx)(h.K,{icon:d.GitBranchIcon,"aria-label":"Loading branches\u2026",disabled:!0})}),w[16]=$,w[17]=P,w[18]=j,w[19]=_):_=w[19],w[20]!==B||w[21]!==E||w[22]!==L||w[23]!==P||w[24]!==j?(I=B&&(j?(0,a.jsx)(l.b,{repo:j,branch:P||j.defaultBranch,selectedAgent:L,onSelectAgent:e=>E(e),iconOnly:!0,buttonProps:{variant:"invisible",className:y}}):(0,a.jsx)(m.f,{width:"32px",height:"32px"})),w[20]=B,w[21]=E,w[22]=L,w[23]=P,w[24]=j,w[25]=I):I=w[25],w[26]!==b||w[27]!==_||w[28]!==I?(x=(0,a.jsx)(s.Fn,{children:(0,a.jsxs)("div",{className:"RepoBranchAgentSelector-module__container--gHrlH",children:[b,_,I]})}),w[26]=b,w[27]=_,w[28]=I,w[29]=x):x=w[29],x};function v(e){return!!(e.userCanRequestCca||e.userCanGrantOrgCca||e.userCanGrantEnterpriseCca||e.userHasRequestedCca)}async function C(e="",t,n){let a=new URL("/copilot/agent-sessions/repositories",window.location.origin);e.trim()&&a.searchParams.set("q",e.trim()),t&&a.searchParams.set("defaultOwner",t),n&&a.searchParams.set("includeInTopRepos",n);let r=await (0,u.lS)(a.href);if(r.ok){let{repositories:e}=await r.json();return e.map(e=>({id:e.id,graphQLId:e.graphQLId,nameWithOwner:e.nameWithOwner,enabled:e.enabled,name:e.nameWithOwner,nameOnly:e.name,owner:e.owner,defaultBranch:e.defaultBranch,private:"public"!==e.visibility,isEmpty:e.isEmpty,userHasRequestedCca:e.userHasRequestedCca,userCanRequestCca:e.userCanRequestCca,userCanGrantOrgCca:e.userCanGrantOrgCca,userCanGrantEnterpriseCca:e.userCanGrantEnterpriseCca,businessSlug:e.businessSlug}))}return[]}try{b.displayName||(b.displayName="RepoBranchAgentPicker")}catch{}function S(e){return e.enabled}},95869:(e,t,n)=>{n.d(t,{n:()=>l});var a=n(96379),r=n(97286);function l(e){return(0,r.I)({enabled:!!e,queryKey:["top-level-agents",e],queryFn:async()=>{try{if(!e)return[];let t=await (0,a.lS)(`/copilot/agent-sessions/${e}/agents`);if(!t.ok)return[];return(await t.json()).agents||[]}catch{return[]}}})}},97189:(e,t,n)=>{n.d(t,{Fn:()=>i,eS:()=>o});var a=n(74848),r=n(16522),l=n(96540);let s=(0,l.createContext)(void 0);function o(){let e=(0,l.useContext)(s);if(!e)throw Error("useConsecutiveCAPI401sContext must be used within a ConsecutiveCAPI401sProvider");return e}function i(e){let t,n,o,i,u=(0,r.c)(7),{children:d}=e,[m,h]=(0,l.useState)(0);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>h(c),n=()=>h(0),u[0]=t,u[1]=n):(t=u[0],n=u[1]),u[2]!==m?(o={numberOf401s:m,increment401s:t,reset401s:n},u[2]=m,u[3]=o):o=u[3];let p=o;return u[4]!==d||u[5]!==p?(i=(0,a.jsx)(s,{value:p,children:d}),u[4]=d,u[5]=p,u[6]=i):i=u[6],i}function c(e){return e+1}try{s.displayName||(s.displayName="ConsecutiveCAPI401sContext")}catch{}try{i.displayName||(i.displayName="ConsecutiveCAPI401sProvider")}catch{}}}]);
//# sourceMappingURL=52302-7534cd773b75.js.map