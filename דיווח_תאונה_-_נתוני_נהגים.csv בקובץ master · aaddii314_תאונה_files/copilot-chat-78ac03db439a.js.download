"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[19973,74667,83852],{4038:(e,t,a)=>{a.d(t,{$T:()=>d,It:()=>o,Oe:()=>s,QG:()=>c,oT:()=>u,wV:()=>l});var n=a(96540);let r=new Set([" ",`
`]),i=new Set([".",`
`]),s=(e,t,a)=>{let n=e.sort((e,t)=>t.triggerChar.length-e.triggerChar.length);for(let e=a-1,s="",l=n;e>=0&&l.length>0;e--){let a=t[e]??"";for(let n of(s=a+s,r.has(a)&&(l=l.filter(e=>e.multiWord)),i.has(a)&&(l=l.filter(e=>!e.multiWord)),l.filter(e=>s.startsWith(e.triggerChar)))){let a=t[e-1]??"",r=s[1]??"";if((!a||/[\s([]/.test(a))&&(!r||!/\s/.test(r)))return{trigger:n,query:s.slice(n.triggerChar.length),caretLocation:e};l=l.filter(e=>e!==n)}}return null},l=e=>"object"==typeof e&&null===e.value,o=e=>"string"==typeof e?e:e.value,c=e=>"string"==typeof e?e:null===e.value?e.key:e.key??e.value;function d(e,t){if(n.Children.only(e),t.current&&!(t.current instanceof HTMLInputElement)&&!(t.current instanceof HTMLTextAreaElement))throw TypeError("AutocompleteTextarea child must be a component that forwards a ref and props to an <input> or <textarea> element.");return e}let u=(...e)=>t=>{for(let a of[...e].reverse())t.isDefaultPrevented()||a?.(t)}},6224:(e,t,a)=>{a.d(t,{A:()=>n});let n={container:"UserMessage-module__container--qQMdD",mention:"UserMessage-module__mention--iKJnY",command:"UserMessage-module__command--gs71n"}},7730:(e,t,a)=>{a.d(t,{g:()=>i});var n=a(16522),r=a(96540);function i(e){let t,a=(0,n.c)(2),[i,s]=(0,r.useState)(!1);return a[0]!==e?(t=()=>{let t=e.current,a=t?.lastElementChild;if(!a)return;let n=new IntersectionObserver(e=>{let[t]=e;return s(t?.isIntersecting??!0)},{root:t,threshold:1});return n.observe(a),()=>n.disconnect()},a[0]=e,a[1]=t):t=a[1],(0,r.useEffect)(t),i}},8290:(e,t,a)=>{var n=a(7123),r=a(38642);(0,n.k)("copilot-chat",{Component:r.zn})},8625:(e,t,a)=>{a.d(t,{H:()=>r});var n=a(96540);let r=({inputRef:e,fallbackEventHandler:t})=>(0,n.useCallback)((a,n,r)=>{var i,s;let l,o=e.current;if(!o)return;let c=document.activeElement;o.focus();let d=n??[o.selectionStart??o.value.length,o.selectionEnd??o.value.length],u=void 0===r?(i=o.selectionStart??o.value.length,s=a.length,l=d[1]-d[0],i<d[0]?i:i<d[1]?d[0]+s:i+(s-l)):Array.isArray(r)?r[0]:r,m=Array.isArray(r)?r[1]:u,p=!1;try{if(document.activeElement!==o)throw Error("Input must be focused to use execCommand");o.setSelectionRange(d[0],d[1]),p=""===a?document.execCommand("delete",!1):document.execCommand("insertText",!1,a),o.setSelectionRange(u,m)}catch{p=!1}if((c instanceof HTMLInputElement||c instanceof HTMLTextAreaElement)&&c.focus(),!p){let e=o.value.slice(0,d[0])+a+o.value.slice(d[1]),n=new InputEvent("input",{bubbles:!1});o.value=e,o.setSelectionRange(u,m),o.dispatchEvent(n),t({...n,nativeEvent:n,target:o,currentTarget:o,preventDefault:()=>n.preventDefault(),isDefaultPrevented:()=>n.defaultPrevented,isPropagationStopped:()=>!1,persist:()=>({})})}},[e,t])},14521:(e,t,a)=>{a.d(t,{G:()=>c});var n=a(16522),r=a(79802),i=a(96540),s=a(2635),l=a(23657),o=a(72303);function c(){let e,t=(0,n.c)(1),a=(0,i.useRef)(null);t[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{let t=(0,o.W)(e),n=(0,r.O)(t);return(0,l.Ym)(a.current,n)?a.current:(a.current=n,n)},t[0]=e):e=t[0];let c=(0,s.pn)(e);return(0,l.iI)()||c}},16378:(e,t,a)=>{a.d(t,{O:()=>i,_:()=>s});var n=a(47970),r=a(99054);function i(e){let t=new Set;return(0,n.YR)(e,e=>{"reference-mention"===e.type&&void 0!==e.data.mentionedReferenceId&&t.add(e.data.mentionedReferenceId)}),t}function s(e){return r.qj.test(e.split(/\s/)[0]??"")}},17485:(e,t,a)=>{a.d(t,{C:()=>s});var n=a(25536),r=a(14521),i=a(96540);function s(){let e=(0,r.G)(),{selectedCopilotSpaceId:t,setSelectedCopilotSpaceId:a,selectedThreadId:s}=(0,n.O)(),l=!!s||!!e;(0,i.useEffect)(()=>{a(e||void 0)},[e,a]);let o=t||e,c=(0,i.useCallback)(e=>{l||a({id:e.id,owner:e.owner})},[a,l]),d=(0,i.useCallback)(()=>{l||a(void 0)},[a,l]);return{activeCopilotSpaceId:o,readOnly:l,handleSpaceSelect:c,clearSpaceSelection:d}}},17925:(e,t,a)=>{a.d(t,{V:()=>r,x:()=>i});var n=a(35247);function r(e,t){if(0===t.length||!n.W.chatInputCommands)return null;let a=RegExp(`^\\/(${t.join("|")})(?:\\s|$)`,"i"),r=e.match(a);return r&&r[1]?r[1].toLowerCase():null}function i(e,t){return!!t&&e.trim().toLowerCase()===`/${t.toLowerCase()}`}},20263:(e,t,a)=>{a.d(t,{BC:()=>l,JU:()=>c,Pk:()=>s});var n=a(74848),r=a(12683),i=a(99418);let s=d(r.az),l=d(r.EY),o=({ref:e,...t})=>(0,n.jsx)("div",{...t,ref:e});o.displayName="Div";let c=d(o);function d(e){let t=t=>{let{sanitizedHTML:a,props:r}=function(e){let{html:t,domPurifyConfig:a,...n}=e,r={...a,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1};return{sanitizedHTML:i.default.sanitize(t,r),props:n}}(t);return(0,n.jsx)(e,{...r,dangerouslySetInnerHTML:{__html:a}})};return t.displayName=`UnsafeHTML${e.displayName||e.name}`,t}try{s.displayName||(s.displayName="UnsafeHTMLBox")}catch{}try{l.displayName||(l.displayName="UnsafeHTMLText")}catch{}try{c.displayName||(c.displayName="UnsafeHTMLDiv")}catch{}},26408:(e,t,a)=>{a.d(t,{U:()=>d});var n=a(81171),r=a(82490),i=a(96540),s=a(18312),l=a(2635),o=a(33592),c=a(23657);function d(e,t,a,m,p=!1){let[h,f]=(0,i.useState)(),g=(0,i.useCallback)(()=>f(void 0),[]),{topRepositoriesCache:y,currentRepository:v}=(0,l.Pk)(),x=(0,o.b)(),[b,C]=(0,i.useState)([]),[S,w]=(0,i.useState)(!y&&"initial"),_=(0,i.useRef)(void 0),j=(0,s.useRelayEnvironment)(),I=m&&""!==m.trim();if(h&&!y&&!e&&!I){let e=u(h||[]),{ownerLogin:t,name:a}=v??{};v&&!e.find(e=>`${e.ownerLogin}/${e.name}`==`${t}/${a}`)&&e.splice(0,0,{databaseId:v.id,isInOrganization:"Organization"===v.ownerType,name:v.name,nwo:`${v.ownerLogin}/${v.name}`,ownerLogin:v.ownerLogin,ownerAvatarUrl:`/${v.ownerLogin}.png?s=40`}),setTimeout(()=>x.setTopRepositoryTopics(e),10),w(!1),f(void 0)}let E=(0,i.useCallback)(async()=>{try{let e=await (0,n.St)(j,{first:a,owner:I?m:void 0});f(e)}catch{}finally{w(!1)}},[I,m,j,f,a]);return((0,i.useEffect)(()=>{t&&!I&&E()},[E,I,t,m]),(0,i.useEffect)(()=>{let t=async e=>{w(!0);let{repositories:t}=await (0,n.vO)(j,{query:I?(0,c.rl)(m,e,p):(0,r.J)(e,{includeForks:p}),onStart:e=>{_.current?.unsubscribe(),_.current=e}});C(t.length?u(t):[]),w(!1)};e||I?t(e):y&&C(y)},[e,I,m,j,y,p]),(0,i.useEffect)(()=>{x.setTopRepositoryTopics(void 0)},[x,m]),!y||e||I)?{repositories:b,loading:S,resetTopRepoResults:g}:{repositories:y,loading:!1,resetTopRepoResults:g}}function u(e){return e.map(({owner:{login:e,avatarUrl:t},isInOrganization:a,name:n,databaseId:r})=>({databaseId:r??0,isInOrganization:a,name:n,nwo:`${e}/${n}`,ownerLogin:e,ownerAvatarUrl:t}))}},27844:(e,t,a)=>{a.d(t,{W:()=>l});var n=a(74848),r=a(16522),i=a(77430),s=a(5524);function l(e){let t,a,l,o,c=(0,r.c)(14),{onSelect:d,repo:u,selected:m,trailingVisualComponent:p}=e,{databaseId:h,isInOrganization:f,nwo:g,ownerAvatarUrl:y}=u;return c[0]!==h||c[1]!==d?(t=()=>d(h),c[0]=h,c[1]=d,c[2]=t):t=c[2],c[3]!==f||c[4]!==y?(a=(0,n.jsx)(s.l.LeadingVisual,{children:(0,n.jsx)(i.r,{src:y,square:f,size:16})}),c[3]=f,c[4]=y,c[5]=a):a=c[5],c[6]!==p?(l=p&&(0,n.jsx)(s.l.TrailingVisual,{children:p}),c[6]=p,c[7]=l):l=c[7],c[8]!==g||c[9]!==m||c[10]!==t||c[11]!==a||c[12]!==l?(o=(0,n.jsxs)(s.l.Item,{onSelect:t,selected:m,children:[a,g,l]},g),c[8]=g,c[9]=m,c[10]=t,c[11]=a,c[12]=l,c[13]=o):o=c[13],o}try{l.displayName||(l.displayName="RepositoryListItem")}catch{}},28600:(e,t,a)=>{a.d(t,{A:()=>l});let{getItem:n,setItem:r,removeItem:i}=(0,a(82075).A)("localStorage"),s="REACT_PROFILING_ENABLED",l={enable:()=>r(s,"true"),disable:()=>i(s),isEnabled:()=>!!n(s)}},29731:(e,t,a)=>{a.d(t,{G:()=>n});let n=e=>({})},30459:(e,t,a)=>{a.d(t,{S:()=>o,s:()=>l});var n=a(16522),r=a(96540),i=a(53419),s=a(49936);function l(){let e,t,a=(0,n.c)(6),l=(0,r.useContext)(s.I);if(!l)throw Error("useAnalytics must be used within an AnalyticsContext");let{appName:o,category:c,metadata:d}=l;a[0]!==o||a[1]!==c||a[2]!==d?(e=(e,t,a)=>{let n={react:!0,app_name:o,category:c,...d};(0,i.BI)(e,{...n,...void 0===a?{}:a,target:t})},a[0]=o,a[1]=c,a[2]=d,a[3]=e):e=a[3];let u=e;return a[4]!==u?(t={sendAnalyticsEvent:u},a[4]=u,a[5]=t):t=a[5],t}function o(){let e,t,a=(0,n.c)(4),{sendAnalyticsEvent:r}=l();a[0]!==r?(e=e=>{r("analytics.click",void 0,void 0===e?{}:e)},a[0]=r,a[1]=e):e=a[1];let i=e;return a[2]!==i?(t={sendClickAnalyticsEvent:i},a[2]=i,a[3]=t):t=a[3],t}},35673:(e,t,a)=>{a.d(t,{UJ:()=>f,E5:()=>c,Dq:()=>d,cB:()=>u,zc:()=>m,Cb:()=>p,hl:()=>h});var n=a(74848),r=a(16522),i=a(56149),s=a(94236),l=a(34164),o=a(96540);let c="copilotChatMenuPortalRoot",d="copilotChatMessagesMenuPortalRoot",u=()=>{let e,t,a,s=(0,r.c)(3),l=(0,o.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(l.current,"copilotChatPortalRoot")},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,o.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("div",{ref:l,className:"PortalContainerUtils-module__chatPortalContainer--Otmle"}),s[2]=a):a=s[2],a},m=e=>{let t,a,s,d,u=(0,r.c)(6),{className:m}=e,p=(0,o.useRef)(null);return u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{(0,i.cw)(p.current,c)},a=[],u[0]=t,u[1]=a):(t=u[0],a=u[1]),(0,o.useEffect)(t,a),u[2]!==m?(s=(0,l.$)("PortalContainerUtils-module__menuPortalContainer--D7AeL",m),u[2]=m,u[3]=s):s=u[3],u[4]!==s?(d=(0,n.jsx)("div",{ref:p,className:s}),u[4]=s,u[5]=d):d=u[5],d},p=()=>{let e,t,a,s=(0,r.c)(3),l=(0,o.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(l.current,d)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,o.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("div",{ref:l}),s[2]=a):a=s[2],a},h=()=>{let e,t,a,s=(0,r.c)(3),l=(0,o.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(l.current,"copilotChatTopicPickerPortalRoot")},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,o.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("div",{ref:l}),s[2]=a):a=s[2],a},f=e=>{let t,a,i,l,d,u,m=(0,r.c)(10);m[0]!==e?({children:t,portalContainerName:i,...a}=e,m[0]=e,m[1]=t,m[2]=a,m[3]=i):(t=m[1],a=m[2],i=m[3]);let[p,h]=(0,o.useState)(g);if(m[4]===Symbol.for("react.memo_cache_sentinel")?(l=()=>h(!0),d=[],m[4]=l,m[5]=d):(l=m[4],d=m[5]),(0,o.useEffect)(l,d),!p)return null;let f=i||c;return m[6]!==t||m[7]!==a||m[8]!==f?(u=(0,n.jsx)(s.W.Overlay,{...a,portalContainerName:f,children:t}),m[6]=t,m[7]=a,m[8]=f,m[9]=u):u=m[9],u};try{u.displayName||(u.displayName="ChatPortalContainer")}catch{}try{m.displayName||(m.displayName="MenuPortalContainer")}catch{}try{p.displayName||(p.displayName="MessagesPortalContainer")}catch{}try{h.displayName||(h.displayName="TopicPickerPortalContainer")}catch{}try{f.displayName||(f.displayName="ActionMenuOverlay")}catch{}function g(){return"undefined"!=typeof document}},39176:(e,t,a)=>{a.d(t,{k:()=>n});function n(e){return function e(t,a){let n=t[a];return n?n.items.map(a=>({data:a,items:"directory"===a.contentType?e(t,a.path):[]})).sort((e,t)=>"directory"===e.data.contentType&&"directory"!==t.data.contentType?-1:"directory"!==e.data.contentType&&"directory"===t.data.contentType?1:e.data.name.localeCompare(t.data.name)):[]}(function(e){let{paths:t,directories:a}=e,n={},r=new Set(a);for(let e of(n[""]={items:[],totalCount:0},[...a].sort())){let t=e.substring(0,e.lastIndexOf("/"))||"",a={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"directory"};n[t]||(n[t]={items:[],totalCount:0}),n[t].items.push(a),n[e]||(n[e]={items:[],totalCount:0})}for(let e of t.filter(e=>!r.has(e)).sort()){let t=e.substring(0,e.lastIndexOf("/"))||"",a={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"file"};n[t]||(n[t]={items:[],totalCount:0}),n[t].items.push(a)}for(let e in n){let t=n[e];t&&t.items.sort((e,t)=>"directory"===e.contentType&&"directory"!==t.contentType?-1:"directory"!==e.contentType&&"directory"===t.contentType?1:e.name.localeCompare(t.name))}let i=e=>{let t=n[e];return t?t.items.reduce((e,t)=>"directory"===t.contentType?e+1+i(t.path):e+1,0):0};for(let e in n){let t=n[e];t&&(t.totalCount=i(e))}return n}(e),"")}},39595:(e,t,a)=>{let n;a.d(t,{CF:()=>f,p_:()=>A,FB:()=>u,Se:()=>_,aC:()=>T,zV:()=>N});let r=new WeakSet,i=new WeakMap;function s(e=document){if(i.has(e))return i.get(e);let t=!1,a=new MutationObserver(e=>{for(let t of e)if("attributes"===t.type&&t.target instanceof Element)d(t.target);else if("childList"===t.type&&t.addedNodes.length)for(let e of t.addedNodes)e instanceof Element&&l(e)});a.observe(e,{childList:!0,subtree:!0,attributeFilter:["data-action"]});let n={get closed(){return t},unsubscribe(){t=!0,i.delete(e),a.disconnect()}};return i.set(e,n),n}function l(e){for(let t of e.querySelectorAll("[data-action]"))d(t);e instanceof Element&&e.hasAttribute("data-action")&&d(e)}function o(e){let t=e.currentTarget;for(let a of c(t))if(e.type===a.type){let n=t.closest(a.tag);r.has(n)&&"function"==typeof n[a.method]&&n[a.method](e);let i=t.getRootNode();if(i instanceof ShadowRoot&&r.has(i.host)&&i.host.matches(a.tag)){let t=i.host;"function"==typeof t[a.method]&&t[a.method](e)}}}function*c(e){for(let t of(e.getAttribute("data-action")||"").trim().split(/\s+/)){let e=t.lastIndexOf(":"),a=Math.max(0,t.lastIndexOf("#"))||t.length;yield{type:t.slice(0,e),tag:t.slice(e+1,a),method:t.slice(a+1)||"handleEvent"}}}function d(e){for(let t of c(e))e.addEventListener(t.type,o)}function u(e,t){let a=e.tagName.toLowerCase();if(e.shadowRoot){for(let n of e.shadowRoot.querySelectorAll(`[data-target~="${a}.${t}"]`))if(!n.closest(a))return n}for(let n of e.querySelectorAll(`[data-target~="${a}.${t}"]`))if(n.closest(a)===e)return n}let m=e=>String("symbol"==typeof e?e.description:e).replace(/([A-Z]($|[a-z]))/g,"-$1").replace(/--/g,"-").replace(/^-|-$/,"").toLowerCase(),p=(e,t="property")=>{let a=m(e);if(!a.includes("-"))throw new DOMException(`${t}: ${String(e)} is not a valid ${t} name`,"SyntaxError");return a},h="attr";function f(e,t){E(e,h).add(t)}let g=new WeakSet;function y(e,t){if(g.has(e))return;g.add(e);let a=Object.getPrototypeOf(e),n=a?.constructor?.attrPrefix??"data-";for(let r of(t||(t=E(a,h)),t)){let t=e[r],a=p(`${n}${r}`),i={configurable:!0,get(){return this.getAttribute(a)||""},set(e){this.setAttribute(a,e||"")}};"number"==typeof t?i={configurable:!0,get(){return Number(this.getAttribute(a)||0)},set(e){this.setAttribute(a,e)}}:"boolean"==typeof t&&(i={configurable:!0,get(){return this.hasAttribute(a)},set(e){this.toggleAttribute(a,e)}}),Object.defineProperty(e,r,i),r in e&&!e.hasAttribute(a)&&i.set.call(e,t)}}let v=new Map,x=new Promise(e=>{"loading"!==document.readyState?e():document.addEventListener("readystatechange",()=>e(),{once:!0})}),b=new Promise(e=>{let t=new AbortController;t.signal.addEventListener("abort",()=>e());let a={once:!0,passive:!0,signal:t.signal},n=()=>t.abort();document.addEventListener("mousedown",n,a),document.addEventListener("touchstart",n,a),document.addEventListener("keydown",n,a),document.addEventListener("pointerdown",n,a)}),C={ready:()=>x,firstInteraction:()=>b,visible:e=>new Promise(t=>{let a=new IntersectionObserver(e=>{for(let n of e)if(n.isIntersecting){t(),a.disconnect();return}},{rootMargin:"0px 0px 256px 0px",threshold:.01});for(let t of document.querySelectorAll(e))a.observe(t)})},S=new WeakMap;function w(e){cancelAnimationFrame(S.get(e)||0),S.set(e,requestAnimationFrame(()=>{for(let t of v.keys()){let a=e instanceof Element&&e.matches(t)?e:e.querySelector(t);if(customElements.get(t)||a){let n=a?.getAttribute("data-load-on")||"ready",r=n in C?C[n]:C.ready;for(let e of v.get(t)||[])r(t).then(e);v.delete(t),S.delete(e)}}}))}function _(e,t){for(let[a,n]of("string"==typeof e&&t&&(e={[e]:t}),Object.entries(e)))v.has(a)||v.set(a,new Set),v.get(a).add(n);j(document)}function j(e){n||(n=new MutationObserver(e=>{if(v.size)for(let t of e)for(let e of t.addedNodes)e instanceof Element&&w(e)})),w(e),n.observe(e,{subtree:!0,childList:!0})}let I=Symbol.for("catalyst");let CatalystDelegate=class CatalystDelegate{constructor(e){const t=this,a=e.prototype.connectedCallback;e.prototype.connectedCallback=function(){t.connectedCallback(this,a)};const n=e.prototype.disconnectedCallback;e.prototype.disconnectedCallback=function(){t.disconnectedCallback(this,n)};const r=e.prototype.attributeChangedCallback;e.prototype.attributeChangedCallback=function(e,a,n){t.attributeChangedCallback(this,e,a,n,r)};let i=e.observedAttributes||[];Object.defineProperty(e,"observedAttributes",{configurable:!0,get(){return t.observedAttributes(this,i)},set(e){i=e}}),function(e){let t=e.observedAttributes||[],a=e.attrPrefix??"data-",n=e=>p(`${a}${e}`);Object.defineProperty(e,"observedAttributes",{configurable:!0,get:()=>[...E(e.prototype,h)].map(n).concat(t),set(e){t=e}})}(e),function(e){let t=m(e.name).replace(/-element$/,"");try{window.customElements.define(t,e),window[e.name]=customElements.get(t)}catch(e){if(!(e instanceof DOMException&&"NotSupportedError"===e.name))throw e}}(e)}observedAttributes(e,t){return t}connectedCallback(e,t){var a,n;for(let t of(e.toggleAttribute("data-catalyst",!0),customElements.upgrade(e),e.querySelectorAll("template[data-shadowroot]")))t.parentElement===e&&e.attachShadow({mode:"closed"===t.getAttribute("data-shadowroot")?"closed":"open"}).append(t.content.cloneNode(!0));(y(e),r.add(e),e.shadowRoot&&(l(n=e.shadowRoot),s(n)),l(e),s(e.ownerDocument),t?.call(e),e.shadowRoot)&&(l(a=e.shadowRoot),s(a),j(e.shadowRoot))}disconnectedCallback(e,t){t?.call(e)}attributeChangedCallback(e,t,a,n,r){y(e),"data-catalyst"!==t&&r&&r.call(e,t,a,n)}};function E(e,t){if(!Object.prototype.hasOwnProperty.call(e,I)){let t=e[I],a=e[I]=new Map;if(t)for(let[e,n]of t)a.set(e,new Set(n))}let a=e[I];return a.has(t)||a.set(t,new Set),a.get(t)}function T(e,t){E(e,"target").add(t),Object.defineProperty(e,t,{configurable:!0,get(){return u(this,t)}})}function N(e,t){E(e,"targets").add(t),Object.defineProperty(e,t,{configurable:!0,get(){let e=this.tagName.toLowerCase(),a=[];if(this.shadowRoot)for(let n of this.shadowRoot.querySelectorAll(`[data-targets~="${e}.${t}"]`))n.closest(e)||a.push(n);for(let n of this.querySelectorAll(`[data-targets~="${e}.${t}"]`))n.closest(e)===this&&a.push(n);return a}})}function A(e){new CatalystDelegate(e)}},39619:(e,t,a)=>{a.d(t,{HS:()=>s,Oc:()=>i,Tv:()=>c,Xr:()=>SymbolChangedEvent,f7:()=>l,fD:()=>o,qR:()=>r});var n=a(50467);let OpenCopilotChatEvent=class OpenCopilotChatEvent extends Event{constructor(e){super("open-copilot-chat",{bubbles:!1,cancelable:!0}),(0,n._)(this,"payload",void 0),this.payload=e}};Event;let AddCopilotChatReferenceEvent=class AddCopilotChatReferenceEvent extends Event{constructor(e,t=!1,a){super("add-copilot-chat-reference",{bubbles:!1,cancelable:!0}),(0,n._)(this,"reference",void 0),(0,n._)(this,"openPanel",void 0),(0,n._)(this,"id",void 0),this.reference=e,this.openPanel=t,this.id=a}};let SymbolChangedEvent=class SymbolChangedEvent extends Event{constructor(e){super("symbol-changed",{bubbles:!1,cancelable:!0}),(0,n._)(this,"context",void 0),this.context=e}};function r(e){window.dispatchEvent(new OpenCopilotChatEvent(e))}function i(e,t=!1,a){window.dispatchEvent(new AddCopilotChatReferenceEvent(e,t,a))}function s(e){return window.addEventListener("open-copilot-chat",e),()=>{window.removeEventListener("open-copilot-chat",e)}}function l(e){return window.addEventListener("add-copilot-chat-reference",e),()=>{window.removeEventListener("add-copilot-chat-reference",e)}}function o(e){return window.addEventListener("search-copilot-chat",e),()=>{window.removeEventListener("search-copilot-chat",e)}}function c(e){return window.addEventListener("symbol-changed",e),()=>{window.removeEventListener("symbol-changed",e)}}},40064:(e,t,a)=>{a.d(t,{V:()=>m});var n=a(74848),r=a(96540),i=a(43258),s=a(38621),l=a(52870),o=a(56149);let c={info:"",success:"Toast--success",error:"Toast--error"},d={info:(0,n.jsx)(s.InfoIcon,{}),success:(0,n.jsx)(s.CheckIcon,{}),error:(0,n.jsx)(s.StopIcon,{})},u=({message:e,timeToLive:t,icon:a,type:i="info",role:s="log"})=>{let[u,m]=r.useState(!0),{safeSetTimeout:p}=(0,l.A)();return(0,r.useEffect)(()=>{t&&p(()=>m(!1),t-300)},[p,t]),(0,n.jsx)(o.ZL,{children:(0,n.jsx)("div",{className:"p-1 position-fixed bottom-0 left-0 mb-3 ml-3",children:(0,n.jsxs)("div",{className:`Toast ${c[i]} ${u?"Toast--animateIn":"Toast--animateOut"}`,id:"ui-app-toast","data-testid":`ui-app-toast-${i}`,role:s,children:[(0,n.jsx)("span",{className:"Toast-icon",children:a||d[i]}),(0,n.jsx)("span",{className:"Toast-content",children:e})]})})})};try{u.displayName||(u.displayName="Toast")}catch{}function m(){let{toasts:e,persistedToast:t}=(0,r.useContext)(i.T8);return(0,n.jsxs)(n.Fragment,{children:[e.map((e,t)=>(0,n.jsx)(u,{message:e.message,icon:e.icon,timeToLive:i.Qn,type:e.type,role:e.role},t)),t&&(0,n.jsx)(u,{message:t.message,icon:t.icon,type:t.type,role:t.role})]})}try{m.displayName||(m.displayName="Toasts")}catch{}},46747:(e,t,a)=>{a.d(t,{d:()=>s});var n=a(31223),r=a(23125),i=a(96540);let s=(e,t,{leading:a=!1,maxWait:s,trailing:l=!0,onChangeBehavior:o="flush"}={})=>{let c=(0,n.M)(e),d=(0,i.useMemo)(()=>{let e=void 0===s?{leading:a,trailing:l}:{leading:a,trailing:l,maxWait:s};return(0,r.A)((...e)=>c.current(...e),t,e)},[c,t,a,s,l]);return(0,i.useEffect)(()=>()=>{d?.[o]()},[d,o]),d}},49197:(e,t,a)=>{a.d(t,{w:()=>m});var n=a(74848),r=a(5524),i=a(50463),s=a(79080),l=a(40090),o=a(96540),c=a(4038);let d=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.l.Item,{disabled:!0,children:(0,n.jsx)(l.r,{})}),(0,n.jsx)(r.l.Item,{disabled:!0,children:(0,n.jsx)(l.r,{})}),(0,n.jsx)(r.l.Item,{disabled:!0,children:(0,n.jsx)(l.r,{})})]}),u=({suggestion:e,onSelect:t,isActive:a,id:i,parentRole:s})=>{let l={id:i,children:(0,c.It)(e),role:"menu"===s?"menuitem":"option",active:a,className:"AutocompleteSuggestions-module__suggestion--ted1j","aria-selected":"listbox"===s&&!!a||void 0,onMouseDown:e=>{e.preventDefault(),t()}};return"string"==typeof e?(0,n.jsx)(r.l.Item,{...l}):e.render(l)},m=({suggestions:e,portalName:t,triggerCharCoords:a,onClose:l,onCommit:m,inputRef:p,visible:h,defaultPlacement:f,activeSuggestion:g,getSuggestionId:y,id:v,menuTitle:x,role:b})=>{let C=(0,o.useRef)(null),[S,w]=(0,o.useState)(0),[_,j]=(0,o.useState)("auto");(0,i.A)(function(){j("auto");let e=C.current?.offsetHeight??0,t=a.top+a.height,n=t+e>window.innerHeight,r=a.top-e,i=r<0,s={below:n&&!i?r:t,above:i&&!n?t:r}[f];if(Number.isNaN(s)&&(s=0),w(Math.max(0,s)),n&&i){let e="above"===f?window.innerHeight+s:window.innerHeight-s;j(`${e}px`)}},[a.top,a.height,e,h,f]);let I=(0,n.jsx)(n.Fragment,{children:"loading"===e?(0,n.jsx)(d,{}):e?.map(e=>(0,n.jsx)(u,{suggestion:e,id:y(e),onSelect:()=>m(e),isActive:g===e,parentRole:b},(0,c.QG)(e)))}),E=(0,o.useId)();return h?(0,n.jsx)(s.Ay,{onEscape:l,onClickOutside:l,returnFocusRef:p,preventFocusOnOpen:!0,portalContainerName:t,top:S,left:a.left,ref:C,className:"AutocompleteSuggestions-module__Overlay_0--LMGK_",children:(0,n.jsx)(r.l,{role:b,id:v,"aria-label":x?void 0:"Autocomplete suggestions","aria-labelledby":x?E:void 0,className:"AutocompleteSuggestions-module__ActionList_0--iXEKc",style:{height:_},children:x?(0,n.jsxs)(r.l.Group,{children:[(0,n.jsx)(r.l.GroupHeading,{id:E,children:x}),I]}):I})}):(0,n.jsx)(n.Fragment,{})};try{d.displayName||(d.displayName="LoadingIndicator")}catch{}try{u.displayName||(u.displayName="SuggestionListItem")}catch{}try{m.displayName||(m.displayName="AutocompleteSuggestions")}catch{}},51112:(e,t,a)=>{a.d(t,{a:()=>x});var n=a(74848),r=a(70170),i=a(71315),s=a(83494),l=a(8625),o=a(50691),c=a(36523),d=a(21513),u=a(56149),m=a(34164),p=a(24249),h=a(96540),f=a(49197),g=a(4038);let y=e=>{try{return e.selectionStart}catch(e){if(e instanceof TypeError)return null;throw e}},v=()=>{},x=({inputRef:e,containerClassName:t="",triggers:a,suggestions:x,onShowSuggestions:b,onHideSuggestions:C,onSelectSuggestion:S,shouldReplaceText:w,style:_,children:j,tabInsertsSuggestions:I=!1,suggestionsPlacement:E="below",portalName:T,fullWidth:N=!1,title:A,asMenu:R,...k})=>{let[,M]=(0,h.useState)(0),L=(0,o.Lf)(k),P=(0,c.L)(e);(0,d.T)(j.props.ref??v,P);let O=(0,g.$T)(j,P),F=(0,l.H)({inputRef:P,fallbackEventHandler:O.props.onChange??v}),D=(0,h.useRef)(null),$=null!==x&&x.length>0,[W,B]=(0,h.useState)(),U=Array.isArray(x)?x.find(e=>(0,g.QG)(e)===W)??x[0]:void 0;W&&!$&&B(void 0),(0,h.useEffect)(()=>{if($){let e=(0,r.n)(()=>M(e=>e+1),100);return document.addEventListener("scroll",e,{capture:!0}),()=>{document.removeEventListener("scroll",e,{capture:!0})}}},[$]);let q=P.current&&D.current&&$?new p.Qr(P.current,(y(P.current)??0)-D.current.query.length).getBoundingClientRect():{top:0,left:0,height:0},V=e=>{if(!U||!Array.isArray(x))return;let t=e=>{B(e?(0,g.QG)(e):void 0)};switch(e){case"up":t(x[x.indexOf(U)-1]??x.at(-1));break;case"down":t(x[x.indexOf(U)+1]??x[0]);break;case"start":t(x[0]);break;case"end":t(x.at(-1))}},z=(e=U)=>{let t;if(!e)return;let a=(0,g.wV)(e),n=(0,g.It)(e)??"";if(!P.current||!D.current)return;let{query:r,trigger:i}=D.current,s=y(P.current)??0,l=r.length+i.triggerChar.length,o=s-l,c={suggestion:e,trigger:i,query:r,target:P.current};if(w?.(c)??!0){let e=a||(i.keepTriggerCharOnCommit??!0)?i.triggerChar:"",r=!a&&(i.insertSpaceOnCommit??!0);t=`${e}${n}${r?" ":""}`}else t="";C(),F(t,[o,o+l]),S?.(c)},H=(0,h.useId)(),K=e=>`${H}-${(0,g.QG)(e)}`,G=!R,Q=(0,h.cloneElement)(O,{...L,onBlur:(0,g.oT)(O.props.onBlur,()=>{C()}),onKeyDownCapture:(0,g.oT)(O.props.onKeyDownCapture,e=>{if($)switch(e.key){case"ArrowRight":case"ArrowLeft":C();break;case"Tab":I||C()}}),onChange:(0,g.oT)(O.props.onChange,e=>{let t=y(e.currentTarget);if(null===t)return void C();let n=(0,g.Oe)(a,e.currentTarget.value,t);D.current=n&&{...n,target:e.currentTarget},D.current?b(D.current):C()}),ref:P,role:$&&G?"combobox":O.props.role,"aria-expanded":$&&G?"true":O.props["aria-expanded"],"aria-activedescendant":U?K(U):O.props["aria-activedescendant"],"aria-controls":$&&G?H:O.props["aria-controls"],"aria-owns":$&&R?H:O.props["aria-owns"],"aria-autocomplete":$&&G?"list":O.props["aria-autocomplete"],"aria-haspopup":$&&G?"listbox":O.props["aria-haspopup"]}),J=$?"loading"===x?"Loading autocomplete suggestions\u2026":G?`${x.length} autocomplete ${1===x.length?"suggestion":"suggestions"} available; "${(0,g.It)(x[0])}" is highlighted. Press ${I?"Enter or Tab":"Enter"} to select.`:"":"";return(0,n.jsxs)(s.tL,{commands:$?{"github:cancel":()=>C(),"github:select":()=>z(),"github:focus-next":I?()=>z():void 0,"github:down":()=>V("down"),"github:up":()=>V("up"),"github:go-to-start":()=>V("start"),"github:go-to-end":()=>V("end")}:{},className:(0,m.$)("InlineAutocomplete-module__container--lzMAk",N&&"InlineAutocomplete-module__fullWidth--xhTmc",t),style:_,children:[Q,i.KJ&&(0,n.jsx)(f.w,{id:H,suggestions:x,inputRef:P,onCommit:z,onClose:C,triggerCharCoords:q,visible:$,defaultPlacement:E,portalName:T,activeSuggestion:U,getSuggestionId:K,menuTitle:A,role:R?"menu":"listbox"}),i.KJ&&(0,n.jsx)(u.ZL,{children:(0,n.jsx)("span",{"aria-live":"assertive","aria-atomic":!0,style:{clipPath:"circle(0)",position:"absolute"},children:J})})]})};try{x.displayName||(x.displayName="InlineAutocomplete")}catch{}},51407:(e,t,a)=>{a.d(t,{Y:()=>n});function n(){let e={};return e.promise=new Promise((t,a)=>{e.resolve=t,e.reject=a}),e}},51563:(e,t,a)=>{a.d(t,{$:()=>d});var n=a(33592),r=a(23657),i=a(72011),s=a(97665),l=a(94747),o=a(96379),c=a(31971);let d=e=>{let t=(0,n.b)(),a=(0,s.jE)(),{mutateAsync:d,...u}=(0,l.n)({onSuccess:async()=>{a.invalidateQueries({queryKey:i.O6}),e&&await a.invalidateQueries({queryKey:(0,i.dp)(e)})},mutationFn:async a=>{let n=e?(0,r.fn)(e):"/custom_copilots",i={custom_copilot:{owner_id:a.ownerId,owner_type:a.ownerType,name:a.name,icon_type:a.iconType,icon_color:a.iconColor,description:a.description,general_instructions:a.generalInstructions,resources_attributes:a.resources?.map(e=>({id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:e.markedForDestroy,metadata:(0,c.M)(e)})),visibility:a.visibility,base_role:a.baseRole}},s=await (0,o.lS)(n,{method:e?"PUT":"POST",body:i}),l=await s.json();if(!s.ok)throw l.errorMessages;return t?.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:l}),l}});return{upsertCopilotSpace:d,...u}}},53419:(e,t,a)=>{let n;a.d(t,{BI:()=>h,Ti:()=>f,lA:()=>m,sX:()=>p});var r=a(70837),i=a(18679),s=a(82075),l=a(82518);let{getItem:o}=(0,s.A)("localStorage"),c="dimension_",d=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];try{let e=(0,r.O)("octolytics");delete e.baseContext,n=new i.s(e)}catch{}function u(e){let t=(0,r.O)("octolytics").baseContext||{};if(t)for(let[e,a]of(delete t.app_id,delete t.event_url,delete t.host,Object.entries(t)))e.startsWith(c)&&(t[e.replace(c,"")]=a,delete t[e]);let a=document.querySelector("meta[name=visitor-payload]");for(let[e,n]of(a&&Object.assign(t,JSON.parse(atob(a.content))),new URLSearchParams(window.location.search)))d.includes(e.toLowerCase())&&(t[e]=n);return t.staff=(0,l.Xl)().toString(),Object.assign(t,e)}function m(e){n?.sendPageView(u(e))}function p(){return document.head?.querySelector('meta[name="current-catalog-service"]')?.content}function h(e,t={}){let a=p(),r=a?{service:a}:{};for(let[e,a]of Object.entries(t))null!=a&&(r[e]=`${a}`);n&&(u(r),n.sendEvent(e||"unknown",u(r)))}function f(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,JSON.stringify(t)]))}},54114:(e,t,a)=>{a.d(t,{Rw:()=>A});var n=a(74848),r=a(6665),i=a(19189),s=a(25556),l=a(34535),o=a(96459),c=a(38621),d=a(60569),u=a(46720),m=a(69726),p=a(12683),h=a(10095),f=a(96540),g=a(96379),y=a(52870);function v(e,t,a){let n=[];for(let r of t)if(r.startsWith(e)){let t=r.slice(e.length+1),i=t.indexOf("/"),s=i>0?t.slice(0,i):t,l=`${e}/${s}`;if(a&&a.some(e=>e.path===l))continue;let o={items:[],data:{contentType:l===r?"file":"directory",name:s,path:l,isClientOnly:!0}};n.push(o)}return n}let x="FileTreePicker-module__checkbox--uY6AK",b="FileTreePicker-module__itemContainer--ShYuv";var C=a(53419);function S(e,t){let a=new Set(e);switch(t.type){case"SINGLE_SELECT_FILE":a.clear(),a.add(t.path),(0,C.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SINGLE_SELECT_FILE",newFileCount:a.size});break;case"SELECT_FILE":a.add(t.path),(0,C.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_FILE",newFileCount:a.size});break;case"DESELECT_FILE":a.delete(t.path),(0,C.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_FILE",newFileCount:a.size});break;case"SELECT_DIRECTORY":for(let e of t.paths)a.add(e);(0,C.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_DIRECTORY",newFileCount:a.size,directoryCount:t.paths.length});break;case"DESELECT_DIRECTORY":for(let e of t.paths)a.delete(e);(0,C.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_DIRECTORY",newFileCount:a.size,directoryCount:t.paths.length})}return a}function w({isActive:e,file:t,onItemSelected:a,getItemUrl:i,selectedItemRef:o,navigate:m,onRenderRow:p,getFileTrailingVisual:h,getFileIcon:g,navigateOnClick:y,isSelected:v,singleSelect:C}){let{sendRepoClickEvent:S}=(0,r.T)(),w=f.useRef(null),_=(0,l.Z)({focusRowRef:w,mouseRowRef:w}),j="submodule"===t.data.contentType,I=h?.(t.data);(0,f.useEffect)(()=>{e&&w.current&&requestAnimationFrame(()=>{w.current?.scrollIntoView({block:"center"})})},[e]);let E=f.useCallback(e=>{j?(e.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(i?.(t.data),"_blank"),e.preventDefault()):(a?.(t.data,t),S("FILES_TREE.ITEM",{item_path:t.data.path}),y&&m(i?.(t.data)||""),e.stopPropagation())},[t,i,j,m,y,a,S]);return p?.(),(0,n.jsxs)(d.G.Item,{ref:w,onSelect:E,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,n.jsx)(d.G.LeadingVisual,{children:g?g(t.data):j?(0,n.jsx)(c.FileSubmoduleIcon,{}):(0,n.jsx)(c.FileIcon,{})}),(0,n.jsxs)("div",{className:b,children:[!C&&(0,n.jsx)(u.A,{className:x,checked:v||!1,readOnly:!0,"aria-label":`Select ${t.data.name}`}),(0,n.jsx)("span",{ref:o,style:{color:j?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:(0,n.jsx)("span",{"data-testid":`${t.data.path}-file-item`,children:t.data.name})})]}),_&&(0,n.jsx)(s.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:w,"aria-label":t.data.name,open:!0,direction:"ne"}),!!I?.screenReaderText&&(0,n.jsx)("span",{className:"sr-only",children:I.screenReaderText}),!!I?.trailingVisual&&(0,n.jsx)(d.G.TrailingVisual,{children:I.trailingVisual})]})}let _=f.memo(w),j=f.memo(u.A);function I({clientOnlyFilePaths:e,directory:t,isActive:a,isAncestorOfActive:i,leadingPath:o,onItemSelected:c,getItemUrl:u,getFetchUrl:m,selectedItemRef:p,navigate:h,onRenderRow:C,getFileTrailingVisual:S,getFileIcon:w,navigateOnClick:_,selectedChildren:I,expandedPath:E,singleSelect:T}){let[A,k]=(0,f.useState)(i),{sendRepoClickEvent:M}=(0,r.T)(),L=f.useRef(null),P=f.useRef(null),O=(0,l.Z)({focusRowRef:P,mouseRowRef:L}),F=f.useMemo(()=>I?I.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`)):[],[I,t.data.path]),D=f.useMemo(()=>I?.includes(t.data.path)??!1,[I,t.data.path]),$=t.items.length>1e3,W=f.useMemo(()=>(function(e,t,a){if(a?.selectedSelf&&a?.isLarge)return"all";if(!t||0===t.length)return"none";let n=new Set(t);if(a?.isLarge&&n.has(e.data.path))return"all";let r=e=>{let t=new Set;for(let a of e.items)if("directory"===a.data.contentType)for(let e of r(a))t.add(e);else t.add(a.data.path);return t},i=r(e),s=Array.from(i).filter(e=>n.has(e)).length;return 0===s?"none":s===i.size?"all":"partial"})(t,F,{selectedSelf:D,isLarge:$}),[t,F,D,$]),[B,U,q,V,z,H,K]=function(e,t,a){let[n,r]=f.useState(e.items),[i,s]=f.useState(e.data.totalCount||0),[l,o]=f.useState(!1),[c,d]=f.useState(!1),{safeSetTimeout:u}=(0,y.A)();f.useEffect(()=>{r(e.items)},[e.items]),f.useEffect(()=>{void 0!==e.data.totalCount&&s(e.data.totalCount)},[e.data.totalCount]);let m=f.useCallback(()=>{d(!1)},[]),p=f.useCallback((e,t)=>{let a=e||[...n];r(a.slice(0,100)),u(()=>{r(a),void 0!==t&&s(t)},1)},[n,u]);return[f.useCallback(async n=>{let i=new Map;if(e.data.isClientOnly){if(n){let a=v(e.data.path,n);for(let e of a)i.set(e.data.path,e);t({type:"add",folders:i,processingTime:0}),a.length>100?p(a,a.length):(r(a),s(a.length))}}else{let l=a(e.data);d(!1),o(!0);let c=Date.now(),u=await (0,g.lS)(`${l}?noancestors=1`);try{if(u.ok){let a=await u.json(),l=a.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===a.payload.tree.items.length};return(i.set(e.path,t),e.hasSimplifiedPath)?function e(t,a,n){t.data.name=t.data.name.slice(t.data.name.lastIndexOf("/")+1,t.data.name.length);let r=a.name.slice(0,a.name.lastIndexOf("/")),i=r.indexOf("/")>-1,s={path:a.path.slice(0,a.path.lastIndexOf("/")),contentType:a.contentType,name:r,hasSimplifiedPath:i},l={items:[t],data:s};return(n.set(s.path,l),i)?e(l,{...s},n):l}(t,e,i):t});if(n){let t=e.data.path,r=v(t,n,a.payload.tree.items);for(let e of(l.push(...r),r))i.set(e.data.path,e)}t({type:"add",folders:i,processingTime:Date.now()-c}),e.items=l,e.data.totalCount=a.payload.tree.totalCount,l.length>100?p(l,a.payload.tree.totalCount):(r(l),s(a.payload.tree.totalCount))}else d(!0)}catch{d(!0)}}o(!1)},[a,e,t,p]),p,n,l,c,m,i]}(t,()=>{},m),G=o?`${o}/`:"",Q=K-q.length;(0,f.useEffect)(()=>{a&&L.current&&requestAnimationFrame(()=>{L.current?.scrollIntoView({block:"center"})})},[a]);let J=f.useCallback(e=>{!e||A||V||z||!(t.items.length>100)||U(),e!==A&&k(e)},[A,V,z,t.items.length,U]),X=f.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&_?(window.open(u?.(t.data),"_blank"),e.preventDefault()):(T?J(!A):(c?.(t.data,t),M("FILES_TREE.ITEM",{item_path:t.data.path}),_&&h(u?.(t.data)||"")),e.stopPropagation())},[t,u,A,h,_,c,J,M,T]);f.useEffect(()=>{i&&!A&&J?.(!0)},[i]),f.useEffect(()=>{0===t.items.length&&A?J?.(!1):!A&&t.autoExpand&&J?.(!0)},[t.items.length]);let Y=f.useCallback(e=>{p&&a&&p(e),L.current=e},[p,a]);if(1===t.items.length){let r=t.items[0];if(r&&"directory"===r.data.contentType)return(0,n.jsx)(N,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:G+t.data.name,inheritsActive:a,onItemSelected:c,selectedItemRef:p,getItemUrl:u,directoryNavigateOnClick:_,navigateOnClick:_,getFileTrailingVisual:S,getFileIcon:w,selectedChildren:F,expandedPath:E,singleSelect:T})}return C?.(),(0,n.jsxs)(d.G.Item,{ref:P,expanded:A,onExpandedChange:J,current:a,onSelect:X,id:`${t.data.path}-item`,containIntrinsicSize:a?void 0:"auto 2rem",children:[(0,n.jsx)(d.G.LeadingVisual,{children:(0,n.jsx)(d.G.DirectoryIcon,{})}),(0,n.jsxs)("div",{className:b,children:[!T&&(0,n.jsx)(j,{className:x,checked:"all"===W,indeterminate:"partial"===W,readOnly:!0,"aria-label":`Select ${t.data.name}`,"data-indeterminate":"partial"===W?"true":void 0}),(0,n.jsxs)("span",{ref:Y,children:[G&&(0,n.jsx)("span",{children:G}),(0,n.jsx)("span",{"data-testid":`${t.data.path}-directory-item`,children:t.data.name})]})]}),O&&(0,n.jsx)(s.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:P,"aria-label":`${G}${t.data.name}`,open:!0,direction:"ne"}),(0,n.jsx)(d.G.SubTree,{state:V?"loading":z?"error":"done",children:z?(0,n.jsx)(d.G.ErrorDialog,{onRetry:B,onDismiss:H,children:"There was an error loading the folder contents."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N,{clientOnlyFilePaths:e,directoryItems:q,onItemSelected:c,selectedItemRef:p,getItemUrl:u,directoryNavigateOnClick:_,navigateOnClick:_,getFileTrailingVisual:S,getFileIcon:w,selectedChildren:F,expandedPath:E,singleSelect:T}),Q>0&&(0,n.jsx)(R,{message:`${Q} entries not shown`})]})})]})}let E=f.memo(I,(e,t)=>e.isActive===t.isActive&&e.isAncestorOfActive===t.isAncestorOfActive&&e.directory===t.directory&&(e.selectedChildren===t.selectedChildren||0===e.selectedChildren.length&&0===t.selectedChildren.length)&&e.expandedPath===t.expandedPath);function T({clientOnlyFilePaths:e,directoryItems:t,leadingPath:a,inheritsActive:r,onItemSelected:s,selectedItemRef:l,onRenderRow:c,getItemUrl:d,getFileTrailingVisual:u,getFileIcon:m,directoryNavigateOnClick:p,navigateOnClick:h,selectedChildren:g,expandedPath:y,singleSelect:v}){let x=(0,i.Z)(),b=(0,o.Z)(),C=f.useRef(b),S=f.useRef(s);f.useEffect(()=>{S.current=s,C.current=b},[s,b]);let w=f.useCallback((e,t)=>{S.current?.(e,t)},[]),j=f.useMemo(()=>t.map(t=>{let i=y===t.data.path,s=g?.includes(t.data.path),o=i||y.startsWith(`${t.data.path}/`),f=g?.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`))||[];return"directory"===t.data.contentType?(0,n.jsx)(E,{clientOnlyFilePaths:e,isActive:r||i,isAncestorOfActive:o,onItemSelected:w,leadingPath:a,directory:t,getItemUrl:d,getFetchUrl:x.getItemUrl,selectedItemRef:o?l:void 0,navigate:b,onRenderRow:c,navigateOnClick:p,getFileTrailingVisual:u,getFileIcon:m,itemCount:t.items.length,isSelected:s,selectedChildren:f,expandedPath:y,singleSelect:v},t.data.name):(0,n.jsx)(_,{onItemSelected:w,file:t,isActive:i,getItemUrl:d,selectedItemRef:i?l:void 0,navigate:b,navigateOnClick:h,onRenderRow:c,getFileTrailingVisual:u,getFileIcon:m,isSelected:s,singleSelect:v},t.data.name)}),[t,y,g,w,d,l,b,h,c,u,m,v,e,r,a,x.getItemUrl,p]);return(0,n.jsx)(n.Fragment,{children:j})}let N=f.memo(T);function A(e){let{clientOnlyFilePaths:t,rootItems:a,fetchError:r,loading:i,onRenderRow:s,getItemUrl:l,getFileTrailingVisual:o,getFileIcon:c,expandedPath:u,onSelectionChange:h}=e,[g,y]=(0,f.useReducer)(S,new Set),v=e.selectedItems||g,x=(0,f.useCallback)(e=>{let t=new Set;if(t.add(e.data.path),"directory"===e.data.contentType)for(let a of e.items)for(let e of x(a))t.add(e);return Array.from(t)},[]),b=(0,f.useCallback)((t,a)=>{var n;let r=(n=!!e.singleSelect,n?{type:"SINGLE_SELECT_FILE",path:t}:a?{type:"DESELECT_FILE",path:t}:{type:"SELECT_FILE",path:t});h?h(S(v,r)):y(r)},[h,e.singleSelect,v]),C=(0,f.useCallback)((t,a)=>{if(e.allowFolderReferences&&t.items.length>1e3){let e=t.data.path,a=v.has(e)?{type:"DESELECT_FILE",path:e}:{type:"SELECT_FILE",path:e};h?h(S(v,a)):y(a);return}let n=x(t),r=a?{type:"DESELECT_DIRECTORY",paths:n}:{type:"SELECT_DIRECTORY",paths:n};h?h(S(v,r)):y(r)},[x,h,v,e.allowFolderReferences]),w=(0,f.useCallback)((t,a)=>{if("directory"===t.contentType){if(e.allowFolderReferences&&a.items.length>1e3)return void C(a,v.has(t.path));let n=x(a),r=n.filter(e=>v.has(e)),i=r.length>0,s=n.length===r.length;i&&!s?C(a,!0):C(a,s)}else b(t.path,v.has(t.path))},[x,C,b,v,e.allowFolderReferences]),_=(0,f.useCallback)(e=>{1===e.button&&e.preventDefault()},[]);return(0,n.jsx)(p.az,{onMouseDown:_,sx:{...e.sx},"data-testid":"repos-file-tree-container",className:"FileTreePicker-module__Box--RKQKr",children:i?(0,n.jsxs)("div",{className:"FileTreePicker-module__Box_1--usRNW",children:[(0,n.jsx)(m.A,{"aria-label":"Loading file tree"}),(0,n.jsx)("span",{className:"fgColor-muted",children:"Fetching files..."})]}):(0,n.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,n.jsxs)(d.G,{"aria-label":"Files",children:[r&&(0,n.jsx)(R,{message:"Some files could not be loaded."}),(0,n.jsx)(N,{clientOnlyFilePaths:t,directoryItems:a,onItemSelected:w,selectedChildren:v?Array.from(v):[],selectedItemRef:e.selectedItemRef,onRenderRow:s,directoryNavigateOnClick:e.directoryNavigateOnClick,navigateOnClick:e.navigateOnClick,getItemUrl:l,getFileTrailingVisual:o,getFileIcon:c,expandedPath:u,singleSelect:e.singleSelect})]})})})}function R({message:e}){return(0,n.jsxs)(d.G.Item,{id:"error-tree-row",children:[(0,n.jsx)(d.G.LeadingVisual,{children:(0,n.jsx)(h.A,{icon:c.AlertFillIcon,className:"FileTreePicker-module__Octicon--rINlU"})}),(0,n.jsx)("div",{className:"FileTreePicker-module__Box_2--yFodr",children:e||"Couldn't load."})]})}try{w.displayName||(w.displayName="WrappedFileTreeRow")}catch{}try{_.displayName||(_.displayName="FileTreeRow")}catch{}try{j.displayName||(j.displayName="MemoizedCheckbox")}catch{}try{I.displayName||(I.displayName="WrappedDirectoryTreeRow")}catch{}try{E.displayName||(E.displayName="DirectoryTreeRow")}catch{}try{T.displayName||(T.displayName="WrappedDirectoryContents")}catch{}try{N.displayName||(N.displayName="DirectoryContents")}catch{}try{A.displayName||(A.displayName="FileTreePicker")}catch{}try{R.displayName||(R.displayName="ErrorTreeRow")}catch{}},54571:(e,t,a)=>{a.d(t,{I:()=>s});var n=a(96540),r=a(88431),i=a(76629);function s(e,t,a=[]){let l=(0,n.useCallback)(e,a),o=(0,i.BP)(),c=(0,n.useRef)(o===i.O8.ClientRender),[d,u]=(0,n.useState)(()=>o===i.O8.ClientRender?l():t),m=(0,n.useCallback)(()=>{u(l)},[l]);return(0,r.N)(()=>{c.current||u(l),c.current=!1},[l,...a]),[d,m]}},56708:(e,t,a)=>{a.d(t,{q:()=>ChatInputValidationError});let ChatInputValidationError=class ChatInputValidationError extends Error{constructor(e){super(e),this.name="ChatInputValidationError"}}},57448:(e,t,a)=>{a.d(t,{Ld:()=>m,Tz:()=>h,W5:()=>d,cx:()=>u,vn:()=>p});var n=a(51987),r=a(97665),i=a(97286),s=a(94747),l=a(96379),o=a(96540),c=a(79064);a(2635),a(33592);let d={Unindexed:"not_indexed",Indexed:"indexed",Indexing:"indexing",PartiallyIndexed:"partially_indexed",Unknown:"unknown"},u=256,m=400;function p(e){var t,a;let n,l,c=(0,r.jE)(),u=(0,o.useCallback)(()=>Promise.resolve(c.invalidateQueries({queryKey:["repo-indexing-state",e]})),[c,e]),m=(0,i.I)({queryKey:["copilot-chat","repo-indexing-state",e],queryFn:()=>f(e),placeholderData:{requestStatus:"unknown",code:d.Unknown,docs:d.Unknown},staleTime:1/0}),{mutate:p}=(0,s.n)({mutationKey:["repo-indexing-state"],mutationFn:()=>g([e]),onSuccess:u}),h=m.data;return t=()=>void u(),a=1e4*(h.code===d.Indexing&&"indexing_error"!==h.requestStatus),n=(0,o.useRef)(void 0),l=(0,o.useRef)(t),(0,o.useEffect)(()=>{l.current=t},[t]),(0,o.useEffect)(()=>{if(a>0)return n.current=window.setInterval(()=>l.current(),a),()=>window.clearInterval(n.current)},[a]),[h,()=>p()]}function h(){let e=c.Jt.getPanelHeight(),t=c.Jt.getPanelWidth(),a=(0,o.useRef)(null),n=(0,o.useRef)(e),r=(0,o.useRef)(e),i=(0,o.useRef)(null),s=(0,o.useRef)(t),l=(0,o.useRef)(t),[d,p]=(0,o.useState)(e),[h,f]=(0,o.useState)(t),g=(0,o.useRef)(0);(0,o.useEffect)(()=>{g.current=parseFloat(getComputedStyle(document.documentElement).fontSize)},[]);let y=e=>Math.min(Math.max(e,u),window.innerHeight-g.current),v=e=>Math.min(Math.max(e,m),window.innerWidth-2*g.current),x=(0,o.useCallback)(e=>{if(null!==a.current){let t=a.current-e.clientY,i=y(n.current+t);p(i),r.current=i}if(null!==i.current){let t=i.current-e.clientX,a=v(s.current+t);f(a),l.current=a}},[]),b=(0,o.useCallback)(()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",b),null!==a.current&&(c.Jt.setPanelHeight(r.current),a.current=null),null!==i.current&&(c.Jt.setPanelWidth(l.current),i.current=null)},[x]),C=(0,o.useCallback)((e,t,r)=>{0===e.button&&(e.preventDefault(),r&&(a.current=e.clientY,n.current=d),t&&(i.current=e.clientX,s.current=h),window.addEventListener("mousemove",x),window.addEventListener("mouseup",b))},[d,h,x,b]),S=(0,o.useCallback)(e=>{if("ArrowUp"===e.key){let t=y(d+4);p(t),c.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowDown"===e.key){let t=y(d-4);p(t),c.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowRight"===e.key){let t=v(h-4);f(t),c.Jt.setPanelWidth(t),e.preventDefault()}else if("ArrowLeft"===e.key){let t=v(h+4);f(t),c.Jt.setPanelWidth(t),e.preventDefault()}},[d,h]);return{panelWidth:h,panelHeight:d,startResize:C,onResizerKeyDown:S}}async function f(e){let t=await fetch(`/search/check_indexing_status?nwo=${encodeURIComponent(e)}`,{headers:{Accept:"application/json",...(0,n.kt)()}});if(!t.ok)return{requestStatus:"request_failed",code:d.Unknown,docs:d.Unknown};let a=await t.json();return{requestStatus:a.can_index,code:a.code_status,docs:a.docs_status}}async function g(e){let t=1===e.length?`nwo=${encodeURIComponent(e[0])}`:`nwos=${encodeURIComponent(JSON.stringify(e))}`;return(0,l.DI)(`/search/index_embeddings?${t}&index_code=true`,{method:"POST"})}},59788:(e,t,a)=>{a.d(t,{Q:()=>es});var n=a(74848),r=a(26108),i=a(57387),s=a(46251),l=a(86877),o=a(21373),c=a(72511),d=a(38621),u=a(96540),m=a(97564),p=a(54030),h=a(39176),f=a(54114),g=a(71363),y=a(78314),v=a(31078),x=a(53552),b=a(64375),C=a(29731),S=a(6665),w=a(19189),_=a(7808),j=a(64642),I=a(65787),E=a(25407),T=a(66108),N=a(39467),A=a(96459),R=a(97068),k=a(45800),M=a(31604),L=a(12683),P=a(10095),O=a(91385),F=a(70170),D=a(37272),$=a(71315),W=a(34164);let B=({ref:e,ariaActiveDescendant:t,ariaControls:a,ariaExpanded:r,ariaHasPopup:i,className:s,onBlur:l,onFocus:o,onKeyDown:c,onPreload:m,onSearch:p,query:h,searchPlaceholder:f,loading:g,sx:y})=>{let{sendRepoClickEvent:v}=(0,S.T)(),[x,b]=u.useState(h),C=u.useRef((0,F.s)(e=>p(e),250));u.useEffect(()=>{b(h)},[h]);let w=h?(0,n.jsx)(L.ks.Action,{onClick:()=>{v("FILE_TREE.CANCEL_SEARCH"),p("")},icon:d.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,n.jsx)(L.ks,{autoFocus:U(),className:(0,W.$)("d-flex",s),ref:e,value:x,onKeyDown:c,onChange:e=>{b(e.target.value),m(),C.current(e.target.value)},sx:y,"aria-label":f||"Go to file","aria-activedescendant":t,role:i?"combobox":void 0,"aria-controls":a,"aria-expanded":r,"aria-haspopup":i?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:f||"Go to file",loading:""!==h&&g,leadingVisual:d.SearchIcon,trailingAction:w,trailingVisual:w?void 0:()=>(0,n.jsx)(D.E,{children:(0,n.jsx)("kbd",{children:"t"})}),onFocus:e=>{m(),e.target.select(),o?.(e)},onBlur:l,onClick:()=>v("FILE_TREE.SEARCH_BOX")})};function U(){return"1"===new URLSearchParams($.fV.search).get("search")}B.displayName="FilesSearchBox";let q={excludeDirectories:!1,excludeSeeAllResults:!1};function V({actionListSx:e,additionalResults:t,className:a,commitOid:r,config:i=q,findFileWorkerPath:s,getItemUrl:l,onRenderRow:o,onItemSelected:d,searchBoxRef:m,sx:h}){var f;let g,{excludeDirectories:b,excludeSeeAllResults:C}=i,{query:T,setQuery:P}=(0,v.JS)(),O=(0,y.t)(),F=u.useRef(null),D=m??F,[$,W]=u.useState(T.length>0),[V,z]=u.useState(!!T),{list:H,directories:K,loading:Q,error:J}=(0,p.o)(r,$,!!b),{path:X}=(0,x.eu)(),{getUrl:Y}=(0,w.Z)(),{queryText:Z,queryLine:ee}=(g=(f=(f=T).replaceAll(" ","")).indexOf(":"))>=0?{queryText:f.substring(0,g),queryLine:parseInt(f.substring(g+1),10)}:{queryText:f,queryLine:void 0},{matches:et,clearMatches:ea}=function(e,t,a,n){let[r,i]=u.useState(),s=u.useRef(""),l=u.useRef(null),{sendStats:o}=(0,S.T)(),c=u.useRef(!1),d=u.useCallback(()=>{let e=new _.z(a,j.j);e.onmessage=({data:e})=>{c.current=!1,i(e.list),s.current=e.query,e.startTime&&o("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},l.current=e},[o,a]);return u.useEffect(()=>{if(n)return d(),function(){l.current?.terminate()}},[d,n]),u.useEffect(()=>{if(e.length&&t){c.current&&(l.current?.terminate(),d());let a=s.current&&t.startsWith(s.current);c.current=!0,l.current?.postMessage({baseList:a&&r||e,query:t,startTime:performance.now()})}},[e,t,d]),{matches:r,clearMatches:()=>i(void 0)}}((0,u.useMemo)(()=>[...H,...t??[]].sort(),[t,H]),Z,s,$),{sendRepoClickEvent:en}=(0,S.T)(),er=(0,A.Z)(),[ei,es]=u.useState(0),[el,eo]=u.useState(()=>U()),ec=u.useRef(null),ed=u.useRef(null),eu="file-results-list",{sendRepoKeyDownEvent:em}=(0,S.T)(),{screenSize:ep}=(0,N.lm)(),eh=i.enableOverlay??ep>=N.Gy.large,ef=u.useCallback(e=>{en("FILE_TREE.SEARCH_RESULT_CLICK"),d?.(e),z(!1)},[en,d]),eg=(e,t,a)=>l?l(e,t,a):Y({path:e,action:t?"tree":"blob",hash:a}),{containerRef:ey}=(0,k.G)({bindKeys:R.z0.ArrowVertical|R.z0.HomeAndEnd,focusInStrategy:"previous"},[Q,J]);u.useEffect(()=>{T||z(!1)},[T]),u.useEffect(()=>{document.activeElement!==D.current&&eh&&z(!1)},[X,D,eh]);let ev=et?.slice(0,20)||[],ex=et&&et.length>ev.length,eb=!i.disableNavigation,eC=ed.current?.getBoundingClientRect().width,eS=(0,n.jsx)(L.az,{sx:{maxHeight:eh?"180px":"100% !important",width:eh?eC:"100%"},className:"FileResultsList-module__Box--cUmDY",children:J?(0,n.jsx)(c.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,n.jsxs)(L.lF,{ref:ey,sx:{p:eh?2:3,pr:3*!!eh,pt:eh?3:"2px !important",...e},role:"listbox",className:"FileResultsList-module__ActionList--kDNEZ",children:[!Q&&ev.map((e,t)=>{let a=K.includes(e),r=eg(e,a,ee?`L${ee}`:"");return(0,n.jsx)(G,{active:!1,index:t,focused:el&&ei===t,match:e,onRender:o,query:Z,onClick:ef,isDirectory:a,to:r,useOverlay:eh,listRef:ey,noAnchor:i.disableNavigation},e)}),0===ev.length&&(0,n.jsx)("div",{role:"status",className:"text-center fgColor-muted",children:"No matches found"})]})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(L.az,{className:a,ref:ed,sx:h,children:(0,n.jsx)(B,{ariaActiveDescendant:(!eh&&T||eh&&V)&&el&&ei>-1?ex&&ei===ev.length?"see-all-results-link":`file-result-${ei}`:void 0,ariaExpanded:eh?V:void 0,ariaHasPopup:eh,ariaControls:eh?eu:void 0,ref:D,loading:Q,query:T,onKeyDown:e=>{let{key:t,shiftKey:a,metaKey:n,altKey:r,ctrlKey:i}=e;if(!a&&!n&&!r){if("Escape"===t)T?(em("FILE_TREE.CANCEL_SEARCH"),P(""),ea()):document.activeElement&&document.activeElement.blur();else if(!T)return;else if("Enter"===t){if(!C&&ex&&ei===ev.length)eb&&er((0,E.Y8Y)({owner:O.ownerLogin,repo:O.name,searchTerm:`path:${Z}`})),d?.();else if(ev[ei]){let e=ev[ei];eb&&er(eg(ev[ei],!1,ee?`L${ee}`:"")),z(!1),d?.(e)}}else if("ArrowDown"===t||i&&"n"===t){if(!C&&ex&&ei>=ev.length-1){if(es(ev.length),ec.current&&ey.current){let e=(0,I.U)(ey.current);(0,R.Rt)(ec.current,e,{behavior:"instant"})}}else es(Math.min(ei+1,ev.length-1));e.preventDefault();return}else if("ArrowUp"===t||i&&"p"===t){es(Math.max(ei-1,0)),e.preventDefault();return}}},onPreload:()=>W(!0),onSearch:e=>{P(e),e?z(!0):(ea(),z(!1)),es(0)},onBlur:e=>{ey.current?.contains(e.relatedTarget)||(z(!1),eo(!1))},onFocus:()=>{T&&z(!0),eo(!0)},searchPlaceholder:i.searchPlaceholder,className:"FileResultsList-module__FilesSearchBox--KW9Zl"})}),eh&&ev.length>0&&(0,n.jsx)(M.T,{anchorRef:ed,open:eh&&V,renderAnchor:null,onClose:()=>{z(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},align:"end",overlayProps:{id:eu,role:"dialog"},children:eS}),!eh&&T&&eS]})}let z=({active:e,focused:t,index:a,match:r,query:i,to:s,isDirectory:l,onClick:o,onRender:c,useOverlay:d,listRef:m,noAnchor:p})=>{let h=(0,O.Xq)(i,r);c?.();let f=u.useRef(null);u.useEffect(()=>{if(t&&f.current&&m?.current){let e=(0,I.U)(m.current);(0,R.Rt)(f.current,e,{behavior:"instant"})}},[t,m]);let g={};t&&(g={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"});let y={id:`file-result-${a}`,active:e,onSelect:(0,u.useCallback)(()=>{o?.(r)},[r,o]),sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...g},role:"option","data-focus-visible-added":t||void 0,tabIndex:d?-1:0},v=(0,n.jsx)("div",{className:"d-flex",children:(0,n.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,n.jsx)(Q,{text:r,positionsList:h,LeadingIcon:l?H:K,className:"FileResultsList-module__HighlightMatch--Jy_cG"})})});return p?(0,n.jsx)(L.lF.Item,{...y,children:v},r):(0,n.jsx)(L.lF.LinkItem,{...y,ref:f,as:T.N,to:s,children:v},r)},H=()=>(0,n.jsx)(P.A,{"aria-label":"Directory",icon:d.FileDirectoryFillIcon,size:"small",className:"FileResultsList-module__Octicon--PvMf4"}),K=()=>(0,n.jsx)(P.A,{"aria-label":"File",icon:d.FileIcon,className:"fgColor-muted mr-2",size:"small"}),G=u.memo(z);function Q({className:e,text:t,positionsList:a,sx:r,LeadingIcon:i}){let s=[],l=0;for(let e of a){if(Number(e)!==e||e<l||e>t.length)continue;let a=t.slice(l,e);a&&s.push(J(a)),l=e+1,s.push((0,n.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:t[e]},e))}return s.push(J(t.slice(l))),(0,n.jsx)(L.az,{className:e,sx:r,children:(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)(i,{}),s]})})}function J(e){return e.replaceAll("/","/\u200B")}try{V.displayName||(V.displayName="FileResultsList")}catch{}try{z.displayName||(z.displayName="FileResultRow")}catch{}try{H.displayName||(H.displayName="DirectoryIcon")}catch{}try{K.displayName||(K.displayName="FileResultIcon")}catch{}try{G.displayName||(G.displayName="MemoizedFileResultRow")}catch{}try{Q.displayName||(Q.displayName="HighlightMatch")}catch{}var X=a(53419);let Y=new Set(Object.values(a(23967).r4).flatMap(e=>e.extensions??[])),Z=new Set([".png",".jpg",".jpeg",".gif",".bmp",".svg",".webp",".ico",".tiff",".tif"]);function ee(e,t,a){return{id:`${a.id}${"github_folder"===t?"-folder":""}-${e}`,repositoryId:a.id,nwo:`${a.ownerLogin}/${a.name}`,filePath:e,sha:a.defaultBranch,type:t}}function et(e,t,a,n,r,i){let s=Array.from(e).filter(e=>t.has(e)),l=Array.from(e).filter(e=>!t.has(e));if(!i)return l.map(e=>ee(e,"github_file",a));let o=[],c=new Set;for(let e of s){if(s.some(t=>t!==e&&e.startsWith(`${t}/`)))continue;let t=l.filter(t=>t.startsWith(`${e}/`));if(i&&0===t.length){o.push(ee(e,"github_folder",a));continue}if(i&&t.length>=r)for(let n of(o.push(ee(e,"github_folder",a)),t))c.add(n);else for(let e of t)o.push(ee(e,"github_file",a)),c.add(e)}let d=l.filter(e=>!c.has(e));if(n&&i){let e=new Map;for(let t of d){let a=t.lastIndexOf("/"),n=a>0?t.substring(0,a):"";e.has(n)||e.set(n,[]),e.get(n)?.push(t)}for(let[t,n]of e)if(""===t)for(let e of n)o.push(ee(e,"github_file",a));else o.push(ee(t,"github_folder",a))}else for(let e of d)o.push(ee(e,"github_file",a));return o}function ea(e,t=30){return e.length<=t?e:`...${e.slice(-t)}`}function en({files:e,error:t}){if(0===e.length)return null;if(1===e.length&&e[0])return(0,n.jsxs)(n.Fragment,{children:[t?"This file can't be submitted: ":"This file was filtered out: "," ",(0,n.jsx)("strong",{children:ea(e[0])}),". Only supported file types are allowed."]});let a=e.slice(0,3),r=e.length-3;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:t?"These files can't be submitted: ":"These files were filtered out: "}),a.map((e,t)=>(0,n.jsxs)("span",{children:[t>0&&(0,n.jsx)("span",{children:", "}),(0,n.jsx)("strong",{children:ea(e)})]},e)),r>0&&(0,n.jsxs)("span",{children:[", and ",r," more"]}),(0,n.jsx)("span",{children:". Only supported file types are allowed."})]})}function er({currentRepo:e,setLocalFormData:t,fetchError:a,onFileCountChange:r,expandedPath:i,resourceCounts:s,allowFolderReferences:l,maxFileCount:o,onRejectionMessage:c,onDisplayCountChange:d,onFilteredFilesChange:m}){let[g,y]=(0,u.useState)(()=>new Set),[v,x]=(0,u.useState)(()=>new Set),b=o??50,{list:C,directories:S,loading:w}=(0,p.o)(e.commitOID,!0),[_,j]=(0,u.useState)([]);(0,u.useEffect)(()=>{j((0,h.k)({paths:C,directories:S})),x(new Set(S))},[C,S,j,e.commitOID]),(0,u.useEffect)(()=>{let a=Array.from(g).filter(e=>!v.has(e)),n=Array.from(g).filter(e=>v.has(e));r?.(a.length);let i=!1;if(l&&a.length>0){let e=n.map(e=>`${e}/`),t=a.filter(t=>!e.some(e=>t.startsWith(e))),r=t.some(e=>e.includes("/"));i=t.length>b&&r}let s=et(g,v,e,i,b,l??!1);t(s),d&&d(s.length)},[g,v,e,t,r,d,l,b]);let I=(0,u.useCallback)(t=>`/${e.name}/${e.ownerLogin}/tree/${e.refInfo.name}/${t.path}`,[e]),E=(0,u.useCallback)(t=>{let a=Array.from(t).filter(e=>!g.has(e)),n=[],r=[];for(let e of a){let t=v.has(e);!function(e,t){if(t)return!0;let a=e.lastIndexOf("."),n=e.lastIndexOf("/");if(-1===a||a<n)return!0;let r=e.substring(a).toLowerCase();return Y.has(r)&&!Z.has(r)}(e,t)?n.push(e):r.push(e)}let i=new Set;for(let e of g)t.has(e)&&i.add(e);for(let e of r)i.add(e);if(n.length>0?m?.(n):i.size<=g.size&&m?.([]),i.size<=g.size){y(i),c?.(null);return}if(!l){let e=Array.from(i).filter(e=>!v.has(e)),t=s?s.maxResourceCount-s.currentResourceCount:b;if(e.length>t){let t=s?`${s.currentResourceCount+e.length} / ${s.maxResourceCount} possible sources selected, add fewer files.`:`Up to ${b} files can be added at a time.`;c?.(t),y(i);return}c?.(null),y(i);return}let o=Array.from(i).filter(e=>!v.has(e)),d=Array.from(i).filter(e=>v.has(e)).map(e=>`${e}/`),u=o.filter(e=>!d.some(t=>e.startsWith(t))),p=u.some(e=>e.includes("/"));et(i,v,e,u.length>b&&p,b,l).length,y(i)},[g,b,v,l,c,e,s,m]);return(0,n.jsx)("div",{className:"MultiFilePicker-module__Box--gINxM",children:(0,n.jsx)(f.Rw,{rootItems:_,expandedPath:i,selectedItemRef:()=>{},setRootItems:j,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:g,onSelectionChange:E,loading:w||!1,fetchError:!!a,getItemUrl:I,allowFolderReferences:!!l,sortDirectoryItems:e=>e.sort((e,t)=>e.data.name.localeCompare(t.data.name))})})}function ei({onClose:e}){return(0,n.jsx)(r.K,{icon:d.XIcon,"aria-label":"Close",onClick:e,variant:"invisible"})}function es({formData:e,onCancel:t,onSaveFiles:a,findFileWorkerPath:p,attachmentButtonRef:h,owner:f,resourceCounts:S,initialRepo:w,onRepoSelect:_,hideBackButton:j=!1,allowFolderReferences:I=!1,maxFileCount:E=50}){let[T,N]=(0,u.useState)({}),[A,R]=(0,u.useState)(null),[k,M]=(0,u.useState)(w||null),[L,P]=(0,u.useState)(!0),[O,F]=(0,u.useState)(e),[D,$]=(0,u.useState)(!1),[W,B]=(0,u.useState)(null),[U,q]=(0,u.useState)(""),[z,H]=(0,u.useState)(null),[K,G]=(0,u.useState)(0),[Q,J]=(0,u.useState)(0),[Y,Z]=(0,u.useState)([]),ee=(0,u.useRef)(!1),et=async e=>{let t;if(ee.current=!0,T[e]){M(t=T[e]),_?.(t);return}try{t=await (0,m.V)(e),N(a=>({...a,[e]:t})),M(t),_?.(t),P(!1)}catch(e){R(e instanceof Error?e.message:"An unknown error occurred")}ee.current=!1},ea=()=>{_?.(null),M(null),F([]),P(!0)},es=void 0!==S,el=(es?Q:K)>(es?S.maxResourceCount-S.currentResourceCount:E),eo=async()=>{$(!0);try{if(el)return;(0,X.BI)("copilot-spaces.click",{target:"SAVED_FILES_FROM_FILE_PICKER"}),await a(O)}catch(t){let e={errorMessage:"An unknown error occurred",filePaths:[]};t&&"object"==typeof t&&"base"in t&&"string"==typeof t.base&&(t.base.startsWith("unsupported_file_type")&&"files"in t?e.filePaths=t.files:t.base.startsWith("The size of the space exceeds the current limit")?e.errorMessage="The size of the space exceeds the current limit":e.errorMessage=t.base),B(e)}finally{$(!1)}};(0,u.useEffect)(()=>{B(null)},[O]);let ec=el?es?`${S.currentResourceCount+Q} / ${S.maxResourceCount} possible sources selected, add fewer files.`:`Up to ${E} items can be added at a time.`:z,ed=el||!!z;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.X,{selectionVariant:"instant",open:!k&&L,onOpenChange:e=>{ee.current||(P(e),t())},selectedRepoIds:new Set,onSelectRepo:async e=>{e&&(F([]),(0,X.BI)("copilot-spaces.click",{target:"SELECTED_REPO_FROM_REPO_PICKER"}),await et(e))},cancelReturnFocusRef:h,submitReturnFocusRef:h,error:A??void 0,ownerDisplayLogin:f,includeForks:!0}),k&&(0,n.jsx)(i.l,{onClose:t,title:`Add files from ${k.ownerLogin}/${k.name}`,width:"large",position:{narrow:"fullscreen"},renderHeader:({onClose:e,dialogLabelId:t})=>(0,n.jsxs)(i.l.Header,{children:[(0,n.jsx)("div",{className:"MultiFilePicker-module__dialogHeader--CApsB",children:(0,n.jsx)(i.l.Title,{id:t,children:(0,n.jsxs)(s.B,{align:"center",direction:"horizontal",gap:"none",children:[!j&&(0,n.jsx)(s.B.Item,{children:(0,n.jsx)(r.K,{icon:d.ArrowLeftIcon,"aria-label":"Back",onClick:ea,variant:"invisible"})}),(0,n.jsxs)(s.B.Item,{grow:!0,className:"mx-1",children:["Select folders and files in ",k.ownerLogin,"/",k.name]}),(0,n.jsx)(s.B.Item,{children:(0,n.jsx)(ei,{onClose:()=>e("close-button")})})]})})}),(0,n.jsx)(i.l.Subtitle,{className:"mt-0",children:(0,n.jsx)(y.d,{repository:k,children:(0,n.jsx)(v.Ck,{children:(0,n.jsx)(x.qV,{refInfo:{name:k.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:k.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,n.jsx)(b.$,{allShortcutsEnabled:!1,children:(0,n.jsx)(V,{commitOid:k.commitOID,findFileWorkerPath:p,onItemSelected:e=>{e&&q(e)},config:{enableOverlay:!0,disableNavigation:!0,searchPlaceholder:"Search for files or folders",actionText:"Search for files or folders"}})})})})})})]}),renderFooter:()=>(0,n.jsx)(i.l.Footer,{children:(0,n.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center width-full",children:[(0,n.jsx)("div",{className:"d-flex flex-items-center",children:ec&&(0,n.jsx)(l.A.Validation,{variant:"error",children:ec})}),(0,n.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,n.jsx)(o.Q,{onClick:t,children:"Cancel"}),(0,n.jsx)(o.Q,{...(0,C.G)("save-resource-button"),variant:"primary",onClick:eo,count:D?void 0:(es?Q:K)||void 0,loading:D,disabled:ed,children:"Add"})]})]})}),renderBody:()=>(0,n.jsxs)("div",{className:"d-flex flex-column",children:[A&&(0,n.jsx)("span",{children:A}),W&&(0,n.jsx)("div",{className:"position-sticky top-0 bgColor-default flash-banner",children:(0,n.jsx)(c.A,{full:!0,variant:"danger",children:W.filePaths.length>0?(0,n.jsx)(en,{files:W.filePaths,error:!0}):(0,n.jsx)("span",{children:W.errorMessage})})}),Y.length>0&&(0,n.jsx)("div",{className:"position-sticky top-0 bgColor-default flash-banner",children:(0,n.jsx)(c.A,{full:!0,variant:"warning",children:(0,n.jsx)(en,{files:Y})})}),(0,n.jsx)(y.d,{repository:k,children:(0,n.jsx)(v.Ck,{children:(0,n.jsx)(x.qV,{refInfo:{name:k.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:k.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,n.jsx)(er,{expandedPath:U,currentRepo:k,localFormData:O,setLocalFormData:F,onFileCountChange:J,onDisplayCountChange:G,fetchError:A,resourceCounts:S,allowFolderReferences:I,maxFileCount:E,onRejectionMessage:H,onFilteredFilesChange:Z})})})})]}),className:"MultiFilePicker-module__Dialog--ls9MF"})]})}try{en.displayName||(en.displayName="FilteredFilesWarning")}catch{}try{er.displayName||(er.displayName="FilePickerForm")}catch{}try{ei.displayName||(ei.displayName="CloseButton")}catch{}try{es.displayName||(es.displayName="MultiFilePicker")}catch{}},60905:(e,t,a)=>{a.d(t,{s:()=>CopilotImageAttacher});var n=a(50467),r=a(53419),i=a(25641),s=a(35247),l=a(76166),o=a(30456);let c=["image/gif","image/jpeg","image/png","image/webp"];let CopilotImageAttacher=class CopilotImageAttacher{static getAllowedImageFileExtensions(e){return this.getFileExtensions(e).join(",")}static isTypeAllowed(e,t){return e=e.toLowerCase(),this.getMimeTypes(t).includes(e)}static getAllowedFiles(e,t){let[a,n]=e.reduce(([e,a],n)=>this.isTypeAllowed(n.type,t)?[[...e,n],a]:[e,[...a,n]],[[],[]]);return[a,n]}static getAttachmentLimit(){return s.W.attachMultipleImages?4:1}static getAttachmentSizeLimit(){return 3932160}static makeImageReference(e,t){let a=crypto.randomUUID(),n=new o.N(a,e,t);return{id:a,attachment:n,type:"image",name:e.name||"Image"}}static getFileExtensions(e){if(Array.isArray(e))return Array.from(new Set(e.flatMap(e=>this.getFileExtensions(e))));let t=this.getMimeTypes(e).map(e=>`.${e.split("/")[1]}`);return t.includes(".jpeg")&&t.push(".jpg"),t}static getMimeTypes(e){return Array.isArray(e)?Array.from(new Set(e.flatMap(e=>this.getMimeTypes(e)))):e.capabilities.limits.vision?e.capabilities.limits.vision.supported_media_types.filter(e=>c.includes(e)):[]}async addImageAttachments(e,t="unknown"){if(0===e.length)return[];if(s.W.previewFeaturesVisionGate&&this.state.hasCEorCBAccess&&!this.state.optedInToPreviewFeatures)return this.manager.addAmbientError("Copilot in GitHub.com preview features must be enabled to upload images. Please request access from your administrator and try again."),(0,l.d)("preview_features_not_enabled"),[];let a=this.state.currentReferences.filter(e=>"image"===e.type).length,n=CopilotImageAttacher.getAttachmentLimit();if(a+e.length>n){let e=s.W.attachMultipleImages?`You can add up to ${n} image files per message.`:"Only one image can be uploaded at a time";return this.manager.addAmbientError(e),(0,l.d)("file_limit_reached"),[]}let o=[],c=[];for(let a of e){if(!CopilotImageAttacher.isTypeAllowed(a.type,this.state.model))return(0,l.d)("included_unsupported_file",{fileTypes:a.type,uploadType:t}),[];if(a.size>CopilotImageAttacher.getAttachmentSizeLimit())return this.manager.addAmbientError("Only images below 3.75MB are supported"),(0,l.d)("size_limit_exceeded",{size:a.size}),[];let e=CopilotImageAttacher.makeImageReference(a,this.state.selectedThreadID);if(this.state.model.id.startsWith("claude")&&this.state.model.capabilities.supports.vision){let t=await e.attachment.getDimensions();if(t.width&&t.height&&(t.width>8e3||t.height>8e3)){this.manager.addAmbientError("The image you uploaded exceeds the maximum allowed dimensions for Claude models. Please try again with another model."),(0,l.d)("dimension_limit_exceeded",{width:t.width,height:t.height});continue}}let n=(0,i.Vc)(a.name);this.manager.addReference(n,"image-attacher"),0===c.length&&this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"file-upload"}),c.push({file:a,placeholder:n,reference:e})}try{c.forEach(({file:e,placeholder:a,reference:n})=>{try{this.manager.setImageAttachmentUploaded(n.id,n.attachment),this.manager.replaceReference(a,n),(0,r.BI)("dotcom_chat.vision.image_added",{uploadType:t}),o.push(n)}catch(n){this.manager.removeReference(a);let t="An unexpected error occurred while reading the file";if("string"==typeof n)throw this.manager.addAmbientError(`An error occurred uploading the attachment ${e.name}`),(0,l.d)("ErrorString",{message:n}),Error(n);if(n instanceof Error)if((0,l.d)(n.name,{message:n.message}),"GenericServerError"===n.name&&n.message.includes("Error creating policy"))this.manager.addAmbientError(t);else throw this.manager.addAmbientError(t),n;else throw this.manager.addAmbientError(t),n}})}finally{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}return o}constructor(e,t){(0,n._)(this,"state",void 0),(0,n._)(this,"manager",void 0),this.state=e,this.manager=t}}},61180:(e,t,a)=>{a.d(t,{T:()=>s});var n=a(16522),r=a(96540),i=a(79064);function s(){let e,t,a=(0,n.c)(3),[s,o]=(0,r.useState)(l);a[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{o(e),e&&i.Jt.setLastUsedRepository(e)},a[0]=e):e=a[0];let c=e;return a[1]!==s?(t=[s,c],a[1]=s,a[2]=t):t=a[2],t}function l(){return i.Jt.getLastUsedRepository()}},69093:(e,t,a)=>{a.d(t,{j:()=>o});var n=a(16522),r=a(38621),i=a(47789),s=a(51213),l=a(35247);function o(e){let t,a,o,h=(0,n.c)(8),{enabled:f}=e,g=(0,i.qw)();if(h[0]!==f||h[1]!==g){e:{let e=[];if(!f){t=e;break e}for(let t of g)t.slashCommand&&e.push({key:t.slashCommand.key,name:t.slashCommand.name,description:t.slashCommand.description,icon:t.slashCommand.icon,isNew:t.slashCommand.isNew,order:t.slashCommand.order,suggestions:t.slashCommand.suggestions,enabled:t.slashCommand.enabled,disabledAction:t.slashCommand.disabledAction,customModelPicker:t.slashCommand.customModelPicker,execute:async(e,a,n)=>await t.slashCommand.execute(e,a,n),mode:t.slashCommand.mode});l.W.planningAgent&&e.push({key:"brainstorm",name:"Brainstorm",description:"Create a plan and turn them into tasks",icon:r.TasklistIcon,suggestions:[],execute:p}),l.W.askModeDropdown&&e.push({key:"ask",name:"Ask",description:"Get an answer to a question",icon:r.CommentIcon,order:0,suggestions:[],execute:m,mode:{name:s.II.Ask,icon:r.CommentIcon,supportsMCP:!0,supportsAttachments:!0,supportsModelSwitching:!0,supportsSpaces:!0,supportsAutocompletion:!0}}),e.push({key:"create-issue",name:"Create issue",description:"Create a GitHub issue from your conversation",icon:r.IssueDraftIcon,suggestions:["First, create a new draft issue. Then ask for additional information to fill out the issue.","First, create an issue with sub issues. Then ask for additional information to fill out these issues."],execute:u}),t=e.sort(d)}h[0]=f,h[1]=g,h[2]=t}else t=h[2];let y=t;return h[3]!==y?(a=y.map(c),h[3]=y,h[4]=a):a=h[4],h[5]!==y||h[6]!==a?(o={availableCommands:y,availableCommandKeys:a},h[5]=y,h[6]=a,h[7]=o):o=h[7],o}function c(e){return e.key}function d(e,t){return void 0!==e.order&&void 0!==t.order?e.order-t.order:void 0!==e.order?-1:void 0!==t.order?1:e.name.localeCompare(t.name)}function u(){return!1}function m(){return!1}function p(e,t,a,n){return n.setUsePlanningIntent(!0),!1}},71363:(e,t,a)=>{a.d(t,{F:()=>C,X:()=>_});var n=a(74848),r=a(16522),i=a(70170),s=a(53419),l=a(29731),o=a(5524),c=a(70119),d=a(34164),u=a(96540),m=a(40961),p=a(26408),h=a(25641),f=a(2635),g=a(33592);let y=e=>{let t,a,i,s=(0,r.c)(6),{children:l,delay:o,assertive:c}=e,d=void 0===o?500:o,[m,p]=(0,u.useState)(!1);if(s[0]!==d?(t=()=>{p(!1);let e=setTimeout(()=>p(!0),d);return()=>clearTimeout(e)},a=[d,p],s[0]=d,s[1]=t,s[2]=a):(t=s[1],a=s[2]),(0,u.useEffect)(t,a),!m)return null;let h=void 0!==c&&c?"assertive":"polite";return s[3]!==l||s[4]!==h?(i=(0,n.jsx)("div",{role:"alert","aria-live":h,"aria-atomic":"true",children:l}),s[3]=l,s[4]=h,s[5]=i):i=s[5],i};try{y.displayName||(y.displayName="DelayedComponent")}catch{}var v=a(35673);let x="RepoSelectPanel-module__ActionList--ud9yE";var b=a(27844);function C(e){let t,a,i,l,o=(0,r.c)(12),{currentReferences:c}=(0,f.Pk)(),d=(0,g.b)();o[0]!==c?(a=new Set((t=c.filter(w)).map(S)),o[0]=c,o[1]=t,o[2]=a):(t=o[1],a=o[2]);let m=a,[p,y]=(0,u.useState)();o[3]!==d||o[4]!==e||o[5]!==t?(i=async a=>{y(void 0);let n=t.find(e=>e.id===a);if(n){d.removeReference(n),(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",action:"removed",component:"ATTACHMENT_MENU",mode:"immersive"});return}let r=await d.service.fetchRepo(a);if(!r.ok){y("Error: failed to attach repository. Please try again."),e.onOpenChange(!0);return}e.onRepoSelect?.(r.payload);let i=(0,h.qS)(r.payload);d.addReference(i,"repoMenu"),(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",action:"selected",component:"ATTACHMENT_MENU",mode:"immersive"})},o[3]=d,o[4]=e,o[5]=t,o[6]=i):i=o[6];let v=i;return o[7]!==p||o[8]!==e||o[9]!==m||o[10]!==v?(l=(0,n.jsx)(_,{...e,selectionVariant:"multiple",selectedRepoIds:m,onSelectRepo:v,description:"Choose repositories to chat about.",error:p}),o[7]=p,o[8]=e,o[9]=m,o[10]=v,o[11]=l):l=o[11],l}function S(e){return e.id}function w(e){return"repository"===e.type}function _(e){let t,a,h,g,C,S,w,_,I,E,T,N,A,R,k,M,L,P,O,F=(0,r.c)(49),{open:D,onOpenChange:$,submitReturnFocusRef:W,cancelReturnFocusRef:B,selectedRepoIds:U,featuredRepoIds:q,onSelectRepo:V,selectionVariant:z,description:H,error:K,ownerDisplayLogin:G,includeForks:Q,anchorRef:J}=e,X=void 0===q?U:q,{ssoOrganizations:Y}=(0,f.Pk)(),[Z,ee]=(0,u.useState)("");F[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.s)(e=>ee(e),150,{start:!1}),F[0]=t):t=F[0];let et=t;F[1]!==D?(a=()=>{D||ee("")},h=[D],F[1]=D,F[2]=a,F[3]=h):(a=F[2],h=F[3]),(0,u.useEffect)(a,h);let{repositories:ea,loading:en}=(0,p.U)(Z,D,void 0,G,void 0!==Q&&Q);e:{if(en){g="Loading repositories";break e}if(0===ea.length){g="No repositories found";break e}if(1===ea.length){g="1 repository found";break e}g=`${ea.length} repositories found`}let er=g;F[4]===Symbol.for("react.memo_cache_sentinel")?(C=e=>{et(e.currentTarget.value)},F[4]=C):C=F[4];let ei=C;t:{let e;if(!Y){let e;F[5]===Symbol.for("react.memo_cache_sentinel")?(e=[],F[5]=e):e=F[5],S=e;break t}F[6]!==Y?(e=Y.map(j),F[6]=Y,F[7]=e):e=F[7],S=e}let es=S;F[8]!==X?(w=e=>X.has(e.databaseId)?"featuredRepos":"nonFeaturedRepos",F[8]=X,F[9]=w):w=F[9];let{featuredRepos:el,nonFeaturedRepos:eo}=function(e,t){let a={};for(let n of e){let e=t(n);a[e]??(a[e]=[]),a[e].push(n)}return a}(ea,w),[ec,ed]=(0,u.useState)(!1);F[10]!==V?(_=async e=>{ed(!0),await V(e),ed(!1)},F[10]=V,F[11]=_):_=F[11];let eu=_;F[12]===Symbol.for("react.memo_cache_sentinel")?(I=(0,l.G)("repo-select-panel"),F[12]=I):I=F[12];let em=c.X,ep=J&&"RepoSelectPanel-module__CopilotRepoSelectPanelAnchored--mTBrm";F[13]!==ep?(E=(0,d.$)(ep),F[13]=ep,F[14]=E):E=F[14],F[15]!==B||F[16]!==$?(T=()=>{(0,m.flushSync)(()=>$(!1)),B.current?.focus(),(0,s.BI)("dotcom_chat.activate",{target:"REPOSITORY_DIALOG_CLOSE",mode:"immersive"})},F[15]=B,F[16]=$,F[17]=T):T=F[17],F[18]!==$||F[19]!==W?(N=()=>{(0,m.flushSync)(()=>$(!1)),W.current?.focus()},F[18]=$,F[19]=W,F[20]=N):N=F[20];let eh=J?"anchored":"modal",ef="multiple"===z?"Select repositories":"Select a repository",eg=es.length>0&&"border-bottom-0";F[21]!==eg?(A=(0,d.$)(eg),F[21]=eg,F[22]=A):A=F[22];let ey=!0===en||ec;F[23]!==ey?(R=(0,n.jsx)(c.X.SearchInput,{loading:ey,onChange:ei,placeholder:"Search repositories","aria-label":"Search repositories"}),F[23]=ey,F[24]=R):R=F[24],F[25]!==A||F[26]!==R?(k=(0,n.jsx)(c.X.Header,{className:A,children:R}),F[25]=A,F[26]=R,F[27]=k):k=F[27],F[28]===Symbol.for("react.memo_cache_sentinel")?(M=(0,n.jsx)(v.hl,{}),F[28]=M):M=F[28],F[29]!==K?(L=K&&(0,n.jsx)(c.X.Message,{variant:"error",size:"inline",children:K}),F[29]=K,F[30]=L):L=F[30];let ev="initial"===en?(0,n.jsxs)("div",{className:x,children:[(0,n.jsx)("div",{className:"sr-only",children:er}),(0,n.jsx)(c.X.Loading,{children:"Fetching repositories\u2026"})]}):0!==ea.length||en?(0,n.jsxs)(o.l,{className:x,children:[(0,n.jsx)("div",{className:"sr-only",children:er}),el?.map(e=>(0,n.jsx)(b.W,{repo:e,onSelect:eu,selected:U.has(e.databaseId)},e.databaseId)),el&&eo&&(0,n.jsx)(o.l.Divider,{}),eo?.map(e=>(0,n.jsx)(b.W,{repo:e,onSelect:eu,selected:U.has(e.databaseId)},e.databaseId))]}):(0,n.jsxs)("div",{className:x,children:[(0,n.jsx)("div",{className:"sr-only",children:er}),(0,n.jsx)("div",{className:"RepoSelectPanel-module__emptyStateMessage--qQwDm",children:(0,n.jsx)(y,{delay:750,children:(0,n.jsx)(c.X.Message,{variant:"empty",title:"No repositories found",children:"Try a different search term"})})})]});return F[31]!==em||F[32]!==J||F[33]!==H||F[34]!==D||F[35]!==z||F[36]!==E||F[37]!==T||F[38]!==N||F[39]!==eh||F[40]!==ef||F[41]!==k||F[42]!==M||F[43]!==L||F[44]!==ev?(P=(0,n.jsxs)(em,{className:E,width:"large",maxHeight:"xlarge",onCancel:T,onSubmit:N,open:D,variant:eh,selectionVariant:z,title:ef,description:H,anchorRef:J,children:[k,M,L,ev]}),F[31]=em,F[32]=J,F[33]=H,F[34]=D,F[35]=z,F[36]=E,F[37]=T,F[38]=N,F[39]=eh,F[40]=ef,F[41]=k,F[42]=M,F[43]=L,F[44]=ev,F[45]=P):P=F[45],F[46]!==I||F[47]!==P?(O=(0,n.jsx)("div",{...I,children:P}),F[46]=I,F[47]=P,F[48]=O):O=F[48],O}function j(e){return e.login}try{C.displayName||(C.displayName="RepoReferencesSelectPanel")}catch{}try{_.displayName||(_.displayName="RepoSelectPanel")}catch{}},72439:(e,t,a)=>{a.d(t,{E:()=>CopilotTextAttacher,x:()=>l});var n=a(50467),r=a(53419),i=a(25641),s=a(23967);let l="application/x.clipboard",o=/^\s*`?([\w-_]{3,40}\.\w{1,10})`?\s*$/;let CopilotTextAttacher=class CopilotTextAttacher{static async isAttachable(e){if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return!1;let t=await e.text();return CopilotTextAttacher.isPlainText(t)}static getTextFileExtensions(){return CopilotTextAttacher.fileExtensionsCache??(CopilotTextAttacher.fileExtensionsCache=Object.values(s.r4).flatMap(e=>e.extensions??[]).filter(e=>"stl"!==e).join(","))}static getAttachmentSizeLimit(){return 512e3}static isPlainText(e){let t=Math.min(e.length,1e3),a=0,n=0;for(let r=0;r<t;r++){let t=e.charCodeAt(r);0===t?a++:t>127&&n++}let r=a/t,i=n/t;return r<=.1&&i<=.2}async makeReference(e,t){let a=await e.text(),n=e.name||(t?await t:await this.generateFileName(a,e.type));return this.makeReferenceSync(a,n)}makeReferenceSync(e,t){let a=t.split(".").pop();return(0,r.BI)("copilot.attach_pasted_file",{extension:a,characters:e.length}),{type:"thread-scoped-file",name:t,text:e,language:""}}async addAttachment(e,t,a){let n;if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return void this.manager.addAmbientError("Attached text files must be smaller than 500KB");let r=await e.text();if(!CopilotTextAttacher.isPlainText(r))return void this.manager.addAmbientError(`"${e.name}" has an unsupported file type. Please try again with a plain text file`);if(a)n=this.makeReferenceSync(r,a),this.manager.addReference(n,"text-attacher");else{let a=(0,i.Vc)(e.name);this.manager.addReference(a,"text-attacher"),this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"file-upload"});try{n=await this.makeReference(e,t),this.manager.replaceReference(a,n)}catch{this.manager.addAmbientError("Failed to process file. Please try again."),this.manager.removeReference(a)}finally{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}}return n}async generateFileName(e,t){let a=this.existingFileNames.size>0?`

Follow the naming formats used by these existing files: ${Array.from(this.existingFileNames).slice(0,5).join(", ")}`:"",n=await this.manager.service.getSimpleCompletion(`Return a suitable filename for the following file contents.
      Follow the file naming conventions of the language and do not include any special characters except for period, underscore or hyphens.
      Try to limit the name to 20 characters or less.
      You MUST include the file extension. Include only the filename in your response and nothing else.${a}

File contents:
\`\`\`
${e}
\`\`\`
`),i=n.ok?o.exec(n.payload)?.[1]:null;return i?(0,r.BI)("copilot.generate_pasted_file_name.success"):(0,r.BI)("copilot.generate_pasted_file_name.failure"),this.uniqueFileName(i??this.defaultFileName(t))}uniqueFileName(e){if(!this.existingFileNames.has(e))return e;let t=e.lastIndexOf("."),a=t>0&&t<e.length-1,n=a?e.substring(0,t):e,r=a?e.substring(t):"",i=2;for(;this.existingFileNames.has(`${n}${i}${r}`);)i++;return`${n}${i}${r}`}defaultFileName(e){return e===l?"pasted.txt":"untitled.txt"}constructor(e,t=new Set){(0,n._)(this,"manager",void 0),(0,n._)(this,"existingFileNames",void 0),this.manager=e,this.existingFileNames=t}};(0,n._)(CopilotTextAttacher,"fileExtensionsCache",void 0)},73017:(e,t,a)=>{a.d(t,{$6:()=>o,JR:()=>s,Jg:()=>d,vb:()=>i});var n=a(74848),r=a(12683);let i=u(r.az),s=u(r.EY),l=({ref:e,...t})=>(0,n.jsx)("div",{...t,ref:e});l.displayName="Div";let o=u(l),c=({ref:e,...t})=>(0,n.jsx)("bdi",{...t,ref:e});c.displayName="Bdi";let d=u(c);function u(e){let t=({html:t,...a})=>(0,n.jsx)(e,{...a,dangerouslySetInnerHTML:t?{__html:t}:void 0});return t.displayName=`SafeHTML${e.displayName||e.name}`,t}try{i.displayName||(i.displayName="VerifiedHTMLBox")}catch{}try{s.displayName||(s.displayName="VerifiedHTMLText")}catch{}try{o.displayName||(o.displayName="VerifiedHTMLDiv")}catch{}try{d.displayName||(d.displayName="VerifiedHTMLBdi")}catch{}},76143:(e,t,a)=>{a.d(t,{D:()=>i,Y:()=>s});var n=a(4559),r=a(71315);function i(e){if(!r.XC)return;let t=r.XC.querySelector("title"),a=r.XC.createElement("title");a.textContent=e,t?t.textContent!==e&&(t.replaceWith(a),(0,n.i)(e)):(r.XC.head.appendChild(a),(0,n.i)(e))}function s(e){return document.body.classList.contains("logged-out")?`${e} \xb7 GitHub`:e}},76166:(e,t,a)=>{a.d(t,{d:()=>r});var n=a(53419);function r(e,t){(0,n.BI)("dotcom_chat.vision.error",{type:e,...t})}},76872:(e,t,a)=>{a.d(t,{D:()=>b});var n=a(74848),r=a(23657),i=a(44956),s=a(84646),l=a(51563),o=a(53419),c=a(20263),d=a(96459),u=a(31021),m=a(57387),p=a(11680),h=a(46251),f=a(86877),g=a(30093),y=a(96540),v=a(79064),x=a(6236);function b({dialogTitle:e="New Space",closeDialog:t,initialSpace:a,onSubmit:b,returnFocusRef:C}){let S=(0,d.Z)(),w=(0,y.useRef)(null),_=(0,s.AV)(),[j,I]=(0,y.useState)(a?.name??_),[E,T]=(0,y.useState)(null),[N,A]=(0,y.useState)({}),[R,k]=(0,y.useState)(!1),{upsertCopilotSpace:M,isPending:L}=(0,l.$)(),P=(0,u.S)(),O=(0,y.useCallback)(e=>{k(!1);let t={...N};for(let a of e)t[a]&&delete t[a];A(t)},[N]),F=(0,y.useCallback)(e=>T(e),[]);(0,y.useEffect)(()=>{(0,o.BI)("copilot_spaces.create_space_v3_dialog_opened",{})},[]),(0,y.useEffect)(()=>{w.current?.focus()},[N.name,N.slug]),(0,y.useEffect)(()=>{a?w.current?.focus():w.current?.select()},[a]);let D=async()=>{if(L)return;let e=a?.resources?[...a.resources]:[],i=[];if(a&&E){let t=function(e,t){let a=[],n=[];if("Organization"!==t.type||t.allowsPrivateReposFromOtherOrgs)return{resourcesToSave:e,resourcesThatWillNotTransfer:[]};for(let r of e)"ownerId"in r&&"private"in r&&r.private&&r.ownerId!==t.id?n.push(r):a.push(r);return{resourcesToSave:a,resourcesThatWillNotTransfer:n}}(a.resources||[],E);e=t.resourcesToSave,i=t.resourcesThatWillNotTransfer}let s=!0;if(i.length>0){let e=new Intl.ListFormat().format(Array.from(new Set(i.map(e=>e.ownerLogin).filter(e=>void 0!==e)))),t=`Private resources owned by <strong>${e}</strong> will not be duplicated to the new space.`;s=await P({title:"Some resources will not be duplicated",content:(0,n.jsx)(c.BC,{html:t}),cancelButtonContent:"Never mind",confirmButtonContent:"Continue",confirmButtonType:"primary"})}if(s)try{let n=await M({name:j,ownerId:E?.id,ownerType:E?.type,resources:e,generalInstructions:a?.generalInstructions});A({}),k(!1),t(),b?.(),v.Jt.setLastSelectedSpace(n);let i=(0,r.Cb)(n);return S(i)}catch(e){e&&"object"==typeof e&&Object.keys(e).length>0?(k(!1),A(e)):(A({}),k(!0))}},$=()=>{t(),setTimeout(()=>C?.current?.focus(),0)};return(0,n.jsx)(m.l,{position:{narrow:"fullscreen"},title:e,onClose:$,width:"large","aria-label":e,className:"CreateSpaceDialog-module__createSpaceDialog--YECfV",renderFooter:()=>(0,n.jsx)(i.m,{onCancel:$,onSave:D,isLoading:L,disabled:!E,saveButtonText:"Create Space"}),children:(0,n.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),await D()},children:[R&&(0,n.jsx)(p.l,{className:"mb-3",variant:"critical",title:"Error saving space",hideTitle:!0,description:"Something went wrong while saving."}),(0,n.jsxs)(h.B,{children:[(0,n.jsxs)(f.A,{children:[(0,n.jsx)(f.A.Label,{required:!0,children:"Space name"}),(0,n.jsx)(g.A,{ref:w,autoFocus:!0,block:!0,"data-testid":"copilot-space-name-input",name:"copilot-space-name",value:j,onChange:e=>{I(e.target.value),O(["name","slug"])}}),(0,n.jsx)(f.A.Caption,{children:"Choose a name that describes your project or use case"}),N.name?(0,n.jsx)(f.A.Validation,{variant:"error",children:(0,n.jsxs)("span",{children:["Name ",N.name]})}):N.slug?(0,n.jsx)(f.A.Validation,{variant:"error",children:(0,n.jsx)("span",{children:r.j0})}):null]}),(0,n.jsx)(x.E,{onSelect:F})]})]})})}try{b.displayName||(b.displayName="CreateSpaceDialog")}catch{}},77430:(e,t,a)=>{a.d(t,{r:()=>l});var n=a(74848),r=a(71315),i=a(12683),s=a(96540);let l=(0,s.forwardRef)(function({src:e,size:t=20,sx:a,...l},o){let c=(0,s.useMemo)(()=>{let a=new URL(e,r.fV.origin);return a.searchParams.has("size")||a.searchParams.has("s")||a.searchParams.set("size",String(2*Number(t))),a.toString()},[e,t]);return(0,n.jsx)(i.eu,{src:c,size:t,"data-testid":"github-avatar",sx:a,...l,ref:o})});try{l.displayName||(l.displayName="GitHubAvatar")}catch{}},79216:(e,t,a)=>{a.d(t,{Q:()=>s});let n=/^@(?<repo>[\w-.]+\/[\w-.]+)(?:\/(?<type>\w+)\/(?<id>.+))?$/,r=/^@(?<id>[a-zA-Z0-9_.-]+)$/,i={fromUrlType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"blob":case"tree":return"file";case void 0:return"repository"}},fromMentionType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"files":return"file";case void 0:return"repository"}}},s={fromUrl(e){let t;try{t=new URL(e)}catch{return}if(t.hostname!==window.location.hostname)return;let[,a,n,r,...s]=t.pathname.split("/"),l=s.join("/"),o=i.fromUrlType(r);if(a&&n&&o)return{repo:`${a}/${n}`,type:l?o:"repository",id:l}},stringify(e){switch(e.type){case"issue":return`@${e.repo}/issues/${e.id??""}`;case"pull-request":return`@${e.repo}/pull/${e.id??""}`;case"discussion":return`@${e.repo}/discussions/${e.id??""}`;case"repository":return`@${e.repo}`;case"file":return`@${e.repo}/files/${e.id??""}`;case"thread-scoped-file":return`@${e.id??""}`}},parse(e){let t=n.exec(e)?.groups;if(!t){let t=r.exec(e)?.groups;return t?{repo:"",type:"thread-scoped-file",id:t.id}:void 0}let a=i.fromMentionType(t.type);return a?{repo:t.repo,type:a,id:t.id}:void 0},isEqual:(e,t)=>s.stringify(e)===s.stringify(t),refersTo(e,t){let a=s.for(t);return null!==a&&s.isEqual(e,a)},for:e=>{switch(e.type){case"repository":return{type:"repository",repo:`${e.ownerLogin}/${e.name}`,reference:e};case"issue":return{type:"issue",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"pull-request":return{type:"pull-request",repo:`${e.repository.ownerLogin}/${e.repository.name}`,id:e.number.toString(),reference:e};case"discussion":return{type:"discussion",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"file":case"folder":return{type:"file",repo:`${e.repoOwner}/${e.repoName}`,id:e.path,reference:e};case"thread-scoped-file":return{type:"thread-scoped-file",repo:"",id:e.name,reference:e};default:return null}}}},81829:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(74848),r=a(16522),i=a(71315),s=a(69726),l=a(96540);function o(e){e.preventDefault(),e.stopPropagation()}function c(e){return e instanceof DragEvent}let d=e=>{let t,a,i,s,l,o,c,d,u,m,p,h,f,g,y,v,x=(0,r.c)(17);return x[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),a=(0,n.jsx)("path",{fill:"var(--bgColor-open-muted)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),i=(0,n.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"m55.29 10.822.802-.293a1.46 1.46 0 0 1 1.116.049l15.73 7.335c.35.163.62.459.753.822l.294.804 18.458 50.715a8.75 8.75 0 0 1-5.23 11.217l-37.008 13.47a8.75 8.75 0 0 1-11.218-5.23L18.533 33.512a8.75 8.75 0 0 1 5.231-11.217zm.997 2.74L24.762 25.038a5.835 5.835 0 0 0-3.487 7.478l20.454 56.198a5.835 5.835 0 0 0 7.478 3.487l37.008-13.47a5.835 5.835 0 0 0 3.487-7.478L71.243 20.537l-5.482 1.996a5.82 5.82 0 0 1-4.461-.195 5.82 5.82 0 0 1-3.017-3.293z",clipRule:"evenodd",opacity:"0.12"}),x[0]=t,x[1]=a,x[2]=i):(t=x[0],a=x[1],i=x[2]),x[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)("g",{clipPath:"url(#clip0_12526_110155)",children:(0,n.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"M64.035 44.691c-.703 2.448-1.974 5.334-3.06 7.703-.93 2.029-1.94 3.575-2.932 4.66a5.46 5.46 0 0 1 .165 4.949c-.376.806-1.116 1.478-1.841 2.006-.754.549-1.631 1.04-2.446 1.445a31 31 0 0 1-3.066 1.318l-.053.02-.015.004-.004.002h-.002a1.095 1.095 0 0 1-1.388-.647v-.002l-.002-.004-.006-.015-.02-.053-.07-.196a30.973 30.973 0 0 1-.89-2.999c-.214-.885-.402-1.872-.466-2.803-.062-.895-.022-1.894.354-2.7a5.46 5.46 0 0 1 3.883-3.052c.178-1.474.697-3.268 1.635-5.314 1.092-2.383 2.494-5.198 3.94-7.294.718-1.039 1.498-1.978 2.313-2.587.804-.603 1.896-1.056 3.022-.53 1.134.53 1.46 1.673 1.497 2.667.037 1.011-.2 2.208-.548 3.422m-9.653 9.647a5.5 5.5 0 0 1 2.228 1.035c.515-.598 1.067-1.388 1.623-2.394l-3.1-1.445c-.397 1.08-.635 2.02-.751 2.804m7.55-10.25c-.61 2.121-1.702 4.662-2.733 6.928l-3.212-1.498c1.049-2.259 2.309-4.736 3.565-6.556.672-.973 1.292-1.682 1.823-2.08.541-.404.74-.318.783-.297h.003c.026.012.21.096.235.764.024.663-.136 1.594-.464 2.739m-8.986 19.408c-.682.34-1.342.627-1.862.84a29 29 0 0 1-.553-1.966c-.198-.823-.357-1.68-.41-2.441-.054-.796.02-1.336.155-1.625a3.282 3.282 0 1 1 5.949 2.774c-.135.29-.5.693-1.146 1.162-.617.45-1.375.878-2.133 1.256",clipRule:"evenodd"})}),l=(0,n.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),o=(0,n.jsx)("path",{fill:"var(--bgColor-sponsors-muted)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),c=(0,n.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"m197.568 19.003.803.292c.363.132.659.404.823.754l7.335 15.73c.163.35.181.751.049 1.114l-.293.805-18.458 50.715a8.75 8.75 0 0 1-11.217 5.23l-37.008-13.47a8.75 8.75 0 0 1-5.231-11.217l20.454-56.197a8.75 8.75 0 0 1 11.217-5.23zm-.998 2.741L165.045 10.27a5.836 5.836 0 0 0-7.479 3.487l-20.454 56.197a5.834 5.834 0 0 0 3.487 7.478l37.008 13.47a5.836 5.836 0 0 0 7.479-3.487L203.544 36.7l-5.483-1.995a5.82 5.82 0 0 1-3.292-3.017 5.82 5.82 0 0 1-.195-4.461z",clipRule:"evenodd",opacity:"0.12"}),x[3]=s,x[4]=l,x[5]=o,x[6]=c):(s=x[3],l=x[4],o=x[5],c=x[6]),x[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)("g",{clipPath:"url(#clip1_12526_110155)",children:(0,n.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"M179.168 44.01a2.553 2.553 0 0 1 3.393 1.235l.946 2.03a2.55 2.55 0 0 1-1.235 3.392l-16.096 7.506a2.55 2.55 0 0 1-1.259.232l-4.919-.348a1.094 1.094 0 0 1-.808-1.734l2.894-3.992c.255-.351.595-.632.988-.815zm1.41 2.16a.365.365 0 0 0-.485-.177l-2.36 1.1 1.254 2.692 2.361-1.101a.365.365 0 0 0 .176-.485zm-3.574 4.54-1.254-2.692-11.753 5.48a.36.36 0 0 0-.141.117l-1.739 2.399 2.955.209a.36.36 0 0 0 .18-.033z",clipRule:"evenodd"})}),m=(0,n.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),p=(0,n.jsx)("path",{fill:"var(--bgColor-accent-muted)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),d=(0,n.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M126.6 0h.855c.386 0 .757.154 1.031.427L140.758 12.7c.274.273.427.644.428 1.03v54.826a8.75 8.75 0 0 1-8.751 8.751H93.052a8.75 8.75 0 0 1-8.752-8.751V8.752A8.75 8.75 0 0 1 93.052 0zm0 2.917H93.052a5.835 5.835 0 0 0-5.835 5.835v59.804a5.835 5.835 0 0 0 5.835 5.834h39.383a5.834 5.834 0 0 0 5.834-5.834v-53.97h-5.834a5.82 5.82 0 0 1-4.126-1.709 5.82 5.82 0 0 1-1.709-4.125z",clipRule:"evenodd",opacity:"0.12"}),x[7]=d,x[8]=u,x[9]=m,x[10]=p):(d=x[7],u=x[8],m=x[9],p=x[10]),x[11]===Symbol.for("react.memo_cache_sentinel")?(h=(0,n.jsx)("g",{clipPath:"url(#clip2_12526_110155)",children:(0,n.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M104.354 31.356a.364.364 0 0 0-.364.365v15.315c0 .202.163.365.364.365h1.373l.042-.045 8.864-8.864c.962-.962 2.509-1 3.518-.088l4.801 4.344V31.72a.365.365 0 0 0-.365-.365zM122.587 47.4h-13.768l7.361-7.362a.365.365 0 0 1 .503-.013l6.269 5.672v1.338a.365.365 0 0 1-.365.365m2.553-.365V31.721a2.553 2.553 0 0 0-2.553-2.553h-18.233a2.553 2.553 0 0 0-2.552 2.553v15.315a2.553 2.553 0 0 0 2.552 2.553h18.233a2.553 2.553 0 0 0 2.553-2.553m-15.316-10.575a.729.729 0 1 1-1.458 0 .729.729 0 0 1 1.458 0m2.188 0a2.917 2.917 0 1 1-5.834 0 2.917 2.917 0 0 1 5.834 0",clipRule:"evenodd"})}),x[11]=h):h=x[11],x[12]===Symbol.for("react.memo_cache_sentinel")?(f=(0,n.jsx)("clipPath",{id:"clip0_12526_110155",children:(0,n.jsx)("path",{fill:"var(--bgColor-default)",d:"m41.466 45.344 21.93-7.982 7.982 21.93-21.93 7.982z"})}),x[12]=f):f=x[12],x[13]===Symbol.for("react.memo_cache_sentinel")?(g=(0,n.jsx)("clipPath",{id:"clip1_12526_110155",children:(0,n.jsx)("path",{fill:"var(--bgColor-default)",d:"m164.786 36.563 21.93 7.982-7.982 21.93-21.93-7.982z"})}),x[13]=g):g=x[13],x[14]===Symbol.for("react.memo_cache_sentinel")?(y=(0,n.jsxs)("defs",{children:[f,g,(0,n.jsx)("clipPath",{id:"clip2_12526_110155",children:(0,n.jsx)("path",{fill:"var(--bgColor-default)",d:"M101.802 27.71h23.338V51.05h-23.338z"})})]}),x[14]=y):y=x[14],x[15]!==e?(v=(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"226",height:"103",fill:"none",viewBox:"0 0 226 103",...e,children:[t,a,i,s,l,o,c,u,m,p,d,h,y]}),x[15]=e,x[16]=v):v=x[16],v};try{d.displayName||(d.displayName="DragAndDropSVG")}catch{}let u="FullScreenDragOverlay-module__text--oftCM";function m(e){let t,a,m,p=(0,r.c)(9),{onFilesDrop:h,isUploading:f}=e,g=void 0!==f&&f;p[0]!==g||p[1]!==h?(t=e=>{g||h(e)},p[0]=g,p[1]=h,p[2]=t):t=p[2];let y=t;p[3]!==y?(a={onFilesDrop:y,targetElement:i.XC},p[3]=y,p[4]=a):a=p[4];let{isDragging:v}=function(e){let t,a,n,i=(0,r.c)(6),{onFilesDrop:s,targetElement:d}=e,[u,m]=(0,l.useState)(!1),p=(0,l.useRef)(0);return i[0]!==s||i[1]!==d?(t=()=>{if(!d)return;let e=e=>{c(e)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer?.types.includes("Files")&&(p.current=p.current+1,1===p.current&&m(!0)))},t=e=>{e.preventDefault(),e.stopPropagation(),p.current=p.current-1,p.current<=0&&(p.current=0,m(!1))},a=e=>{if(!c(e))return;e.preventDefault(),e.stopPropagation(),p.current=0,m(!1);let t=e.dataTransfer?.files;t&&0!==t.length&&s(t)};return d.addEventListener("dragover",o),d.addEventListener("dragenter",e),d.addEventListener("dragleave",t),d.addEventListener("drop",a),()=>{d.removeEventListener("dragover",o),d.removeEventListener("dragenter",e),d.removeEventListener("dragleave",t),d.removeEventListener("drop",a)}},a=[s,d],i[0]=s,i[1]=d,i[2]=t,i[3]=a):(t=i[2],a=i[3]),(0,l.useEffect)(t,a),i[4]!==u?(n={isDragging:u},i[4]=u,i[5]=n):n=i[5],n}(a),x=null;if(g){let e;p[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.A,{size:"large"}),(0,n.jsx)("p",{className:u,children:"Uploading files..."})]}),p[5]=e):e=p[5],x=e}else if(v){let e;p[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d,{}),(0,n.jsx)("p",{className:u,children:"Drop files to upload"})]}),p[6]=e):e=p[6],x=e}return x?(p[7]!==x?(m=(0,n.jsx)("div",{className:"FullScreenDragOverlay-module__overlay--Q9gow",children:(0,n.jsx)("div",{className:"FullScreenDragOverlay-module__centeredContent--iAFMy",children:x})}),p[7]=x,p[8]=m):m=p[8],m):null}try{m.displayName||(m.displayName="FullScreenDragOverlay")}catch{}},84646:(e,t,a)=>{a.d(t,{$7:()=>p,$W:()=>_,AV:()=>w,Ao:()=>g,BV:()=>S,OW:()=>CopilotSpaceSSOError,Tx:()=>y,a5:()=>x,i9:()=>CopilotSpaceNotFoundError,nl:()=>C,yV:()=>v,yk:()=>b});var n=a(50467),r=a(97665),i=a(94747),s=a(97286),l=a(72011),o=a(33592),c=a(96540),d=a(2635),u=a(71315),m=a(23657);let CopilotSpaceNotFoundError=class CopilotSpaceNotFoundError extends Error{constructor(e="Copilot Space not found"){super(e),this.name="CopilotSpaceNotFoundError"}};let CopilotSpaceSSOError=class CopilotSpaceSSOError extends Error{constructor(e,t="Copilot Space SSO error"){super(t),(0,n._)(this,"protectedOrganizations",void 0),this.protectedOrganizations=e,this.name="CopilotSpaceSSOError"}};function p(){let e=(0,r.jE)(),t=(0,o.b)();return(0,i.n)({mutationFn:async e=>{let a=await (0,l.ee)(e);if(!a.ok)throw Error(a.error);return t.dispatch({type:"REMOVE_CUSTOM_COPILOT",customCopilotId:e}),{status:a.status,ok:!0,payload:a.payload}},onSuccess:async()=>{await e.invalidateQueries({queryKey:l.O6})}})}function h(e,t,a={}){return(0,s.I)({queryKey:(0,l.X_)(e),queryFn:()=>(0,l.CT)(e),enabled:t,staleTime:3e5,throwOnError:a.throwOnError})}function f(e,t,a,n={}){return(0,s.I)({queryKey:[...(0,l.X_)(e),"searchTerm",t],queryFn:()=>(0,l.kT)(e,t),enabled:a,staleTime:3e5,throwOnError:n.throwOnError})}function g(e){return(0,s.I)({queryKey:(0,l.dp)(e),queryFn:async()=>{let t=await (0,l.Lr)(e);if(!t.ok){if(404===t.status)throw new CopilotSpaceNotFoundError;throw Error(t.error)}if(void 0===t.payload.id)throw new CopilotSpaceSSOError(t.payload.protectedOrganizations);return t.payload},enabled:!!e})}function y(e,t){return(0,s.I)({queryKey:["visibility-settings",e,t],queryFn:async()=>(0,l.A2)({owner:e,id:t}),enabled:""!==e&&-1!==t,staleTime:3e5})}function v(e,t){return(0,s.I)({queryKey:["menu-actions",e,t],queryFn:async()=>(0,l.vC)({owner:e,id:t}),enabled:""!==e&&-1!==t,staleTime:3e5})}function x(e){return(0,s.I)({queryKey:l.Ku,queryFn:l.Bj,enabled:e,staleTime:3e5})}function b(e){let{data:t,isLoading:a}=h("starred",e),{data:n,isLoading:r}=h("user_owned",e),{data:i,isLoading:s}=h("org_owned",e),{data:l,isLoading:o}=h("shared_with_user",e);return{categorizedSpaces:(0,c.useMemo)(()=>({starred:t,userOwned:n,orgOwned:i,sharedWithUser:l}),[t,n,i,l]),categorizedLoading:(0,c.useMemo)(()=>({starred:a,userOwned:r,orgOwned:s,sharedWithUser:o}),[a,r,s,o])}}function C(e,t){let{data:a,isLoading:n}=f("starred",t,e),{data:r,isLoading:i}=f("user_owned",t,e),{data:s,isLoading:l}=f("org_owned",t,e),{data:o,isLoading:d}=f("shared_with_user",t,e);return{filteredCategorizedSpaces:(0,c.useMemo)(()=>({starred:a,userOwned:r,orgOwned:s,sharedWithUser:o}),[a,r,s,o]),filteredCategorizedLoading:(0,c.useMemo)(()=>({starred:n,userOwned:i,orgOwned:l,sharedWithUser:d}),[n,i,l,d])}}function S(){return(0,d.A3)("customCopilotsEnabled")}function w(){let e,t=(e=(0,d.A3)("customCopilots"),e?.length??0);return(0,c.useMemo)(()=>`New Space ${t+1}`,[t])}function _(e){return(0,c.useMemo)(()=>{if(!e)return;let{owner:t}=e,a=u.cg?.location.origin;if(!a)return;let n=(0,m.Cb)(e),r=`${a}${n}`,i=`content_url=${encodeURIComponent(r)}&report=${t}+(user)`;return`${a}/contact/report-content?${i}`},[e])}},93505:(e,t,a)=>{a.d(t,{V:()=>t9});var n=a(74848),r=a(16522),i=a(17485),s=a(53419),l=a(29731),o=a(83494),c=a(96459),d=a(8625),u=a(38621),m=a(52870),p=a(94236),h=a(5524),f=a(26607),g=a(26108),y=a(21373),v=a(69726),x=a(34164),b=a(96540),C=a(94747),S=a(96379),w=a(7277),_=a(47970),j=a(2635),I=a(33592),E=a(79216),T=a(97949),N=a(25641);let A=/^(?:https:\/\/)?(?:www\.)?(figma\.com\/.+)$/,R=class FigmaNotAuthorizedError extends Error{constructor(){super(),this.name="FigmaNotAuthorizedError"}};async function k(e){let t=await (0,S.lS)(`/copilot/immersive/figma-link?item_url=${e}`);if(!t.ok){if(403===t.status)throw new R;throw Error(`Failed to fetch Figma reference data (${t.status}: ${t.statusText})`)}return await t.json()}async function M(e){let{itemUrl:t}=e,a=await (0,S.lS)(`/copilot/chat-links?item_url=${t}`);if(!a.ok)throw Error(`Failed to fetch reference data (${a.status}: ${a.statusText})`);return await a.json()}var L=a(69093),P=a(25811),O=a(61526),F=a(88431),D=a(17925),$=a(51213),W=a(35247),B=a(79064),U=a(72303);let q=async(e,t,a,n,r,i,l)=>{if(!W.W.askModeDropdown){if((e[0]??"")!=="/")return!1;e=e.substring(1)}let o=(({manager:e,chatState:t,availableCommands:a})=>{let n="assistive"===t.mode?[{label:"Delete chat",key:"delete",icon:u.TrashIcon,action:async(t,a)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let t=(0,U.W)(a);if(!t)throw Error("Thread not found");await e.deleteThread(t),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_DELETE_THREAD",mode:a.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}},{label:"Rename conversation",key:"rename",icon:u.PencilIcon,action:async(t,a)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let n=(0,U.W)(a);if(!n)throw Error("Thread not found");await e.renameThread(n,t),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_RENAME",mode:a.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}},{label:"Start a new conversation",key:"new",icon:u.PlusIcon,action:async(t,a)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{await e.selectThread(null),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_NEW_THREAD",mode:a.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}}]:[];if("immersive"===t.mode&&W.W.chatInputCommands)for(let t of a)t.execute&&n.push({key:t.key,action:async(a,n,r)=>await t.execute(a,n,r,e)});return n})({manager:a,chatState:t,availableCommands:r}),c=W.W.askModeDropdown?o.filter(e=>e.key.toLowerCase()===i?.toLowerCase()):o.filter(t=>{let a=(e.split(" ",1)[0]??"").toLowerCase().trim();return t.key.toLowerCase()===a});if(1!==c.length)return!1;let d=c[0],m=W.W.askModeDropdown?e.trim():e.substring(d.key.length).trim();return l&&(l.selectedRepo||l.selectedBranch||l.selectedAgent)&&(m=JSON.stringify({text:m,selectedRepo:l.selectedRepo,selectedBranch:l.selectedBranch,selectedAgent:l.selectedAgent})),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_EXECUTED",mode:t.mode,command:d.key,activeModeName:i}),await d.action(m,t,n)};var V=a(46062),z=a(56708),H=a(61180);function K(e,t){return W.W.askModeDropdown?e===$.II.Task:"task"===t}function G(e,t,a){if("immersive"===e&&/^\/copilot(\/agents|\/spaces\/[a-zA-Z0-9-_]+\/[0-9]+)?\/?$/.test(t)){let e=a.get("prompt");if(e)return e}}var Q=a(26239),J=a(60905),X=a(76166),Y=a(72439),Z=a(23657),ee=a(72206),et=a(76872),ea=a(5839),en=a(84646);let er=()=>(0,n.jsx)("span",{role:"img","aria-label":"Starred",style:{color:"var(--button-star-iconColor)"},children:(0,n.jsx)(u.StarFillIcon,{})}),ei=e=>`${e.owner}-${e.id}`;function es({openCreateSpaceDialog:e,setPendingSpace:t,clearSpaceSelection:a,activeCopilotSpaceId:r,readOnly:i}){let l=(0,I.b)(),[o,c]=(0,b.useState)(!1),d=(0,b.useRef)(null),[m,p]=(0,b.useState)(""),[f,g]=(0,b.useState)(""),[v,x]=(0,b.useState)([]),[C,w]=(0,b.useState)(!1),[_,j]=(0,b.useState)(!1);(0,b.useEffect)(()=>{j(window.location.pathname.startsWith(N.Jz))},[]);let E=()=>{c(!1),e(!0),(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_CREATE_SPACE",mode:"immersive"})},T=(0,b.useCallback)(e=>{r&&e.id===r.id&&e.owner===r.owner?a():(l.addReference({...e,type:"copilot-space"},"spaces"),t({id:e.id,owner:e.owner}),(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_SELECT_SPACE",space:`${e.owner}/${e.id}`})),c(!1)},[r,a,l,t]),A=(0,b.useCallback)(async e=>{try{let t=new URLSearchParams({q:e}),a=await (0,S.lS)(`/github-copilot/chat/custom_copilots/search?${t.toString()}`);if(!a.ok)throw Error("Failed to fetch spaces");return await a.json()}catch{return[]}},[]);(0,b.useEffect)(()=>{let e=!1;return(async()=>{if(!o)return;w(!0);let t=await A(f);e||(x(t),w(!1))})(),()=>{e=!0}},[A,f,o]),(0,b.useEffect)(()=>()=>{d.current&&clearTimeout(d.current)},[]);let R=(0,en.BV)(),k=(0,b.useMemo)(()=>v.map(e=>({id:ei(e),key:ei(e),text:e.name.length>40?`${e.name.slice(0,40)}...`:e.name,description:e.owner,descriptionVariant:"inline",value:ei(e),trailingVisual:e.starred?er:void 0})),[v]);if(!R||i)return null;let M=r?k.find(e=>e.id===ei(r)):void 0;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ea.X,{align:"end",title:"Select a space",subtitle:"Recent spaces",renderAnchor:e=>(0,n.jsxs)(h.l.Item,{as:"button",...e,children:[(0,n.jsx)(h.l.LeadingVisual,{children:(0,n.jsx)(u.SpaceIcon,{})}),"Spaces\u2026",(0,n.jsx)(h.l.TrailingVisual,{children:(0,n.jsx)(u.ChevronRightIcon,{})})]}),open:o,onOpenChange:e=>{e&&(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES",mode:"immersive"}),c(e)},loading:C,items:k,filterValue:m,onFilterChange:e=>{p(e),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{g(e)},350)},...{selected:M,onSelectedChange:e=>{let t=v.find(t=>ei(t)===e?.id);t&&(T(t),B.Jt.setLastSelectedSpace(t))}},overlayProps:{height:"auto",width:"large",anchorSide:"outside-right"},message:0!==v.length||C?void 0:{title:"No spaces found",body:"You can create a new space to get started.",variant:"empty",action:(0,n.jsx)(y.Q,{variant:"default",size:"small",onClick:E,children:"Create a new space"})},secondaryAction:_&&v.length>0?(0,n.jsx)(ea.X.SecondaryActionButton,{onClick:E,children:"Create a space"}):void 0})})}try{er.displayName||(er.displayName="StarredIcon")}catch{}try{es.displayName||(es.displayName="SpacesSelectNew")}catch{}var el=a(14521),eo=a(47789),ec=a(99054),ed=a(77430);function eu(e){let t,a,i,l,o,c,d=(0,r.c)(24),{onSelectPanel:m,onSelectAgent:f}=e,{availableAgents:g,showLimit:y,disabled:v,loading:x}=(0,ec.JE)(),b=g&&g.length>0;if(x){let e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsxs)(h.l.Item,{disabled:!0,children:[(0,n.jsx)(h.l.LeadingVisual,{children:(0,n.jsx)(u.AppsIcon,{})}),"Extensions\u2026"]}),d[0]=e):e=d[0],e}if(v){let e,t,a;return d[1]!==m?(e=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_SUPPORTED",mode:"immersive"}),m("agents-not-supported")},d[1]=m,d[2]=e):e=d[2],d[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(h.l.LeadingVisual,{children:(0,n.jsx)(u.AppsIcon,{})}),d[3]=t):t=d[3],d[4]!==e?(a=(0,n.jsxs)(h.l.Item,{onSelect:e,children:[t,"Extensions\u2026"]}),d[4]=e,d[5]=a):a=d[5],a}if(!b){let e,t,a;return d[6]!==m?(e=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_AVAILABLE",mode:"immersive"}),m("no-agents-available")},d[6]=m,d[7]=e):e=d[7],d[8]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(h.l.LeadingVisual,{children:(0,n.jsx)(u.AppsIcon,{})}),d[8]=t):t=d[8],d[9]!==e?(a=(0,n.jsxs)(h.l.Item,{onSelect:e,children:[t,"Extensions\u2026"]}),d[9]=e,d[10]=a):a=d[10],a}if(d[11]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(p.W.Anchor,{children:(0,n.jsxs)(h.l.Item,{onSelect:ep,children:[(0,n.jsx)(h.l.LeadingVisual,{children:(0,n.jsx)(u.AppsIcon,{})}),"Extensions\u2026"]})}),d[11]=t):t=d[11],d[12]!==g||d[13]!==f||d[14]!==y){let e;d[16]!==f||d[17]!==y?(e=e=>(0,n.jsxs)(h.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_SELECTED",mode:"immersive"}),f(e)},children:[(0,n.jsx)(h.l.LeadingVisual,{children:(0,n.jsx)(ed.r,{src:e.avatarUrl})}),e.name,!y&&(0,n.jsxs)(h.l.Description,{variant:"inline",truncate:!0,children:[ec.Z3,e.slug]}),y&&(0,n.jsx)(h.l.Description,{variant:"block",children:"Start a new chat to use other extensions."})]},e.slug),d[16]=f,d[17]=y,d[18]=e):e=d[18],a=g.map(e),d[12]=g,d[13]=f,d[14]=y,d[15]=a}else a=d[15];return d[19]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(h.l.Divider,{}),d[19]=i):i=d[19],d[20]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)(h.l.LeadingVisual,{children:(0,n.jsx)(u.TelescopeIcon,{})}),d[20]=l):l=d[20],d[21]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsxs)(h.l.LinkItem,{href:ec.bn,onClick:em,children:[l,"Marketplace",(0,n.jsx)(h.l.TrailingVisual,{children:(0,n.jsx)(u.LinkExternalIcon,{})})]}),d[21]=o):o=d[21],d[22]!==a?(c=(0,n.jsxs)(p.W,{children:[t,(0,n.jsx)(p.W.Overlay,{width:"small",children:(0,n.jsxs)(h.l,{children:[a,i,o]})})]}),d[22]=a,d[23]=c):c=d[23],c}function em(){(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_MARKETPLACE",mode:"immersive"})}function ep(){(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION",mode:"immersive"})}try{eu.displayName||(eu.displayName="AgentMenu")}catch{}var eh=a(84268),ef=a(57387);let eg="AgentsDialogs-module__dialogContentWrapper--v7abd",ey="AgentsDialogs-module__dialogTitle--tEo3x",ev="AgentsDialogs-module__dialogDescription--LPgKm";function ex(e){let t,a,i=(0,r.c)(4),{onClose:s,returnFocusRef:l}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},i[0]=t):t=i[0],i[1]!==s||i[2]!==l?(a=(0,n.jsx)(ef.l,{width:"large",title:"Extensions",position:t,onClose:s,returnFocusRef:l,renderBody:eb}),i[1]=s,i[2]=l,i[3]=a):a=i[3],a}function eb(){return(0,n.jsx)("div",{className:"AgentsDialogs-module__AgentsDialogsMainContainer--ymBth",children:(0,n.jsxs)("div",{className:eg,children:[(0,n.jsx)(u.TelescopeIcon,{size:24}),(0,n.jsx)("h3",{className:ey,children:"Chat with your favorite tools and services"}),(0,n.jsx)("p",{className:ev,children:"Browse the marketplace to find extensions for the tools and services you rely on"}),(0,n.jsx)(y.Q,{as:"a",href:ec.bn,children:"Browse marketplace"}),(0,n.jsx)("div",{className:"AgentsDialogs-module__documentationLinkContainer--ydpZ9",children:(0,n.jsx)(eh.A,{href:"https://gh.io/copilot-extensions-docs",children:"Documentation"})})]})})}function eC(e){let t,a,i,s=(0,r.c)(9),{onClose:l,returnFocusRef:o}=e,c=(0,I.b)(),d=(0,j.Pk)(),m=(0,en.BV)(),p=(0,V.GF)(d.availableModels);return s[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},s[0]=t):t=s[0],s[1]!==m||s[2]!==p||s[3]!==c?(a=()=>(0,n.jsx)("div",{className:"AgentsDialogs-module__AgentsDialogsAlternateContainer--iIZFy",children:(0,n.jsxs)("div",{className:eg,children:[(0,n.jsx)("div",{className:"AgentsDialogs-module__alertIconContainer--jNjdz",children:(0,n.jsx)(u.AlertIcon,{size:24})}),(0,n.jsxs)("h3",{className:ey,children:[m?"Copilots and extensions":"Extensions"," aren't supported by this model"]}),(0,n.jsxs)("p",{className:ev,children:["Switch back to the ",p.displayName," model or start a new chat"]}),(0,n.jsx)(y.Q,{onClick:()=>{c.selectThread(null),c.selectModel(p)},children:"New chat"})]})}),s[1]=m,s[2]=p,s[3]=c,s[4]=a):a=s[4],s[5]!==l||s[6]!==o||s[7]!==a?(i=(0,n.jsx)(ef.l,{width:"large",title:"Extensions",position:t,onClose:l,returnFocusRef:o,renderBody:a}),s[5]=l,s[6]=o,s[7]=a,s[8]=i):i=s[8],i}try{ex.displayName||(ex.displayName="NoAgentsAvailableDialog")}catch{}try{eC.displayName||(eC.displayName="AgentsNotSupportedDialog")}catch{}var eS=a(59788),ew=a(97564);function e_(e){let t,a,i,s=(0,r.c)(10),{isOpen:l,onClose:o,initialRepo:c,onRepoSelect:d}=e,u=(0,I.b)(),{findFileWorkerPath:m}=(0,j.Pk)(),p=(0,b.useRef)(null);s[0]!==u||s[1]!==o?(t=async e=>{if(0===e.length)return void o();let t=await (0,ew.V)(e[0].repositoryId);for(let a of e.map(e=>"github_folder"===e.type?(0,N.OC)(e.filePath,t):(0,N.Od)(e.filePath,t)))u.addReference(a,"references-menu");o()},s[0]=u,s[1]=o,s[2]=t):t=s[2];let h=t;return l?(s[3]===Symbol.for("react.memo_cache_sentinel")?(a=[],s[3]=a):a=s[3],s[4]!==m||s[5]!==h||s[6]!==c||s[7]!==o||s[8]!==d?(i=(0,n.jsx)(eS.Q,{formData:a,onCancel:o,onSaveFiles:h,findFileWorkerPath:m,attachmentButtonRef:p,initialRepo:c,onRepoSelect:d,allowFolderReferences:!0,maxFileCount:20}),s[4]=m,s[5]=h,s[6]=c,s[7]=o,s[8]=d,s[9]=i):i=s[9],i):null}try{e_.displayName||(e_.displayName="CopilotFilePicker")}catch{}var ej=a(35673),eI=a(71363);let eE=(0,b.memo)(({panel:e,onPanelChange:t,anchorRef:a,initialRepo:r,onRepoSelect:o,...c})=>{let d,m,f,g,y,{inputRef:v}=c,x=(0,I.b)(),C=(0,j.Pk)(),S=(0,eo.qw)(),{supportedAttachmentTypes:w,supportedReferenceTypes:_}=(d=null!==(0,el.G)(),m=["upload"],d||m.push("repositories"),d||m.push("copilot-spaces"),d||m.push("agents"),d||m.push("plugin-attachment-contribution"),{supportedAttachmentTypes:m,supportedReferenceTypes:d?["files"]:["files","folders"]}),{model:E}=(0,j.bP)("model"),T=W.W.previewFeaturesVisionGate&&C.hasCEorCBAccess&&!C.optedInToPreviewFeatures,N="immersive"===C.mode&&!!E.capabilities?.supports?.vision&&!T,A=(0,ec.kw)(c),R=(0,b.useRef)(null),{handleSpaceSelect:k,clearSpaceSelection:M,activeCopilotSpaceId:L,readOnly:P}=(0,i.C)(),[O,F]=(0,b.useState)(!1);return(0,n.jsxs)("div",{children:[w.includes("upload")&&(0,n.jsx)("input",{id:"image-uploader",...(0,l.G)("image-uploader"),hidden:!0,ref:R,type:"file",accept:[N?J.s.getAllowedImageFileExtensions(E):"",Y.E.getTextFileExtensions()].join(","),multiple:!0,onChange:e=>{if(!e.target.files)return;let[t,a]=J.s.getAllowedFiles([...e.target.files],E),n=[];for(let e of(N?new J.s(C,x).addImageAttachments(t,"menu"):n.push(...t),a))new Y.E(x).addAttachment(e);for(let e of n)(0,s.BI)("dotcom_chat.upload_unsupported_file",{name:e.name,type:e.type,size:e.size});e.currentTarget.value=""}}),(0,n.jsx)(p.W,{anchorRef:a,open:"attachment-types"===e,onOpenChange:e=>t(t=>e&&null===t?"attachment-types":e||"attachment-types"!==t?t:null),children:(0,n.jsx)(p.W.Overlay,{width:"small",side:c.side??"outside-bottom",align:"start",portalContainerName:"assistive"===C.mode?ej.E5:void 0,children:(0,n.jsxs)(h.l,{children:[!W.W.copilotChatRepositoryPicker&&w.includes("repositories")&&(0,n.jsxs)(h.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",action:"open",component:"ATTACHMENT_MENU",mode:C.mode}),t("repositories")},children:[(0,n.jsx)(h.l.LeadingVisual,{children:(0,n.jsx)(u.RepoIcon,{})}),"Repositories\u2026"]}),(0,n.jsxs)(h.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_MULTI_FILE_PICKER",mode:C.mode}),t("multi-file-picker")},children:[(0,n.jsx)(h.l.LeadingVisual,{children:(0,n.jsx)(u.FileCodeIcon,{})}),(f=_.includes("files"),g=_.includes("folders"),y=_.includes("symbols"),f&&g&&y?"Files, folders, and symbols":f&&g?"Files and folders":f&&y?"Files and symbols":g&&y?"Folders and symbols":f?"Files":g?"Folders":y?"Symbols":"References"),"\u2026"]}),w.includes("copilot-spaces")&&(0,n.jsx)(es,{openCreateSpaceDialog:F,setPendingSpace:k,clearSpaceSelection:M,activeCopilotSpaceId:L,readOnly:P}),S.map(e=>{let a=e.attachmentMenuContribution;return a?(0,n.jsx)(a.MenuItemComponent,{onSelect:()=>t(a.attachmentType)},e.id):null}),w.includes("upload")&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.l.Divider,{}),(0,n.jsxs)(h.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_IMAGES",mode:C.mode}),t(null),R.current?.click()},children:[(0,n.jsx)(h.l.LeadingVisual,{children:(0,n.jsx)(u.UploadIcon,{})}),"Upload from computer"]})]}),w.includes("agents")&&!W.W.hideExtensionsInDotcomChat&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.l.Divider,{}),(0,n.jsx)(eu,{onSelectPanel:e=>t(e),onSelectAgent:e=>setTimeout(()=>A(e.slug))})]})]})})}),"multi-file-picker"===e&&(0,n.jsx)(e_,{isOpen:!0,onClose:()=>t(null),initialRepo:r,onRepoSelect:o}),!W.W.copilotChatRepositoryPicker&&(0,n.jsx)(eI.F,{open:"repositories"===e,onOpenChange:e=>t(e?"repositories":null),submitReturnFocusRef:v,cancelReturnFocusRef:a,onRepoSelect:o}),O&&(0,n.jsx)(et.D,{closeDialog:()=>F(!1),onSubmit:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_SPACE_CREATED",mode:"immersive"})}}),"no-agents-available"===e&&(0,n.jsx)(ex,{onClose:()=>t(null),returnFocusRef:a}),"agents-not-supported"===e&&(0,n.jsx)(eC,{onClose:()=>t(null),returnFocusRef:a}),w.includes("plugin-attachment-contribution")&&S.map(r=>r.attachmentMenuContribution&&r.attachmentMenuContribution.attachmentType===e?(0,n.jsx)(r.attachmentMenuContribution.PanelComponent,{onSubmit:()=>{t(null),v.current?.focus()},onDismiss:()=>{t(null),a.current?.focus()}},r.id):null)]})});eE.displayName="AttachmentMenu";var eT=a(51112);let eN={agents:"Extensions",repositories:"Repositories",files:"Files and folders",issues:"Issues",pulls:"Pull requests",discussions:"Discussions"},eA=[{name:eN.agents,icon:u.AppsIcon,value:"agents",where:"start"},{name:eN.repositories,icon:u.RepoIcon,value:"repositories",where:"anywhere"},{name:eN.files,icon:u.FileIcon,value:"repositories:files",where:"anywhere"},{name:eN.issues,icon:u.IssueOpenedIcon,value:"repositories:issues",where:"anywhere"},{name:eN.pulls,icon:u.GitPullRequestIcon,value:"repositories:pulls",where:"anywhere"},{name:eN.discussions,icon:u.CommentDiscussionIcon,value:"repositories:discussions",where:"anywhere"}];function eR(e){let t,a,i,s,l,o=(0,r.c)(12);return o[0]!==e?({agent:t,...a}=e,o[0]=e,o[1]=t,o[2]=a):(t=o[1],a=o[2]),o[3]!==t.avatarUrl?(i=(0,n.jsx)(h.l.LeadingVisual,{children:(0,n.jsx)(ed.r,{src:t.avatarUrl})}),o[3]=t.avatarUrl,o[4]=i):i=o[4],o[5]!==t.slug?(s=(0,n.jsxs)(h.l.Description,{variant:"inline",truncate:!0,children:[ec.Z3,t.slug]}),o[5]=t.slug,o[6]=s):s=o[6],o[7]!==t.name||o[8]!==a||o[9]!==i||o[10]!==s?(l=(0,n.jsxs)(h.l.Item,{...a,children:[i,t.name,s]}),o[7]=t.name,o[8]=a,o[9]=i,o[10]=s,o[11]=l):l=o[11],l}try{eR.displayName||(eR.displayName="AgentSuggestion")}catch{}function ek(e){let t,a,i,s,l,o,c,d,m=(0,r.c)(20);m[0]!==e?({leadingVisual:t,...a}=e,m[0]=e,m[1]=t,m[2]=a):(t=m[1],a=m[2]);let p=(0,b.useId)(),f=(0,b.useId)();return m[3]!==f||m[4]!==p?(i=(0,x.$)(p,f),m[3]=f,m[4]=p,m[5]=i):i=m[5],m[6]!==t?(s=void 0!==t&&(0,n.jsx)(h.l.LeadingVisual,{children:t}),m[6]=t,m[7]=s):s=m[7],m[8]!==p||m[9]!==a.children?(l=(0,n.jsx)("span",{id:p,children:a.children}),m[8]=p,m[9]=a.children,m[10]=l):l=m[10],m[11]!==f?(o=(0,n.jsx)("span",{className:"d-none","aria-hidden":!0,id:f,children:"Opens in new tab."}),m[11]=f,m[12]=o):o=m[12],m[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsx)(h.l.TrailingVisual,{children:(0,n.jsx)(u.LinkExternalIcon,{})}),m[13]=c):c=m[13],m[14]!==a||m[15]!==i||m[16]!==s||m[17]!==l||m[18]!==o?(d=(0,n.jsxs)(h.l.Item,{...a,"aria-labelledby":i,children:[s,l,o,c]}),m[14]=a,m[15]=i,m[16]=s,m[17]=l,m[18]=o,m[19]=d):d=m[19],d}try{ek.displayName||(ek.displayName="LinkSuggestion")}catch{}function eM(e){return{value:`@${e.slug}`,render:t=>(0,n.jsx)(eR,{agent:e,...t})}}function eL(e){let t,a,i,s,l,o=(0,r.c)(9);return o[0]!==e?({leadingVisual:t,...a}=e,o[0]=e,o[1]=t,o[2]=a):(t=o[1],a=o[2]),o[3]!==t?(i=void 0!==t&&(0,n.jsx)(h.l.LeadingVisual,{children:t}),o[3]=t,o[4]=i):i=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)(h.l.TrailingVisual,{children:(0,n.jsx)(u.ArrowRightIcon,{})}),o[5]=s):s=o[5],o[6]!==a||o[7]!==i?(l=(0,n.jsxs)(h.l.Item,{"aria-haspopup":!0,...a,children:[i,a.children,s]}),o[6]=a,o[7]=i,o[8]=l):l=o[8],l}try{eL.displayName||(eL.displayName="MultistepSuggestion")}catch{}function eP(e){let t,a,i,s,l=(0,r.c)(9);l[0]!==e?({category:a,...t}=e,l[0]=e,l[1]=t,l[2]=a):(t=l[1],a=l[2]);let{name:o,icon:c}=a;return l[3]!==c?(i=(0,n.jsx)(c,{}),l[3]=c,l[4]=i):i=l[4],l[5]!==o||l[6]!==t||l[7]!==i?(s=(0,n.jsx)(eL,{leadingVisual:i,...t,children:o}),l[5]=o,l[6]=t,l[7]=i,l[8]=s):s=l[8],s}try{eP.displayName||(eP.displayName="CategorySuggestion")}catch{}var eO=a(69497);let eF="shared-module__asyncSuggestion--AXibl",eD="shared-module__stale--R4Im6";function e$(e){let t,a,i,s,l,o,c,d,m,p,f,g=(0,r.c)(25);g[0]!==e?({discussion:a,stale:s,className:t,...i}=e,g[0]=e,g[1]=t,g[2]=a,g[3]=i,g[4]=s):(t=g[1],a=g[2],i=g[3],s=g[4]);let y=s&&eD;return g[5]!==t||g[6]!==y?(l=(0,x.$)(eF,y,t),g[5]=t,g[6]=y,g[7]=l):l=g[7],g[8]!==a.state?(o="open"===a.state&&(0,n.jsx)(u.CommentDiscussionIcon,{className:"fgColor-open"}),g[8]=a.state,g[9]=o):o=g[9],g[10]!==a.state?(c="closed"===a.state&&(0,n.jsx)(u.DiscussionClosedIcon,{className:"fgColor-muted"}),g[10]=a.state,g[11]=c):c=g[11],g[12]!==o||g[13]!==c?(d=(0,n.jsxs)(h.l.LeadingVisual,{children:[o,c]}),g[12]=o,g[13]=c,g[14]=d):d=g[14],g[15]!==a.title?(m=(0,n.jsx)(eO.A,{title:a.title,maxWidth:350,children:a.title}),g[15]=a.title,g[16]=m):m=g[16],g[17]!==a.number?(p=(0,n.jsxs)(h.l.Description,{children:["#",a.number]}),g[17]=a.number,g[18]=p):p=g[18],g[19]!==i||g[20]!==l||g[21]!==d||g[22]!==m||g[23]!==p?(f=(0,n.jsxs)(h.l.Item,{...i,className:l,children:[d,m,p]}),g[19]=i,g[20]=l,g[21]=d,g[22]=m,g[23]=p,g[24]=f):f=g[24],f}try{e$.displayName||(e$.displayName="DiscussionSuggestion")}catch{}function eW(e){let t,a,i,s,l,o,c,d,m,p,f,g,y,v,b,C=(0,r.c)(35);if(C[0]!==e?({type:l,path:a,stale:s,className:t,...i}=e,C[0]=e,C[1]=t,C[2]=a,C[3]=i,C[4]=s,C[5]=l):(t=C[1],a=C[2],i=C[3],s=C[4],l=C[5]),C[6]!==t||C[7]!==a||C[8]!==i||C[9]!==s||C[10]!==l){let e=a.split("/"),r=e.pop();c=h.l.Item,p=i;let v=s&&eD;C[19]!==t||C[20]!==v?(f=(0,x.$)(eF,v,t),C[19]=t,C[20]=v,C[21]=f):f=C[21],C[22]!==l?(g=(0,n.jsx)(h.l.LeadingVisual,{children:"folder"===l?(0,n.jsx)(u.FileDirectoryFillIcon,{}):(0,n.jsx)(u.FileIcon,{})}),C[22]=l,C[23]=g):g=C[23],y=r,o=h.l.Description,d="inline",m=e.join("/"),C[6]=t,C[7]=a,C[8]=i,C[9]=s,C[10]=l,C[11]=o,C[12]=c,C[13]=d,C[14]=m,C[15]=p,C[16]=f,C[17]=g,C[18]=y}else o=C[11],c=C[12],d=C[13],m=C[14],p=C[15],f=C[16],g=C[17],y=C[18];return C[24]!==o||C[25]!==d||C[26]!==m?(v=(0,n.jsxs)(o,{variant:d,children:[m,"/"]}),C[24]=o,C[25]=d,C[26]=m,C[27]=v):v=C[27],C[28]!==c||C[29]!==p||C[30]!==f||C[31]!==g||C[32]!==y||C[33]!==v?(b=(0,n.jsxs)(c,{...p,className:f,children:[g,y,v]}),C[28]=c,C[29]=p,C[30]=f,C[31]=g,C[32]=y,C[33]=v,C[34]=b):b=C[34],b}try{eW.displayName||(eW.displayName="FileSuggestion")}catch{}function eB(e){let t,a,i,s,l,o,c,d,m,p,f,g,y=(0,r.c)(28);y[0]!==e?({issue:a,stale:s,className:t,...i}=e,y[0]=e,y[1]=t,y[2]=a,y[3]=i,y[4]=s):(t=y[1],a=y[2],i=y[3],s=y[4]);let v=s&&eD;return y[5]!==t||y[6]!==v?(l=(0,x.$)(eF,v,t),y[5]=t,y[6]=v,y[7]=l):l=y[7],y[8]!==a.state?(o="draft"===a.state&&(0,n.jsx)(u.IssueDraftIcon,{className:"fgColor-draft"}),y[8]=a.state,y[9]=o):o=y[9],y[10]!==a.state?(c="open"===a.state&&(0,n.jsx)(u.IssueOpenedIcon,{className:"fgColor-open"}),y[10]=a.state,y[11]=c):c=y[11],y[12]!==a.state?(d="closed"===a.state&&(0,n.jsx)(u.IssueClosedIcon,{className:"fgColor-done"}),y[12]=a.state,y[13]=d):d=y[13],y[14]!==o||y[15]!==c||y[16]!==d?(m=(0,n.jsxs)(h.l.LeadingVisual,{children:[o,c,d]}),y[14]=o,y[15]=c,y[16]=d,y[17]=m):m=y[17],y[18]!==a.title?(p=(0,n.jsx)(eO.A,{title:a.title,maxWidth:350,children:a.title}),y[18]=a.title,y[19]=p):p=y[19],y[20]!==a.number?(f=(0,n.jsxs)(h.l.Description,{children:["#",a.number]}),y[20]=a.number,y[21]=f):f=y[21],y[22]!==i||y[23]!==l||y[24]!==m||y[25]!==p||y[26]!==f?(g=(0,n.jsxs)(h.l.Item,{...i,className:l,children:[m,p,f]}),y[22]=i,y[23]=l,y[24]=m,y[25]=p,y[26]=f,y[27]=g):g=y[27],g}try{eB.displayName||(eB.displayName="IssueSuggestion")}catch{}function eU(e){let t,a,i,s,l,o,c,d,m,p,f,g,y=(0,r.c)(28);y[0]!==e?({pullRequest:i,stale:s,className:t,...a}=e,y[0]=e,y[1]=t,y[2]=a,y[3]=i,y[4]=s):(t=y[1],a=y[2],i=y[3],s=y[4]);let v=s&&eD;return y[5]!==t||y[6]!==v?(l=(0,x.$)(eF,v,t),y[5]=t,y[6]=v,y[7]=l):l=y[7],y[8]!==i.state?(o="draft"===i.state&&(0,n.jsx)(u.GitPullRequestDraftIcon,{className:"fgColor-draft"}),y[8]=i.state,y[9]=o):o=y[9],y[10]!==i.state?(c="open"===i.state&&(0,n.jsx)(u.GitPullRequestIcon,{className:"fgColor-open"}),y[10]=i.state,y[11]=c):c=y[11],y[12]!==i.state?(d="closed"===i.state&&(0,n.jsx)(u.GitPullRequestClosedIcon,{className:"fgColor-done"}),y[12]=i.state,y[13]=d):d=y[13],y[14]!==o||y[15]!==c||y[16]!==d?(m=(0,n.jsxs)(h.l.LeadingVisual,{children:[o,c,d]}),y[14]=o,y[15]=c,y[16]=d,y[17]=m):m=y[17],y[18]!==i.title?(p=(0,n.jsx)(eO.A,{title:i.title,maxWidth:350,children:i.title}),y[18]=i.title,y[19]=p):p=y[19],y[20]!==i.number?(f=(0,n.jsxs)(h.l.Description,{children:["#",i.number]}),y[20]=i.number,y[21]=f):f=y[21],y[22]!==a||y[23]!==l||y[24]!==m||y[25]!==p||y[26]!==f?(g=(0,n.jsxs)(h.l.Item,{...a,className:l,children:[m,p,f]}),y[22]=a,y[23]=l,y[24]=m,y[25]=p,y[26]=f,y[27]=g):g=y[27],g}try{eU.displayName||(eU.displayName="PullRequestSuggestion")}catch{}function eq(e){let t,a,i,s,l,o,c,d,m=(0,r.c)(18);m[0]!==e?({repository:s,isMultistep:a,stale:l,className:t,...i}=e,m[0]=e,m[1]=t,m[2]=a,m[3]=i,m[4]=s,m[5]=l):(t=m[1],a=m[2],i=m[3],s=m[4],l=m[5]);let p=l&&eD;m[6]!==t||m[7]!==p?(o=(0,x.$)(eF,p,t),m[6]=t,m[7]=p,m[8]=o):o=m[8];let f=o;m[9]!==s.isInOrganization||m[10]!==s.ownerAvatarUrl?(c=s.ownerAvatarUrl?(0,n.jsx)(ed.r,{src:s.ownerAvatarUrl,alt:"",size:16,square:s.isInOrganization}):(0,n.jsx)(u.RepoIcon,{}),m[9]=s.isInOrganization,m[10]=s.ownerAvatarUrl,m[11]=c):c=m[11];let g=c;return m[12]!==g||m[13]!==f||m[14]!==a||m[15]!==i||m[16]!==s.nwo?(d=a?(0,n.jsx)(eL,{...i,className:f,leadingVisual:g,children:s.nwo},s.nwo):(0,n.jsxs)(h.l.Item,{...i,className:f,children:[(0,n.jsx)(h.l.LeadingVisual,{children:g}),s.nwo]},s.nwo),m[12]=g,m[13]=f,m[14]=a,m[15]=i,m[16]=s.nwo,m[17]=d):d=m[17],d}try{eq.displayName||(eq.displayName="RepositorySuggestion")}catch{}function eV(e){return{value:null,key:e.value,render:t=>(0,n.jsx)(eP,{category:e,...t})}}function ez(e){return null!==e}var eH=a(84331);function eK(e){return{value:`/${e.key}`,key:e.key,render:t=>(0,n.jsxs)(h.l.Item,{...t,children:[(0,n.jsx)(h.l.LeadingVisual,{children:(0,n.jsx)(e.icon,{})}),e.name,(0,n.jsx)(h.l.Description,{variant:"block",children:e.description})]})}}var eG=a(97286);function eQ(e){let t,a,n=(0,r.c)(3),[i,s]=(0,b.useState)(null);return(null===i&&null!==e||null!==i&&null===e)&&s(e),n[0]!==e?(t=()=>{let t=setTimeout(()=>s(e),200);return()=>clearTimeout(t)},a=[e],n[0]=e,n[1]=t,n[2]=a):(t=n[1],a=n[2]),(0,b.useEffect)(t,a),i}function eJ(e){return e}async function eX(e,t,a,n){return new Promise((r,i)=>{if(!window.Worker)return void setTimeout(()=>r(e.filter(e=>e.includes(t))));let s=new Worker(a);s.addEventListener("message",e=>r(e.data.list)),s.addEventListener("error",e=>i(Error(`Worker error: ${e.message}`))),n.addEventListener("abort",()=>{s.terminate(),i(Error("Worker aborted"))}),s.postMessage({baseList:e,query:t})})}function eY(e){return e}function eZ(e){return e}function e0(e){return e}var e1=a(26408);function e2(e){let t,a,i,s,l=(0,r.c)(9);return l[0]!==e?({org:t,...a}=e,l[0]=e,l[1]=t,l[2]=a):(t=l[1],a=l[2]),l[3]!==t.avatarUrl?(i=(0,n.jsx)(ed.r,{square:!0,src:t.avatarUrl}),l[3]=t.avatarUrl,l[4]=i):i=l[4],l[5]!==t.login||l[6]!==a||l[7]!==i?(s=(0,n.jsx)(ek,{leadingVisual:i,...a,children:t.login}),l[5]=t.login,l[6]=a,l[7]=i,l[8]=s):s=l[8],s}function e5(e){let t,a,i,s=(0,r.c)(7);return s[0]!==e?({orgs:t,...a}=e,s[0]=e,s[1]=t,s[2]=a):(t=s[1],a=s[2]),s[3]!==t[0]?.login||s[4]!==t.length||s[5]!==a?(i=1===t.length?(0,n.jsxs)(ek,{leadingVisual:(0,n.jsx)(u.ShieldLockIcon,{}),...a,children:["Single sign-on to ",(0,n.jsx)("strong",{children:t[0]?.login})," for more"]}):(0,n.jsx)(eL,{leadingVisual:(0,n.jsx)(u.ShieldLockIcon,{}),...a,children:"Single sign-on for more"}),s[3]=t[0]?.login,s[4]=t.length,s[5]=a,s[6]=i):i=s[6],i}try{e2.displayName||(e2.displayName="SSOOrgSuggestion")}catch{}try{e5.displayName||(e5.displayName="SSOPromptSuggestion")}catch{}let e3=e=>`/orgs/${encodeURIComponent(e.login)}/sso?return_to=${encodeURIComponent(location.href)}`;function e4(e){return{value:null,key:`open-link:${e3(e)}`,render:t=>(0,n.jsx)(e2,{org:e,...t})}}function e7(e){let t,a,i,l,o,c,d,m,p,f,g,y,v,x=(0,r.c)(36),{children:C,onSelectCommand:S,onSelectReference:w,onShowAgentsDialog:_,hideAutocomplete:T,availableCommands:N,availableModes:A}=e,{mode:R}=(0,j.Pk)();x[0]===Symbol.for("react.memo_cache_sentinel")?(t=[{triggerChar:"@",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!0}],W.W.chatInputCommands&&t.push({triggerChar:"/",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!1}),x[0]=t):t=x[0];let[k,M]=(0,b.useState)(e6);x[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>M(!0),i=[],x[1]=a,x[2]=i):(a=x[1],i=x[2]),(0,b.useEffect)(a,i);let[L,P]=(0,b.useState)(null);x[3]!==N||x[4]!==L?(l={query:L,availableCommands:N},x[3]=N,x[4]=L,x[5]=l):l=x[5];let{suggestions:O,stale:F}=function(e){let t=(0,r.c)(9),{query:a,availableCommands:i}=e,s=function(e,t){let a,n=(0,r.c)(5);e:{let r,i;if(!t){a=null;break e}n[0]!==e||n[1]!==t.filter?(r=""===t.filter.trim()?e:e.filter(e=>(0,eH.dt)(e.name,t.filter)>.5&&e.key!==t.filter.toLowerCase()),n[0]=e,n[1]=t.filter,n[2]=r):r=n[2];let s=r;n[3]!==s?(i=s.map(eK),n[3]=s,n[4]=i):i=n[4],a=i}return a}(i,a?.category==="commands"?a:null),l=function(e){let t,a=(0,r.c)(3),{currentReferences:i}=(0,j.Pk)();e:{let r;if(!e){t=null;break e}if(a[0]!==i||a[1]!==e){let t=e.filter.toLowerCase(),s=e=>e.toLowerCase().includes(t)&&e.toLowerCase()!==t,l=i.map(e=>{let t=E.Q.for(e);switch(t?.type){case void 0:break;case"repository":{let e=`${t.reference.ownerLogin}/${t.reference.name}`;if(!s(e))return null;return{value:E.Q.stringify(t),render:a=>(0,n.jsx)(eq,{repository:{databaseId:t.reference.id,isInOrganization:"Organization"===t.reference.ownerType,name:t.reference.name,nwo:e,ownerLogin:t.reference.ownerLogin},...a})}}case"issue":{let e=t.reference.title??"";if(!s(e))return null;return{value:E.Q.stringify(t),render:a=>(0,n.jsx)(eB,{issue:{number:t.reference.number,state:t.reference.state??"",title:e},...a})}}case"pull-request":{let e=t.reference.title??"";if(!s(e))return null;return{value:E.Q.stringify(t),render:a=>(0,n.jsx)(eU,{pullRequest:{number:t.reference.number,state:t.reference.state??"",title:e},...a})}}case"discussion":{let e=t.reference.title??"";if(!s(e))return null;return{value:E.Q.stringify(t),render:a=>(0,n.jsx)(e$,{discussion:{number:t.reference.number,state:t.reference.state,title:e},...a})}}case"file":{let e=t.reference.path;if(!s(e))return null;return{value:E.Q.stringify(t),render:a=>(0,n.jsx)(eW,{type:"folder"===t.reference.type?"folder":"file",path:e,...a})}}}return null}).filter(ez),o=(W.W.hideExtensionsInDotcomChat?eA.filter(e=>"agents"!==e.value):eA).filter(a=>a.name.toLowerCase().includes(t)&&function(e,t){switch(e){case"start":return 0===t.index;case"anywhere":return!0}}(a.where,e)).map(eV);if(o.length>0){let e=l.at(-1);if(e&&"object"==typeof e){let t=e.render;e.render=e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t,{...e}),(0,n.jsx)(h.l.Divider,{})]})}}r=l.concat(o),a[0]=i,a[1]=e,a[2]=r}else r=a[2];t=r}return t}(a?.category==="categories"?a:null),o=function(e){let t,a=(0,r.c)(4),{availableAgents:i,loading:s,showLimit:l,disabled:o}=(0,ec.JE)(null!==e);e:{let r;if(o||!e){t=null;break e}if(s&&!i){t="loading";break e}a[0]!==i||a[1]!==e||a[2]!==l?(r=i?.filter(t=>e?.category==="agents"&&t.name.toLowerCase().includes(e.filter.toLowerCase())).map(eM).concat({value:null,key:`open-link:${ec.bn}`,render:e=>(0,n.jsxs)(n.Fragment,{children:[i.length>0&&(0,n.jsx)(h.l.Divider,{}),(0,n.jsx)(ek,{leadingVisual:(0,n.jsx)(u.TelescopeIcon,{}),...e,inactiveText:l?"Start a new conversation to use other extensions.":void 0,children:"Marketplace"})]})})??null,a[0]=i,a[1]=e,a[2]=l,a[3]=r):r=a[3],t=r}return t}(a?.category==="agents"?a:null),c=function(e){let{currentReferences:t}=(0,j.Pk)(),a=eQ(e),r=e!==a,{repositories:i,loading:s}=(0,e1.U)(a?.filter??"",null!==a),l=(0,b.useMemo)(()=>new Set(t.filter(e=>"repository"===e.type).map(e=>e.id)),[t]),{ssoOrganizations:o}=(0,j.Pk)();return{suggestions:(0,b.useMemo)(()=>{if(!a)return null;if("initial"===s)return"loading";let e=void 0!==a.nextCategory,t=i.toSorted((e,t)=>l.has(e.databaseId)&&!l.has(t.databaseId)?-1:l.has(t.databaseId)&&!l.has(e.databaseId)?1:0).slice(0,5).map(t=>({value:e?null:E.Q.stringify({type:"repository",repo:t.nwo}),key:t.nwo,render:a=>(0,n.jsx)(eq,{repository:t,isMultistep:e,stale:!!s||r,...a})}))??[];return o.length>0&&t.push({value:null,key:1===o.length?`open-link:${e3(o[0])}`:"sso-orgs",render:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.l.Divider,{}),(0,n.jsx)(e5,{orgs:o,...e})]})}),t},[i,s,a,l,o,r]),stale:!0===s}}(a?.category==="repositories"?a:null),d=function(e){let t,a,i,s,l,o=(0,r.c)(18),{service:c}=(0,I.b)(),d=eQ(e),u=e!==d,m=null!==d,p=d?.repository,h=d?.filter;o[0]!==p||o[1]!==h?(t=["copilot-autocomplete-issues",p,h],o[0]=p,o[1]=h,o[2]=t):t=o[2],o[3]!==d||o[4]!==c?(a=async()=>c.fetchAutocompleteIssues(d.repository,d.filter),o[3]=d,o[4]=c,o[5]=a):a=o[5],o[6]!==m||o[7]!==t||o[8]!==a?(i={enabled:m,queryKey:t,queryFn:a,placeholderData:eZ},o[6]=m,o[7]=t,o[8]=a,o[9]=i):i=o[9];let f=(0,eG.I)(i);e:{let e;if(!d){s=null;break e}if(f.isLoading){s="loading";break e}o[10]!==d||o[11]!==u||o[12]!==f.data||o[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:E.Q.stringify({type:"issue",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,n.jsx)(eB,{...t,issue:e,stale:f.isPlaceholderData||u})}))??null,o[10]=d,o[11]=u,o[12]=f.data,o[13]=f.isPlaceholderData,o[14]=e):e=o[14],s=e}let g=s;return o[15]!==f.isPlaceholderData||o[16]!==g?(l={suggestions:g,stale:f.isPlaceholderData},o[15]=f.isPlaceholderData,o[16]=g,o[17]=l):l=o[17],l}(a?.category==="issues"?a:null),m=function(e){let t,a,i,s,l,o=(0,r.c)(18),{service:c}=(0,I.b)(),d=eQ(e),u=e!==d,m=null!==d,p=d?.repository,h=d?.filter;o[0]!==p||o[1]!==h?(t=["copilot-autocomplete-pulls",p,h],o[0]=p,o[1]=h,o[2]=t):t=o[2],o[3]!==d||o[4]!==c?(a=async()=>c.fetchAutocompletePullRequests(d.repository,d.filter),o[3]=d,o[4]=c,o[5]=a):a=o[5],o[6]!==m||o[7]!==t||o[8]!==a?(i={enabled:m,queryKey:t,queryFn:a,placeholderData:e0},o[6]=m,o[7]=t,o[8]=a,o[9]=i):i=o[9];let f=(0,eG.I)(i);e:{let e;if(!d){s=null;break e}if(f.isLoading){s="loading";break e}o[10]!==d||o[11]!==u||o[12]!==f.data||o[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:E.Q.stringify({type:"pull-request",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,n.jsx)(eU,{...t,pullRequest:e,stale:f.isPlaceholderData||u})}))??null,o[10]=d,o[11]=u,o[12]=f.data,o[13]=f.isPlaceholderData,o[14]=e):e=o[14],s=e}let g=s;return o[15]!==f.isPlaceholderData||o[16]!==g?(l={suggestions:g,stale:f.isPlaceholderData},o[15]=f.isPlaceholderData,o[16]=g,o[17]=l):l=o[17],l}(a?.category==="pulls"?a:null),p=function(e){let t,a,i,s,l,o=(0,r.c)(18),{service:c}=(0,I.b)(),d=eQ(e),u=e!==d,m=null!==d,p=d?.repository,h=d?.filter;o[0]!==p||o[1]!==h?(t=["copilot-autocomplete-discussions",p,h],o[0]=p,o[1]=h,o[2]=t):t=o[2],o[3]!==d||o[4]!==c?(a=async()=>c.fetchAutocompleteDiscussions(d.repository,d.filter),o[3]=d,o[4]=c,o[5]=a):a=o[5],o[6]!==m||o[7]!==t||o[8]!==a?(i={enabled:m,queryKey:t,queryFn:a,placeholderData:eJ},o[6]=m,o[7]=t,o[8]=a,o[9]=i):i=o[9];let f=(0,eG.I)(i);e:{let e;if(!d){s=null;break e}if(f.isLoading){s="loading";break e}o[10]!==d||o[11]!==f.data||o[12]!==f.isPlaceholderData||o[13]!==u?(e=f.data?.map(e=>({value:E.Q.stringify({type:"discussion",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,n.jsx)(e$,{...t,discussion:e,stale:f.isPlaceholderData||u})}))??null,o[10]=d,o[11]=f.data,o[12]=f.isPlaceholderData,o[13]=u,o[14]=e):e=o[14],s=e}let g=s;return o[15]!==f.isPlaceholderData||o[16]!==g?(l={suggestions:g,stale:f.isPlaceholderData},o[15]=f.isPlaceholderData,o[16]=g,o[17]=l):l=o[17],l}(a?.category==="discussions"?a:null),f=function(e){var t;let a,i,s,l,o,c,d,u,m,p,h,f,g,y,v=(0,r.c)(23),x=(0,I.b)(),b=null!==e,C=e?.repository;v[0]!==C?(a=["copilot-repository",C],v[0]=C,v[1]=a):a=v[1],v[2]!==x||v[3]!==e?.repository?(i=async()=>{if(!e?.repository)return null;let t=await x.service.fetchRepo(e?.repository);if(!t.ok)throw Error("Failed to fetch repository");return t.payload},v[2]=x,v[3]=e?.repository,v[4]=i):i=v[4],v[5]!==b||v[6]!==a||v[7]!==i?(s={enabled:b,queryKey:a,queryFn:i,staleTime:3e5},v[5]=b,v[6]=a,v[7]=i,v[8]=s):s=v[8];let S=(0,eG.I)(s),w=(t=S.data??null,f=(0,r.c)(11),g=(0,I.b)(),y=null!==t,!0!==f[0]||f[1]!==t?(m=["copilot-repository-files",t,!0],f[0]=!0,f[1]=t,f[2]=m):m=f[2],!0!==f[3]||f[4]!==g||f[5]!==t?(p=async()=>{if(!t)return{};let e=await g.service.listRepoFiles(t,!0);if(!e.ok)throw Error("Failed to fetch files for repository");return e.payload},f[3]=!0,f[4]=g,f[5]=t,f[6]=p):p=f[6],f[7]!==y||f[8]!==m||f[9]!==p?(h={enabled:y,queryKey:m,queryFn:p,staleTime:3e5},f[7]=y,f[8]=m,f[9]=p,f[10]=h):h=f[10],(0,eG.I)(h));w.data?.directories,v[9]!==w.data?.directories?(l=w.data?.directories??[],v[9]=w.data?.directories,v[10]=l):l=v[10],v[11]!==l?(o=new Set(l),v[11]=l,v[12]=o):o=v[12];let _=o;v[13]!==w.data?(c=w.data?(w.data.paths??[]).concat(w.data.directories??[]):null,v[13]=w.data,v[14]=c):c=v[14];let T=function(e,t){let a,n,i,s=(0,r.c)(9),{findFileWorkerPath:l}=(0,j.Pk)();s[0]!==e||s[1]!==t||s[2]!==l?(a=["copilot-worker-filter",l,e,t],n=async a=>{let{signal:n}=a;return e?0===t.length?e:eX(e,t,l,n):[]},s[0]=e,s[1]=t,s[2]=l,s[3]=a,s[4]=n):(a=s[3],n=s[4]);let o=null!==e;return s[5]!==a||s[6]!==n||s[7]!==o?(i={queryKey:a,queryFn:n,enabled:o,staleTime:1/0,gcTime:1e4,networkMode:"always",retry:!1,placeholderData:eY},s[5]=a,s[6]=n,s[7]=o,s[8]=i):i=s[8],(0,eG.I)(i)}(c,e?.filter??"");e:{let t;if(!e){d=null;break e}if(S.isLoading||w.isLoading||T.isLoading){d="loading";break e}v[15]!==_||v[16]!==T.data||v[17]!==T.isPlaceholderData||v[18]!==e?(t=[...T.data?.slice(0,5).map(t=>({value:E.Q.stringify({repo:e.repository,type:"file",id:t}),key:t,render:e=>(0,n.jsx)(eW,{...e,path:t,type:_.has(t)?"folder":"file",stale:T.isPlaceholderData})}))??[]],v[15]=_,v[16]=T.data,v[17]=T.isPlaceholderData,v[18]=e,v[19]=t):t=v[19];let a=t;d=a.length>0?a:null}let N=d;return v[20]!==S.isPlaceholderData||v[21]!==N?(u={suggestions:N,stale:S.isPlaceholderData},v[20]=S.isPlaceholderData,v[21]=N,v[22]=u):u=v[22],u}(a?.category==="files"?a:null),g=function(e){let t,a=(0,r.c)(5),{ssoOrganizations:n}=(0,j.Pk)();e:{let r;if(!e){t=null;break e}if(a[0]!==e||a[1]!==n){let t;a[3]!==e?(t=t=>t.login.toLowerCase().includes(e.filter.toLowerCase()),a[3]=e,a[4]=t):t=a[4],r=n.filter(t).slice(0,10).map(e4),a[0]=e,a[1]=n,a[2]=r}else r=a[2];t=r}return t}(a?.category==="sso-orgs"?a:null);switch(a?.category){case"commands":{let e;return t[0]!==s?(e={suggestions:s,stale:!1},t[0]=s,t[1]=e):e=t[1],e}case void 0:{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e={suggestions:null,stale:!1},t[2]=e):e=t[2],e}case"categories":{let e;return t[3]!==l?(e={suggestions:l,stale:!1},t[3]=l,t[4]=e):e=t[4],e}case"repositories":return c;case"issues":return d;case"agents":{let e;return t[5]!==o?(e={suggestions:o,stale:!1},t[5]=o,t[6]=e):e=t[6],e}case"discussions":return p;case"pulls":return m;case"files":return f;case"sso-orgs":{let e;return t[7]!==g?(e={suggestions:g,stale:!1},t[7]=g,t[8]=e):e=t[8],e}}}(l);if(x[6]!==_||x[7]!==L?(o={query:L,onShowAgentsDialog:_},x[6]=_,x[7]=L,x[8]=o):o=x[8],!function(e){let t,a,n=(0,r.c)(12),{query:i,onShowAgentsDialog:s}=e,l=i?.category==="agents",{availableAgents:o,loading:c,disabled:d}=(0,ec.JE)(l);n[0]!==l||n[1]!==o?.length||n[2]!==d||n[3]!==c||n[4]!==s?(t=()=>{l&&!c&&(d?s("agents-not-supported"):o?.length||s("no-agents-available"))},n[0]=l,n[1]=o?.length,n[2]=d,n[3]=c,n[4]=s,n[5]=t):t=n[5],n[6]!==l||n[7]!==o||n[8]!==d||n[9]!==c||n[10]!==s?(a=[l,c,o,d,s],n[6]=l,n[7]=o,n[8]=d,n[9]=c,n[10]=s,n[11]=a):a=n[11],(0,b.useEffect)(t,a)}(o),!k||T){let e;return x[9]!==C?(e=(0,n.jsx)("div",{children:C}),x[9]=C,x[10]=e):e=x[10],e}x[11]!==R||x[12]!==S||x[13]!==w||x[14]!==L?(c=e=>{let{suggestion:t}=e,a="string"==typeof t?t:t.value;if((0,s.BI)("dotcom_chat.activate",{target:"AUTOCOMPLETE_ITEM_SELECTED",mode:R,suggestion:a}),"object"==typeof t&&L?.category==="commands")return void S?.(t.key);let n=null!==a&&L?.category!=="agents"?E.Q.parse(a):void 0;if(n&&w(n),"object"!=typeof t||null!==t.value)return;let r=/^open-link:(.+)$/.exec(t.key);if(r){P(null),window.open(r[1],"_blank");return}switch(L?.category){case"categories":let i;i=t.key,eA.some(e=>e.value===i)&&P(function(e){switch(e){case"repositories":return{category:"repositories",filter:""};case"agents":return{category:"agents",filter:""};case"repositories:discussions":return{category:"repositories",filter:"",nextCategory:"discussions"};case"repositories:issues":return{category:"repositories",filter:"",nextCategory:"issues"};case"repositories:pulls":return{category:"repositories",filter:"",nextCategory:"pulls"};case"repositories:files":return{category:"repositories",filter:"",nextCategory:"files"}}}(t.key));break;case"repositories":"sso-orgs"===t.key?P({category:"sso-orgs",filter:""}):L.nextCategory&&P({category:L.nextCategory,filter:"",repository:t.key})}},x[11]=R,x[12]=S,x[13]=w,x[14]=L,x[15]=c):c=x[15];let D=c;x[16]!==L?(d=e=>{let t=e.target;if("/"===e.trigger.triggerChar){(null===L&&1===t.selectionStart&&1===t.selectionEnd||L?.category==="commands")&&P({category:"commands",filter:e.query});return}P(a=>a?{...a,filter:e.query}:{category:"categories",filter:e.query,index:(t.selectionStart??0)-(e.query.length+e.trigger.triggerChar.length)})},x[16]=L,x[17]=d):d=x[17];let $=d;x[18]===Symbol.for("react.memo_cache_sentinel")?(m=()=>P(null),x[18]=m):m=x[18];let B=m;x[19]!==A||x[20]!==L?.category?(p=e=>{let{suggestion:t}=e;return!("object"==typeof t&&L?.category==="commands"&&void 0!==t.key&&W.W.askModeDropdown&&A.some(e=>e.name.toLowerCase()===t.key.toLowerCase()))&&!0},x[19]=A,x[20]=L?.category,x[21]=p):p=x[21];let U=p;return x[22]!==L?(f=L&&function(e){switch(e.category){case"categories":case"commands":return null;case"repositories":switch(e.nextCategory){case"discussions":case"issues":case"pulls":case"files":return`${eN[e.nextCategory]} \u{203A}`;default:return"Repositories \u203A"}case"agents":return eN[e.category];case"discussions":case"issues":case"pulls":case"files":return`${eN[e.category]} \u{203A} ${e.repository} \u{203A}`;case"sso-orgs":return"Single sign-on"}}(L)||void 0,x[22]=L,x[23]=f):f=x[23],x[24]!==C||x[25]!==D||x[26]!==$||x[27]!==U||x[28]!==O||x[29]!==f?(g=(0,n.jsx)(eT.a,{fullWidth:!0,suggestions:O,triggers:t,tabInsertsSuggestions:!1,onHideSuggestions:B,onShowSuggestions:$,onSelectSuggestion:D,shouldReplaceText:U,suggestionsPlacement:"below",title:f,asMenu:!0,children:C}),x[24]=C,x[25]=D,x[26]=$,x[27]=U,x[28]=O,x[29]=f,x[30]=g):g=x[30],x[31]!==F?(y=F&&(0,n.jsx)("span",{role:"status","aria-live":"polite",className:"sr-only",children:"Loading"}),x[31]=F,x[32]=y):y=x[32],x[33]!==g||x[34]!==y?(v=(0,n.jsxs)(n.Fragment,{children:[g,y]}),x[33]=g,x[34]=y,x[35]=v):v=x[35],v}function e6(){return"undefined"!=typeof document}try{e7.displayName||(e7.displayName="ChatInputAutocomplete")}catch{}let e8="ChatInput-module__chatForm--vnUAB",e9="ChatInput-module__input--HalEQ",te="ChatInput-module__container--qmP6j",tt="ChatInput-module__containerDisabled--bIHy2",ta="ChatInput-module__toolbar--Kv3Gl",tn="ChatInput-module__containerSmall--NfPkF",tr="ChatInput-module__inputContainer--cpjba",ti="ChatInput-module__inputPreview--Fdwj0",ts="ChatInput-module__clicked--u0igo",tl="ChatInput-module__submitButtonInForm--Il541",to="ChatInput-module__submitButtonOutsideForm--yYfFf",tc="ChatInput-module__attachments--Fv007",td="ChatInput-module__attachmentButton--qtFf6",tu="ChatInput-module__attachmentButtonText--fVuEs",tm="ChatInput-module__attachmentIconButton--IO4TP",tp="ChatInput-module__inputContainerNewConversation--FexlN",th="ChatInput-module__inputDisabled--QQiex",tf="ChatInput-module__toolbarNoModes--KJL2k",tg="ChatInput-module__extra--oQVm8",ty="ChatInput-module__CommandIconButton--lxm7H",tv="ChatInput-module__mode--dH9c4",tx="ChatInput-module__modeSelectButton--rJ86j",tb="ChatInput-module__actions--zbM52",tC="ChatInput-module__actionsMultiple--LHDC3",tS="ChatInput-module__toolbarButtons--YDoIY";var tw=a(16378),t_=a(6224);function tj(e){let t,a,i,s=(0,r.c)(8),{ref:o,text:c,availableCommandKeys:d}=e;s[0]!==c?(t=(0,tw._)(c),s[0]=c,s[1]=t):t=s[1];let{availableAgents:u}=(0,ec.JE)(t),{currentReferences:m}=(0,j.Pk)(),p=(0,I.b)(),h=(0,w.l)().use(T.U,{references:m,agents:void 0===u?[]:u,commands:d}).parse(c),f=(0,tw.O)(h),g=(0,b.useRef)(f);(0,b.useEffect)(function(){for(let e of g.current)if(!f.has(e)){let t=m.find(t=>(0,N.Vb)(t)===e);t&&p.removeReference(t)}g.current=f}),s[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.G)("copilot-chat-input-textarea-preview"),s[2]=a):a=s[2];let y=h.children.map(tI);return s[3]!==o||s[4]!==a||s[5]!==ti||s[6]!==y?(i=(0,n.jsx)("div",{id:"copilot-chat-textarea-preview",...a,"aria-hidden":!0,className:ti,ref:o,role:"presentation",children:y}),s[3]=o,s[4]=a,s[5]=ti,s[6]=y,s[7]=i):i=s[7],i}function tI(e,t){switch(e.type){case"text":return e.value;case"command":return(0,n.jsx)("span",{className:t_.A.command,...(0,l.G)("input-preview-command"),children:e.value},t);case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,n.jsx)("span",{className:t_.A.mention,...(0,l.G)("input-preview-ref"),children:e.value},t):e.value;case"agent-mention":return(0,n.jsx)("span",{className:t_.A.mention,children:e.value},t)}}try{tj.displayName||(tj.displayName="ChatInputPreview")}catch{}var tE=a(97068),tT=a(45800),tN=a(25536),tA=a(7730),tR=a(57448),tk=a(1631),tM=a(15518);let tL=(0,b.memo)(e=>{let t,a,i,s,o,c,d,m,f,C,S,w,_,E,T,A,R,k=(0,r.c)(52),{className:M,isLoading:L,returnFocusRef:P,tokenSize:O,onSelectReference:D,getReferenceVersion:$,showConvertToFileText:B,onConvertToFile:U,onConvertToFileDismiss:q,hideAttachmentsMenu:V,onRemoveReference:z}=e,H=void 0===O?"medium":O,{currentReferences:K,implicitReferences:G,selectedThreadID:Q}=(0,j.bP)("currentReferences","implicitReferences","selectedThreadID"),J=(0,I.b)(),X=(0,b.useRef)(null),Y=(0,tA.g)(X),[Z,ee]=(0,b.useState)(!1);if(k[0]!==K||k[1]!==Q){e:{let e=(0,N.rT)(K);if(W.W.copilotChatRepositoryPicker&&!Q){t=e.filter(tF);break e}t=e}k[0]=K,k[1]=Q,k[2]=t}else t=k[2];let et=t,{setSelectedCopilotSpaceId:ea}=(0,tN.O)(),en=(0,b.useRef)(null);k[3]===Symbol.for("react.memo_cache_sentinel")?(a={containerRef:en,focusableElementFilter:tD,bindKeys:tE.z0.ArrowHorizontal|tE.z0.HomeAndEnd,focusInStrategy:"previous",focusOutBehavior:"stop"},k[3]=a):a=k[3],k[4]!==et?(i=[et],k[4]=et,k[5]=i):i=k[5],(0,tT.G)(a,i),k[6]===Symbol.for("react.memo_cache_sentinel")?(s=[],k[6]=s):s=k[6];let er=(0,b.useRef)(s),ei=(e,t)=>{let a=er.current[t+1]??er.current[t-1]??P.current;a?.focus(),z?.(e),(0,N.yA)(e)&&ea(void 0),J.removeReference(e)};k[7]!==J||k[8]!==P||k[9]!==et||k[10]!==ea?(o=()=>{setTimeout(()=>P.current?.focus()),et.filter(N.yA).length>0&&ea(void 0),J.clearCurrentReferences()},k[7]=J,k[8]=P,k[9]=et,k[10]=ea,k[11]=o):o=k[11];let es=o,el=(0,b.useRef)(et);k[12]!==et?(c=()=>{if(el.current.length<et.length){let e=et.find(e=>!el.current.find(t=>(0,N.x_)(t,e))),t=e?et.indexOf(e):-1;er?.current?.[t]?.scrollIntoView({behavior:"smooth",block:"nearest",inline:"end"})}el.current=et},d=[et],k[12]=et,k[13]=c,k[14]=d):(c=k[13],d=k[14]),(0,F.N)(c,d),k[15]!==q?(m=()=>{q?.()},k[15]=q,k[16]=m):m=k[16];let eo=m;k[17]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{ee(t$)},k[17]=f):f=k[17];let ec=f,ed=function(e,t,a,n){let i,s,l,o,c,d=(0,r.c)(14),[u,m]=(0,b.useState)(!1);d[0]!==n||d[1]!==t?(i=()=>{t.current&&m(t.current.some(e=>{if(!e)return!1;let t=e.querySelector(n);return!!t&&t.scrollWidth>t.clientWidth}))},d[0]=n,d[1]=t,d[2]=i):i=d[2];let p=i;return d[3]!==p||d[4]!==e.length?(s=()=>{if(0===e.length)return void m(!1);let t=requestAnimationFrame(p);return()=>cancelAnimationFrame(t)},d[3]=p,d[4]=e.length,d[5]=s):s=d[5],d[6]!==p||d[7]!==e?(l=[e,p],d[6]=p,d[7]=e,d[8]=l):l=d[8],(0,b.useEffect)(s,l),d[9]!==p||d[10]!==a||d[11]!==e.length?(o=()=>{if(0===e.length||!a.current)return;let t=new ResizeObserver(()=>{p()});return t.observe(a.current),()=>{t.disconnect()}},c=[e.length,p,a],d[9]=p,d[10]=a,d[11]=e.length,d[12]=o,d[13]=c):(o=d[12],c=d[13]),(0,b.useEffect)(o,c),u}(et,er,en,`.${tM.A.name}`),eu=(0,b.useId)();k[18]!==eo||k[19]!==B?(C=e=>{("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),e.stopPropagation(),B&&eo())},k[18]=eo,k[19]=B,k[20]=C):C=k[20];let em=C;if(0===et.length&&!L&&!B)return null;k[21]!==M?(S=(0,x.$)(M,"ChatInputReferences-module__container--bNybl"),k[21]=M,k[22]=S):S=k[22];let ep=Y&&"ChatInputReferences-module__scrolledToEnd--DONiv",eh=L&&"ChatInputReferences-module__loading--kAJlw";k[23]!==ep||k[24]!==eh?(w=(0,x.$)("ChatInputReferences-module__attachmentsList--mEJpJ",ep,eh),k[23]=ep,k[24]=eh,k[25]=w):w=k[25],k[26]!==eu||k[27]!==eo||k[28]!==U||k[29]!==em||k[30]!==B||k[31]!==H?(_=B&&(0,n.jsxs)("div",{className:"ChatInputReferences-module__convertToFileContainer--y1XOU",children:[(0,n.jsx)(y.Q,{onClick:U,leadingVisual:u.FileIcon,className:"ChatInputReferences-module__convertToFileButton--hnPn2","aria-describedby":eu,onKeyDown:em,children:"Convert to file"}),(0,n.jsx)(tk.lh,{size:H,onRemove:eo,descriptionId:eu})]}),k[26]=eu,k[27]=eo,k[28]=U,k[29]=em,k[30]=B,k[31]=H,k[32]=_):_=k[32];let ef=et.map((e,t)=>"repository"===e.type?(0,n.jsx)(tP,{reference:e,ref:e=>{er.current[t]=e},"data-index":t,size:H,fullWidth:Z,onRemove:()=>ei(e,t),onClick:D,getReferenceVersion:$},(0,N.Vb)(e)):(0,n.jsx)(tk.BR,{reference:e,ref:e=>{er.current[t]=e},"data-index":t,size:H,fullWidth:Z,onRemove:()=>ei(e,t),onClick:D,getReferenceVersion:$,isImplicitReference:G.has(e)},(0,N.Vb)(e)));return k[33]!==L?(E=L&&(0,n.jsxs)("div",{className:"ChatInputReferences-module__functionLoading--Oimop",...(0,l.G)("loading-indicator"),children:[(0,n.jsx)(v.A,{size:"small"}),"Retrieving\u2026"]}),k[33]=L,k[34]=E):E=k[34],k[35]!==w||k[36]!==_||k[37]!==ef||k[38]!==E?(T=(0,n.jsxs)("div",{className:w,ref:X,children:[_,ef,E]}),k[35]=w,k[36]=_,k[37]=ef,k[38]=E,k[39]=T):T=k[39],k[40]!==ec||k[41]!==ed||k[42]!==V||k[43]!==es||k[44]!==et.length||k[45]!==Z||k[46]!==H?(A=et.length>0&&!V&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"ChatInputReferences-module__divider--k8d6S"}),(0,n.jsxs)(p.W,{children:[(0,n.jsx)(p.W.Anchor,{children:(0,n.jsx)(g.K,{icon:u.KebabHorizontalIcon,"aria-label":"Attachments options",variant:"invisible",tooltipDirection:"n",className:"ChatInputReferences-module__menuButton--IVLqN",size:H})}),(0,n.jsx)(p.W.Overlay,{width:"small",children:(0,n.jsxs)(h.l,{children:[ed&&(0,n.jsxs)(h.l.Item,{onSelect:ec,children:[(0,n.jsx)(h.l.LeadingVisual,{children:Z?(0,n.jsx)(u.EyeClosedIcon,{}):(0,n.jsx)(u.EyeIcon,{})}),Z?"Hide full attachment names":"Show full attachment names"]}),(0,n.jsxs)(h.l.Item,{onSelect:es,children:[(0,n.jsx)(h.l.LeadingVisual,{children:(0,n.jsx)(u.TrashIcon,{})}),"Remove attachments"]})]})})]})]}),k[40]=ec,k[41]=ed,k[42]=V,k[43]=es,k[44]=et.length,k[45]=Z,k[46]=H,k[47]=A):A=k[47],k[48]!==S||k[49]!==T||k[50]!==A?(R=(0,n.jsxs)("div",{role:"toolbar","aria-label":"Attachments",className:S,ref:en,children:[T,A]}),k[48]=S,k[49]=T,k[50]=A,k[51]=R):R=k[51],R});function tP(e){let t,a,i,s,l,o=(0,r.c)(11);o[0]!==e?({ref:a,...t}=e,o[0]=e,o[1]=t,o[2]=a):(t=o[1],a=o[2]);let c=t.reference,d=(0,j.pn)(tO),u=`${c.ownerLogin}/${c.name}`,[m,p]=(0,tR.vn)(u),h=(0,b.useRef)(!1),f=m.code===tR.W5.Unindexed||m.docs===tR.W5.Unindexed;return o[3]!==d||o[4]!==f||o[5]!==p?(i=function(){!h.current&&f&&d&&(h.current=!0,p())},s=[d,f,p],o[3]=d,o[4]=f,o[5]=p,o[6]=i,o[7]=s):(i=o[6],s=o[7]),(0,b.useEffect)(i,s),o[8]!==t||o[9]!==a?(l=(0,n.jsx)(tk.BR,{...t,ref:a}),o[8]=t,o[9]=a,o[10]=l):l=o[10],l}function tO(e){return e.model&&!e.model.hasLimitedCapabilities}tL.displayName="ChatInputReferences";try{tP.displayName||(tP.displayName="RepoReferenceToken")}catch{}function tF(e){return"repository"!==e.type}function tD(e){return!e.hasAttribute("aria-hidden")}function t$(e){return!e}var tW=a(46642),tB=a(92352);function tU(){let e,t,a,i,l,o,c,d,m=(0,r.c)(21),p=(0,I.b)(),{currentReferences:h,currentRepository:f,mode:g}=(0,j.bP)("currentReferences","currentRepository","mode");m[0]!==h?(e=h.filter(tH),m[0]=h,m[1]=e):e=m[1];let y=e;if(m[2]!==y){for(let e of(t=[],y))t.push({id:e.id,name:`${e.ownerLogin}/${e.name}`,enabled:!0,private:"public"!==e.visibility});m[2]=y,m[3]=t}else t=m[3];let v=t;m[4]!==f?(a=async e=>{let t=f?`${f.ownerLogin}/${f.name}`:void 0;return(await (0,tB.P)(e,void 0,t)).filter(tz).map(tV)},m[4]=f,m[5]=a):a=m[5];let x=a;m[6]!==p||m[7]!==g||m[8]!==y?(i=async e=>{if(!e){for(let e of y)p.removeReference(e),(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",action:"removed",component:"REPOSITORY_PICKER",mode:g});return}let t=new Set(e.map(tq));for(let e of y)t.has(e.id)||(p.removeReference(e),(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",action:"removed",component:"REPOSITORY_PICKER",mode:g}));for(let t of e)if(!y.some(e=>e.id===t.id)&&null!=t.id){let e=await p.service.fetchRepo(t.id);if(e.ok){let t=(0,N.qS)(e.payload);p.addReference(t,"repoMenu"),(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",action:"selected",component:"REPOSITORY_PICKER",mode:g})}}},m[6]=p,m[7]=g,m[8]=y,m[9]=i):i=m[9];let b=i;e:{let e=v.length;if(0===e){l="All repositories";break e}if(1===e){l=v[0]?.name||"Select repositories";break e}l=`${e} repositories`}let C=l,S=0===v.length?u.GlobeIcon:u.RepoIcon;return m[10]!==S?(o={leadingVisual:S,trailingAction:null,"aria-label":"Select repositories to attach to conversation"},m[10]=S,m[11]=o):o=m[11],m[12]!==g?(c=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",action:"open",component:"REPOSITORY_PICKER",mode:g})},m[12]=g,m[13]=c):c=m[13],m[14]!==C||m[15]!==b||m[16]!==x||m[17]!==v||m[18]!==o||m[19]!==c?(d=(0,n.jsx)(tW.P,{repositoryLoader:x,selectionVariant:"multiple",selectAllOption:!1,onSelect:b,liveSelection:!0,currentSelection:v,width:"medium",buttonText:C,additionalButtonProps:o,onOpen:c}),m[14]=C,m[15]=b,m[16]=x,m[17]=v,m[18]=o,m[19]=c,m[20]=d):d=m[20],d}function tq(e){return e.id}function tV(e){return{id:e.id,name:e.nameWithOwner,enabled:!0,private:e.private}}function tz(e){return null!=e.id}function tH(e){return"repository"===e.type}try{tU.displayName||(tU.displayName="ChatReposPicker")}catch{}var tK=a(81829);let tG=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("svg",{"aria-label":"Tool",xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",fill:"none",viewBox:"0 0 17 16",children:(0,n.jsx)("path",{fill:"currentColor",d:"M6.146 2.344A6 6 0 0 1 11.44.679c.659.117 1.087.598 1.21 1.155a1.68 1.68 0 0 1-.47 1.544L10.19 5.371a.25.25 0 0 0-.069.224l.17.89c.02.101.098.18.198.199l.891.17a.25.25 0 0 0 .224-.069l1.994-1.993a1.68 1.68 0 0 1 1.544-.469 1.48 1.48 0 0 1 1.155 1.211 6 6 0 0 1-1.665 5.295 6 6 0 0 1-5.553 1.614c-.182-.041-.312.015-.37.076l-2.24 2.47a.75.75 0 0 1-1.11-1.007l2.249-2.48c.488-.527 1.199-.658 1.797-.524a4.5 4.5 0 0 0 4.166-1.21 4.5 4.5 0 0 0 1.249-3.972l-.003-.008c-.028-.005-.094 0-.159.065l-1.994 1.993c-.41.41-.996.59-1.565.481l-.89-.17a1.75 1.75 0 0 1-1.392-1.39l-.17-.89a1.75 1.75 0 0 1 .482-1.566l1.993-1.993c.065-.065.07-.132.065-.16l-.008-.003a4.5 4.5 0 0 0-3.972 1.25 4.5 4.5 0 0 0-1.21 4.165c.133.599.004 1.31-.522 1.797l-.007.006-2.474 2.244a.75.75 0 0 1-1.008-1.111l2.47-2.24c.061-.058.118-.187.077-.37a6 6 0 0 1 1.614-5.552"})}),t[0]=e):e=t[0],e};try{tG.displayName||(tG.displayName="MCPIcon")}catch{}var tQ=a(97793),tJ=a(97665),tX=a(31604),tY=a(30093),tZ=a(60569),t0=a(76720);let t1=({anchorRef:e,open:t,onOpenChange:a})=>{let[r,i]=(0,b.useState)(!1),[s,l]=(0,b.useState)(""),[o,c]=(0,b.useState)(null),[d,m]=(0,b.useState)(()=>new Set),{service:p}=(0,I.b)(),h=(0,tJ.jE)(),{data:f,isPending:g,isError:x}=(0,eG.I)({enabled:t,queryKey:["copilot-chat-mcps"],queryFn:async()=>p.fetchMCPServers(),placeholderData:e=>e}),C=(0,b.useMemo)(()=>f||[],[f]),S=(0,b.useMemo)(()=>C.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())),[C,s]),w=e=>{m(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tX.T,{open:t,onOpen:()=>a(!0),onClose:()=>a(!1),anchorRef:e,side:"outside-bottom",align:"end",renderAnchor:()=>(0,n.jsx)(n.Fragment,{}),width:"medium",children:(0,n.jsxs)("div",{className:"McpToolsManager-module__container--PHa2N",children:[(0,n.jsxs)("div",{className:"McpToolsManager-module__header--PXzkx",children:[(0,n.jsx)("div",{className:"McpToolsManager-module__headerTitle--CiuwN",children:"MCP tools"}),(0,n.jsx)(tY.A,{placeholder:"Search by provider",value:s,onChange:e=>l(e.target.value),className:"McpToolsManager-module__searchInput--v2pAX",leadingVisual:u.SearchIcon})]}),(0,n.jsx)("div",{className:"McpToolsManager-module__contentArea--aqxn4",children:g?(0,n.jsx)("div",{className:"McpToolsManager-module__loadingContainer--btAEV",children:(0,n.jsx)(v.A,{})}):x?(0,n.jsxs)(t0.E,{children:[(0,n.jsx)(t0.E.Visual,{children:"\u26A0\uFE0F"}),(0,n.jsx)(t0.E.Heading,{children:"Error loading tools"})]}):0===C.length?(0,n.jsxs)("div",{className:"McpToolsManager-module__emptyState--qpgwB",children:[(0,n.jsx)(u.ToolsIcon,{size:24}),(0,n.jsx)("div",{className:"McpToolsManager-module__emptyStateTitle--PLCEY",children:"You don't have any MCP tools configured"}),(0,n.jsx)("div",{className:"McpToolsManager-module__emptyStateDescription--x7TOI",children:"Add one to connect models to files, APIs, databases, and more."})]}):(0,n.jsx)(tZ.G,{"aria-label":"MCP server selection",children:S.map(e=>{let t;return(0,n.jsxs)(tZ.G.Item,{id:e.id,onSelect:()=>{var t;c(t=e.id),w(t)},expanded:d.has(e.id),onExpandedChange:()=>w(e.id),current:o===e.id,"aria-selected":o===e.id,children:[(0,n.jsx)("span",{className:"McpToolsManager-module__serverName--au45P",children:e.name}),e.tools&&e.tools.length>0?(0,n.jsx)(tZ.G.SubTree,{children:(t=e.tools).length>0&&"object"==typeof t[0]&&"name"in t[0]?e.tools.map(t=>{let a=`${e.id}-${t.name}`,r=o===a;return(0,n.jsx)(tZ.G.Item,{id:a,current:r,"aria-selected":r,onSelect:()=>{!r&&W.W.mcpToolDescriptions?c(a):c(null)},children:W.W.mcpToolDescriptions?(0,n.jsxs)("div",{className:"McpToolsManager-module__toolItem--Eo5Ka",children:[(0,n.jsxs)("div",{className:"McpToolsManager-module__toolNameContainer--VKNAW",children:[r?(0,n.jsx)(u.DashIcon,{size:12}):(0,n.jsx)(u.PlusIcon,{size:12}),(0,n.jsx)("span",{className:"McpToolsManager-module__toolName--EL2OQ",children:t.name})]}),t.description&&r&&(0,n.jsx)("div",{className:"McpToolsManager-module__toolDescription--nn86Q",children:t.description})]}):t.name},t.name)}):e.tools.map(t=>{let a=`${e.id}-${t}`;return(0,n.jsx)(tZ.G.Item,{id:a,onSelect:()=>c(a),current:o===a,"aria-selected":o===a,children:t},t)})}):null]},e.id)})})}),(0,n.jsx)("div",{className:"McpToolsManager-module__footer--UZmCo",children:(0,n.jsx)(y.Q,{variant:"default",leadingVisual:u.PlusIcon,onClick:()=>{i(!0)},block:!0,children:"New tool"})})]})},"mcp-tool-manager"),(0,n.jsx)(tQ.O,{isOpen:r,onClose:()=>{i(!1)},onServerAdded:()=>{h.invalidateQueries({queryKey:["copilot-chat-mcps"]})}})]})};try{t1.displayName||(t1.displayName="McpToolsManager")}catch{}let t2=()=>{let e,t=(0,r.c)(2),[a,i]=(0,b.useState)(!1),s=(0,b.useRef)(null);return t[0]!==a?(e=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.K,{ref:s,icon:tG,variant:"invisible","aria-label":"MCP tools",onClick:()=>i(!a)}),(0,n.jsx)(t1,{anchorRef:s,open:a,onOpenChange:i})]}),t[0]=a,t[1]=e):e=t[1],e};try{t2.displayName||(t2.displayName="McpToolMenu")}catch{}var t5=a(12970);let t3=e=>{let t,a,i,s,l,o,c,d,u,m,p,h,f,g,y,v,b,C=(0,r.c)(34);if(C[0]!==e){let{ref:n,icon:r,isSelected:m,onClick:p,hasMenu:h,isMenuOpen:f,selectedItemLabel:g,children:y,...v}=e;c=n,i=r,o=p,d=g,t=y,l=void 0!==m&&m,a=void 0!==h&&h,s=void 0!==f&&f,u=Object.keys(v).reduce((e,t)=>(t.startsWith("aria-")&&(e[t]=v[t]),e),{}),C[0]=e,C[1]=t,C[2]=a,C[3]=i,C[4]=s,C[5]=l,C[6]=o,C[7]=c,C[8]=d,C[9]=u}else t=C[1],a=C[2],i=C[3],s=C[4],l=C[5],o=C[6],c=C[7],d=C[8],u=C[9];let S=u;C[10]!==a||C[11]!==s||C[12]!==l?(m=()=>a?{"aria-haspopup":"menu","aria-expanded":s}:{"aria-pressed":l},C[10]=a,C[11]=s,C[12]=l,C[13]=m):m=C[13];let w=m;C[14]!==w?(p=w(),C[14]=w,C[15]=p):p=C[15],C[16]!==S||C[17]!==p?(h={...S,...p},C[16]=S,C[17]=p,C[18]=h):h=C[18];let _=h,j=a&&d?d:t;C[19]!==o?(f=e=>{o&&o(e)},C[19]=o,C[20]=f):f=C[20];let I=f,E=l&&"ToggleButton-module__selected--fx0LM";return C[21]!==E?(g=(0,x.$)("ToggleButton-module__toggleButton--JlWKX",E),C[21]=E,C[22]=g):g=C[22],C[23]!==i?(y=!!i&&(0,n.jsx)("span",{className:"ToggleButton-module__icon--mJLXC",children:i}),C[23]=i,C[24]=y):y=C[24],C[25]!==j?(v=(0,n.jsx)("span",{className:"ToggleButton-module__textContent--xX6cl",children:j}),C[25]=j,C[26]=v):v=C[26],C[27]!==_||C[28]!==I||C[29]!==c||C[30]!==g||C[31]!==y||C[32]!==v?(b=(0,n.jsxs)("button",{ref:c,type:"button",className:g,onClick:I,..._,children:[y,v]}),C[27]=_,C[28]=I,C[29]=c,C[30]=g,C[31]=y,C[32]=v,C[33]=b):b=C[33],b};t3.displayName="ToggleButton";var t4=a(11196);function t7(){let e,t,a,i=(0,r.c)(8),s=(0,I.b)(),{usePlanningIntent:l,selectedThreadID:o}=(0,j.bP)("usePlanningIntent","selectedThreadID");i[0]!==s||i[1]!==l?(e=()=>s.setUsePlanningIntent(!l),i[0]=s,i[1]=l,i[2]=e):e=i[2];let c=e;if(o){let e;return i[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(t4.m,{text:"Planning mode is enabled and cannot be toggled after the conversation has started.",children:(0,n.jsx)(y.Q,{leadingVisual:u.TasklistIcon,inactive:!0,"aria-disabled":!0,"aria-pressed":!0,children:"Plan"})}),i[3]=e):e=i[3],e}return i[4]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(u.TasklistIcon,{}),i[4]=t):t=i[4],i[5]!==c||i[6]!==l?(a=(0,n.jsx)(t3,{icon:t,isSelected:l,onClick:c,children:"Plan"}),i[5]=c,i[6]=l,i[7]=a):a=i[7],a}try{t7.displayName||(t7.displayName="PlanningIntentToggle")}catch{}let t6=["github:cancel","copilot-chat:send-message","copilot-chat:edit-last-message"],t8="Start a pull request",t9=e=>{let t,a,u,p,h,f,g,y,v,U,et,ea,en,er,ei,es,el,eo,ec,ed,eu,em,ep,eh,ef,eg,ey,ev,ex,eb,eC,eS,ew,e_,ej,eI,eT,eN,eA,eR,ek,eM,eL,eP,eO,eF,eD,e$,eW,eB,eU,eq,eV,ez,eH,eK,eG,eQ=(0,r.c)(281),eJ=(0,j.bP)("defaultRecipient","isWaitingOnAttachment","attachmentProcessingType","isWaitingOnCopilot","messages","mode","model","selectedThreadID","skillOptions","slashCommandLoading","thirdPartyMcpAllowed"),{model:eX}=eJ,eY=(0,ee.tD)(),eZ=(0,I.b)(),e0=eZ.maxMessagesReached(),[e1,e2]=(0,b.useState)(null),e5="loading"===eJ.slashCommandLoading.state,{safeSetTimeout:e3}=(0,m.A)(),{onSelectReference:e4,containerRef:e6,shouldClearTextOnCommandSubmit:ta,shouldClearTextOnSubmit:ti,slashCommandsEnabled:ts}=e,tl=void 0===ta||ta,td=void 0===ti||ti,tu=void 0!==ts&&ts,tm=(0,b.useRef)(null),tf=(0,b.useRef)(""),tg=(0,b.useRef)(!1),ty=(0,c.Z)();eQ[0]!==tu?(t={enabled:tu},eQ[0]=tu,eQ[1]=t):t=eQ[1];let{availableCommands:tv,availableCommandKeys:tx}=(0,L.j)(t);eQ[2]!==tv?(a=tv.map(an).filter(ar),eQ[2]=tv,eQ[3]=a):a=eQ[3];let tb=a,tC=W.W.askModeDropdown&&tb.length>0?tb:e.modes;eQ[4]!==tC||eQ[5]!==e.activeModeName?(u=()=>{if(e.activeModeName){let t=tC.find(t=>t.name===e.activeModeName);if(t)return t}let t=B.Jt.getActiveMode();if(t){let e=tC.find(e=>e.name===t);if(e)return e}return tC[0]},eQ[4]=tC,eQ[5]=e.activeModeName,eQ[6]=u):u=eQ[6];let[tS,tw]=(0,b.useState)(u);eQ[7]!==e?(p=(t,a)=>{e.onClickMode?.(t.name),e.activeModeName||tw(t),B.Jt.setActiveMode(t.name),(0,s.BI)("dotcom_chat.activate",{target:"MODE_SWITCH",mode:t.name,autoComplete:a})},eQ[7]=e,eQ[8]=p):p=eQ[8];let t_=p,{activeCopilotSpaceId:tI}=(0,i.C)();eQ[9]!==tS||eQ[10]!==tC||eQ[11]!==e.activeModeName?(h=W.W.askModeDropdown?tS:tC.find(t=>t.name===e.activeModeName)||tC[0],eQ[9]=tS,eQ[10]=tC,eQ[11]=e.activeModeName,eQ[12]=h):h=eQ[12];let tE=h;eQ[13]!==tC||eQ[14]!==t_?(f=e=>{if(W.W.askModeDropdown){let t=tC.find(t=>t?.name===e);t&&t_(t)}},eQ[13]=tC,eQ[14]=t_,eQ[15]=f):f=eQ[15];let tT=f;eQ[16]!==eZ||eQ[17]!==e.initialReference?(y=()=>{e.initialReference&&eZ.addReference(e.initialReference,"page-file-reference")},g=[e.initialReference,eZ],eQ[16]=eZ,eQ[17]=e.initialReference,eQ[18]=g,eQ[19]=y):(g=eQ[18],y=eQ[19]),(0,b.useEffect)(y,g),eQ[20]!==tS||eQ[21]!==tC||eQ[22]!==e.activeModeName?(v=()=>{if(e.activeModeName){let t=tC.find(t=>t.name===e.activeModeName);t&&t!==tS&&tw(t)}},U=[e.activeModeName,tC,tS],eQ[20]=tS,eQ[21]=tC,eQ[22]=e.activeModeName,eQ[23]=v,eQ[24]=U):(v=eQ[23],U=eQ[24]),(0,b.useEffect)(v,U),eQ[25]!==tS||eQ[26]!==tC?(et=()=>{let e=tC.find(e=>e.name===tS.name);e&&e!==tS&&tw(e)},ea=[tC,tS],eQ[25]=tS,eQ[26]=tC,eQ[27]=et,eQ[28]=ea):(et=eQ[27],ea=eQ[28]),(0,b.useEffect)(et,ea),eQ[29]!==e1||eQ[30]!==eJ.mode?(en=e=>{tm.current=null,tf.current="",tg.current=!1,e1&&(e2(null),void 0!==e&&e&&(0,s.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_DISMISS",mode:eJ.mode}))},eQ[29]=e1,eQ[30]=eJ.mode,eQ[31]=en):en=eQ[31];let tN=en,tA=eJ.isWaitingOnCopilot||eJ.isWaitingOnAttachment||e5,tR=tE?.name;eQ[32]!==tv||eQ[33]!==tN||eQ[34]!==e.disableSavedUserMessage||eQ[35]!==e.initialText||eQ[36]!==e.isInPortal||eQ[37]!==e.onChatCommandChange||eQ[38]!==e.onSubmit||eQ[39]!==e.storageKeySuffix||eQ[40]!==e.textAreaRef||eQ[41]!==tl||eQ[42]!==td||eQ[43]!==tA||eQ[44]!==tR?(er={isLoading:tA,onSubmit:e.onSubmit,textAreaRef:e.textAreaRef,clearPastedFile:tN,onChatCommandChange:e.onChatCommandChange,disableSavedUserMessage:e.disableSavedUserMessage,isInPortal:e.isInPortal,shouldClearTextOnCommandSubmit:tl,shouldClearTextOnSubmit:td,availableCommands:tv,activeModeName:tR,storageKeySuffix:e.storageKeySuffix,initialText:e.initialText},eQ[32]=tv,eQ[33]=tN,eQ[34]=e.disableSavedUserMessage,eQ[35]=e.initialText,eQ[36]=e.isInPortal,eQ[37]=e.onChatCommandChange,eQ[38]=e.onSubmit,eQ[39]=e.storageKeySuffix,eQ[40]=e.textAreaRef,eQ[41]=tl,eQ[42]=td,eQ[43]=tA,eQ[44]=tR,eQ[45]=er):er=eQ[45];let{typingHasStarted:tk,textAreaRef:tM,textareaPreviewRef:tP,textAreaPreviewContainerRef:tO,text:tF,setText:tD,isAgentTaskSubmitInProgress:t$,handleSubmit:tW,handleSubmitToNewThread:tU,handleScroll:tq,handleChange:tV,handleStop:tz,handleFocus:tH,command:tG,setLastUsedRepo:tQ,selectedRepo:tJ,setSelectedRepo:tX,selectedBranch:tY,setSelectedBranch:tZ,selectedAgent:t0,setSelectedAgent:t1,initialRepoNWO:t2}=function(e){let t=(0,j.Pk)(),a=(0,I.b)(),n=(0,c.Z)(),{selectedThreadID:r,mode:i,autoSubmit:l,model:o}=t,{activeModeName:d,clearPastedFile:u,isLoading:p,onSubmit:h,onChatCommandChange:f,disableSavedUserMessage:g,isInPortal:y,shouldClearTextOnCommandSubmit:v=!0,shouldClearTextOnSubmit:x=!0,availableCommands:C=[],storageKeySuffix:S}=e,w=S??r,_=B.Jt.getSavedMessage(w),E=B.Jt.getSavedUserMessageOnError(w),{pathname:T}=(0,O.zy)(),[N,A]=(0,O.ok)(),[R,k]=(0,b.useState)(()=>{if(e.initialText)return e.initialText;let a=G(t.mode,T,N);return g?a??"":a??E??_??""}),[M,L]=(0,b.useState)(!1),[U,Q]=(0,b.useState)(null),[J,X]=(0,b.useState)(!1),Y=(0,b.useRef)(null),Z=e.textAreaRef||Y,ee=(0,b.useRef)(null),et=(0,b.useRef)(null),ea=(0,b.useRef)(0),en=(0,b.useRef)(null),er=(0,b.useRef)(()=>{}),ei=(0,b.useRef)(!1),es=(0,V.GF)(t.availableModels),el=(0,b.useRef)(w),{safeSetTimeout:eo}=(0,m.A)(),ec=(0,b.useRef)(0),[ed,eu]=(0,H.T)(),[em,ep]=(0,b.useState)(void 0),eh=t.currentReferences.find(e=>"repository"===e.type),ef=eh?`${eh.ownerLogin}/${eh.name}`:`${ed?.ownerLogin}/${ed?.name}`,eg=(0,b.useCallback)(e=>{ep(e)},[]),[ey,ev]=(0,b.useState)(void 0),[ex,eb]=(0,P.s)();(0,b.useEffect)(()=>{W.W.stableConversationView?w===el.current?B.Jt.setSavedMessage(w,R):(k(B.Jt.getSavedMessage(w)||""),el.current=w):B.Jt.setSavedMessage(w,R)},[w,R]),(0,F.N)(()=>{let e=0;!function t(){if(!Z.current||!et.current||!ee.current)return;if(e++,(y||"assistive"===i)&&0===Z.current.scrollHeight&&e<10)return void eo(t,1);if(0===R.length&&56===ec.current)return;Z.current.style.height="0";let a=Math.max(Z.current.scrollHeight,56),n=Math.min(a,300);ee.current.style.height=`${a}px`,Z.current.style.height=`${a}px`,et.current.style.height=`${n}px`,ec.current=n}()},[i,eo,R,Z,ee,y,d]);let eC=(0,b.useCallback)(()=>{Z?.current&&ee?.current&&et?.current&&(ee.current.scrollTop=Z.current.scrollTop,ee.current.scrollLeft=Z.current.scrollLeft)},[Z]),eS=(0,b.useMemo)(()=>t.currentReferences.filter(e=>!("isClientOnly"in e)||!e.isClientOnly),[t.currentReferences]),ew=(0,b.useCallback)(async e=>{X(!1),B.Jt.clearSavedUserMessage(w),B.Jt.clearSavedUserMessageOnError(w),t.defaultRecipient&&!R.includes(`@${t.defaultRecipient}`)&&a.clearDefaultRecipient(),e?.preventDefault();let r=K(d,U);if(r&&em?.id!=null){let e=await a.service.fetchRepo(em.id);e.ok&&e.payload&&eu(e.payload)}if(await q(R,t,a,n,C,d,r?{selectedRepo:em,selectedBranch:ey,selectedAgent:ex}:{})){if("/new"===R.trim()&&B.Jt.setSavedMessageFast(w,null),v)k("");else{let e=R.substring(R.indexOf(" ")+1).trim();L(!0),k(`Creating ${e}...`)}return}if(!p){let e=R;if(!e){let[t,n]=a.tryInferMessage(eS);if(!t||!n)return;e=n}d===$.II.CreateIssue&&(e=`/create-issue ${e}`);try{x?k(""):(L(!0),k(`Creating ${R}...`));let t=[];if(r&&em){let a={type:"task-request",description:e,repoOwner:em.owner,repoName:em.nameOnly,ref:ey||em.defaultBranch,customAgent:ex.subAgentSlug,agentId:ex.topLevelAgentId};t.push(a)}await h?.(e,t.length>0?t:void 0),x||B.Jt.clearSavedUserMessage(w)}catch(t){if(L(!1),t instanceof z.q)return void k(e);throw t}}},[w,t,R,d,U,em,a,n,C,ey,ex,p,eu,v,eS,x,h]),e_=(0,b.useCallback)(()=>a.sendMessageToNewThread(w,R,eS,t.context,es),[a,w,t.context,eS,R,es]);(0,b.useEffect)(()=>{(async()=>{let e=G(i,T,N),t=new URLSearchParams(N),a=t.get("model"),n=!a||a===o.id;e&&n&&!ei.current&&(t.delete("prompt"),t.delete("model"),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_PROMPT_LOADED_FROM_URL",mode:"immersive"}),A(t,{replace:!0}),l&&(ei.current=!0,await Promise.resolve(),await ew()))})()},[T,N,A,i,l,o,ew]);let ej=(0,b.useCallback)(e=>{X(!0),Z?.current&&(k(e.target.value),u?.(),ea.current=0,eC())},[eC,u,Z]),eI=(0,b.useCallback)(async()=>{await a.stopStreaming(),null!=w&&(a.startThreadReload(),await new Promise(e=>{en.current=setTimeout(()=>e(w),6e3)}),er.current=await a.fetchMessages(w,!0,!0))},[a,w]);return(0,b.useEffect)(()=>{er.current&&(er.current(),er.current=()=>{})},[t.messages]),(0,b.useEffect)(()=>()=>{en.current&&(clearTimeout(en.current),en.current=null),a.cancelThreadReload(),er.current=()=>{}},[a]),(0,b.useEffect)(()=>{if(0===C.length&&!W.W.taskWithinChatThread)return;let e=(0,D.V)(R,C.map(e=>e.key));U!==e&&(Q(e),f?.(e))},[R,U,f,C]),{typingHasStarted:J,textAreaRef:Z,textareaPreviewRef:ee,textAreaPreviewContainerRef:et,text:R,setText:k,isAgentTaskSubmitInProgress:M,command:U,setCommand:Q,handleSubmit:ew,handleSubmitToNewThread:e_,handleScroll:eC,handleChange:ej,handleStop:eI,handleFocus:e=>{e.currentTarget.selectionStart>0||e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)},lastUsedRepo:ed,setLastUsedRepo:eu,selectedRepo:em,setSelectedRepo:eg,selectedBranch:ey,setSelectedBranch:ev,selectedAgent:ex,setSelectedAgent:eb,initialRepoNWO:ef}}(er);if(eQ[46]!==tS||eQ[47]!==tv||eQ[48]!==t_||eQ[49]!==tD||eQ[50]!==tF?(ei=()=>{if(tF.startsWith("/task ")&&W.W.askModeDropdown){let e=tv.find(ai);e?.mode&&e.mode!==tS&&(t_(e.mode,!0),tD(tF.slice(6)))}},es=[tF,tv,tS,tD,t_],eQ[46]=tS,eQ[47]=tv,eQ[48]=t_,eQ[49]=tD,eQ[50]=tF,eQ[51]=ei,eQ[52]=es):(ei=eQ[51],es=eQ[52]),(0,b.useEffect)(ei,es),eQ[53]!==tS.name||eQ[54]!==tv||eQ[55]!==tG){let e;eQ[57]!==tS.name||eQ[58]!==tG?(e=e=>e.key===tG||e.mode?.name===tS.name,eQ[57]=tS.name,eQ[58]=tG,eQ[59]=e):e=eQ[59],el=tv.find(e),eQ[53]=tS.name,eQ[54]=tv,eQ[55]=tG,eQ[56]=el}else el=eQ[56];let t5=el,t3=t5?.customModelPicker??e.customModelPicker,t4=e.disabled||t$||e0;eQ[60]!==tD?(eo=()=>({setText:tD}),ec=[tD],eQ[60]=tD,eQ[61]=eo,eQ[62]=ec):(eo=eQ[61],ec=eQ[62]),(0,b.useImperativeHandle)(e.chatInputRef,eo,ec),eQ[63]!==tV||eQ[64]!==tM?(ed={inputRef:tM,fallbackEventHandler:tV},eQ[63]=tV,eQ[64]=tM,eQ[65]=ed):ed=eQ[65];let t7=(0,d.H)(ed);eQ[66]!==t7||eQ[67]!==e.figmaAuthUrl||eQ[68]!==tM?(eu={figmaAuthUrl:e.figmaAuthUrl,textAreaRef:tM,emitChange:t7},eQ[66]=t7,eQ[67]=e.figmaAuthUrl,eQ[68]=tM,eQ[69]=eu):eu=eQ[69];let{replaceUrlWithReferenceMention:t8}=function(e){let t,a,n,i,s,l,o,c,d,u,m,p,h=(0,r.c)(35),{figmaAuthUrl:f,textAreaRef:g,emitChange:y}=e,v=(0,I.b)(),{currentReferences:x}=(0,j.Pk)();h[0]!==y||h[1]!==g?(t=(e,t,a)=>{if(!g.current||e===t)return;let n=a?.[0]??0,r=g.current.value.slice(n,a?.[1]),i=r.indexOf(e);for(;i>-1;){let a=i+e.length;y(t,[i+n,a+n]),i=(r=r.replace(e,t)).indexOf(e)}},h[0]=y,h[1]=g,h[2]=t):t=h[2];let b=t;h[3]!==v?(a=e=>{let{itemUrl:t}=e,a=(0,N.Vc)(t);return v.addReference(a,"url-attacher"),v.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"url-reference"}),a},h[3]=v,h[4]=a):a=h[4],h[5]!==b||h[6]!==v?(n=(e,t,a)=>{let{parsedReferenceMention:n}=t;v.replaceReference(a,e);let r=E.Q.for(e);if(!r)return;let i=E.Q.stringify(n),s=E.Q.stringify(r);i!==s&&b(i,s)},i=(e,t,a)=>{let{itemUrl:n,parsedReferenceMention:r}=t;v.removeReference(a),b(E.Q.stringify(r),n)},h[5]=b,h[6]=v,h[7]=n,h[8]=i):(n=h[7],i=h[8]),h[9]!==v?(s=()=>{v.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},h[9]=v,h[10]=s):s=h[10],h[11]!==a||h[12]!==n||h[13]!==i||h[14]!==s?(l={mutationFn:M,onMutate:a,onSuccess:n,onError:i,onSettled:s},h[11]=a,h[12]=n,h[13]=i,h[14]=s,h[15]=l):l=h[15];let S=(0,C.n)(l);h[16]!==v?(o=e=>{let t=(0,N.Vc)(e);return v.addReference(t,"figma-attacher"),v.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"url-reference"}),t},c=(e,t,a)=>{v.replaceReference(a,e)},h[16]=v,h[17]=o,h[18]=c):(o=h[17],c=h[18]),h[19]!==f||h[20]!==v?(d=(e,t,a)=>{a&&f&&e instanceof R?v.replaceReference(a,{type:"figma",title:"Sign in to Figma",id:`forbidden-${t}`,url:f,thumbnailUrl:"",fullImageUrl:"",authenticationRequired:!0}):v.removeReference(a)},h[19]=f,h[20]=v,h[21]=d):d=h[21],h[22]!==v?(u=()=>{v.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},h[22]=v,h[23]=u):u=h[23],h[24]!==u||h[25]!==o||h[26]!==c||h[27]!==d?(m={mutationFn:k,onMutate:o,onSuccess:c,onError:d,onSettled:u},h[24]=u,h[25]=o,h[26]=c,h[27]=d,h[28]=m):m=h[28];let w=(0,C.n)(m);return h[29]!==x||h[30]!==w||h[31]!==b||h[32]!==S||h[33]!==g?(p={replaceUrlWithReferenceMention:e=>{let t=g.current?.value.slice(...e)??"";if(/\s/.test(t))return t;let a=E.Q.fromUrl(t);a&&(x.every(e=>!E.Q.refersTo(a,e))&&S.mutate({itemUrl:t,parsedReferenceMention:a}),b(t,E.Q.stringify(a),e));let n=A.exec(t);return n&&(w.mutate(t),b(t,n[1],e)),t}},h[29]=x,h[30]=w,h[31]=b,h[32]=S,h[33]=g,h[34]=p):p=h[34],p}(eu),{isLoading:t9,addReferenceForMention:aa,addReferencesForMentions:ad}=function(){let e=(0,I.b)(),{currentReferences:t,mode:a}=(0,j.Pk)(),n=(0,C.n)({mutationFn:async e=>{let t="repository"===e.type?[e.repo]:[e.repo,(e=>{switch(e){case"issue":return"issue";case"pull-request":return"pull_request";case"discussion":return"discussion";case"thread-scoped-file":case"file":return"file"}})(e.type),e.id??""],n=await (0,S.lS)(`/copilot/chat/reference/${t.join("/")}`);if(!n.ok)throw Error(`Failed to fetch reference data (${n.status}: ${n.statusText})`);return(0,s.BI)("dotcom_chat.activate",{target:"REFERENCE_LINK_PASTE",mode:a,linkType:e.type}),await n.json()},onSuccess:t=>e.addReference(t,"chatInput")}),r=e=>{t.every(t=>!E.Q.refersTo(e,t))&&n.mutate(e)};return{isLoading:n.isPending,addReferenceForMention:r,addReferencesForMentions:e=>{let a=(0,w.l)().use(T.U,{references:t,agents:[],commands:[]}).parse(e),n=0;(0,_.YR)(a,e=>{"reference-mention"===e.type&&void 0===e.data.mentionedReferenceId&&n<20&&(n++,r(e.data.referenceMention))})}}}(),au=(0,Z.FQ)(),am=tI&&au;eQ[70]!==tG||eQ[71]!==tF?(em=(0,D.x)(tF,tG),eQ[70]=tG,eQ[71]=tF,eQ[72]=em):em=eQ[72];let ap=em,ah=tS?.name;eQ[73]!==tG||eQ[74]!==ah?(ep=K(ah,tG),eQ[73]=tG,eQ[74]=ah,eQ[75]=ep):ep=eQ[75];let af=ep;eQ[76]!==tb||eQ[77]!==tE||eQ[78]!==t$||eQ[79]!==ap||eQ[80]!==af||eQ[81]!==t9||eQ[82]!==e.submitDisabled||eQ[83]!==tY||eQ[84]!==tJ||eQ[85]!==e5||eQ[86]!==eJ.isWaitingOnAttachment?(eh=e5||t9||eJ.isWaitingOnAttachment||!!e.submitDisabled||af&&tb.includes(tE)&&!tJ&&!tY||t$||ap,eQ[76]=tb,eQ[77]=tE,eQ[78]=t$,eQ[79]=ap,eQ[80]=af,eQ[81]=t9,eQ[82]=e.submitDisabled,eQ[83]=tY,eQ[84]=tJ,eQ[85]=e5,eQ[86]=eJ.isWaitingOnAttachment,eQ[87]=eh):eh=eQ[87];let ag=eh,ay=0===tF.length;eQ[88]!==tz||eQ[89]!==eJ.mode?(ef=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_STOP",mode:eJ.mode}),tz()},eQ[88]=tz,eQ[89]=eJ.mode,eQ[90]=ef):ef=eQ[90];let av=ef;eQ[91]!==tI||eQ[92]!==tN||eQ[93]!==tE.name||eQ[94]!==tW||eQ[95]!==au||eQ[96]!==e1||eQ[97]!==eJ.mode||eQ[98]!==eJ.selectedThreadID||eQ[99]!==ag?(eg=()=>{if(ag)return;let e=tI?`${tI.owner}/${tI.id}`:"";(0,s.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_SUBMIT",mode:eJ.mode,selectedThreadId:eJ.selectedThreadID,copilotSpace:e,fromSpaceUI:au,askModeDropdown:W.W.askModeDropdown,activeMode:tE.name}),e1&&tN(!1),tW()},eQ[91]=tI,eQ[92]=tN,eQ[93]=tE.name,eQ[94]=tW,eQ[95]=au,eQ[96]=e1,eQ[97]=eJ.mode,eQ[98]=eJ.selectedThreadID,eQ[99]=ag,eQ[100]=eg):eg=eQ[100];let ax=eg;eQ[101]!==tU||eQ[102]!==ag?(ey=()=>{ag||tU()},eQ[101]=tU,eQ[102]=ag,eQ[103]=ey):ey=eQ[103];let ab=ey;eQ[104]!==eZ||eQ[105]!==eJ.messages?(ev=()=>{let e=eJ.messages.findLast(as)?.id;e&&eZ.startEditingMessage(e)},eQ[104]=eZ,eQ[105]=eJ.messages,eQ[106]=ev):ev=eQ[106];let aC=ev;e:{if(eJ.isWaitingOnCopilot){ex="Copilot is responding\u2026";break e}if(eJ.defaultRecipient){ex=void 0;break e}if(e0){ex="Message limit reached. To continue chatting with Copilot, start a new conversation.";break e}ex=tE.placeholder??"Ask anything"}let aS=ex;eJ.defaultRecipient&&""===tF&&!tk&&tD(`@${eJ.defaultRecipient} `);let aw=(0,b.useRef)(null),[a_,aj]=(0,b.useState)(null),[aI,aE]=(0,b.useState)(null);eQ[107]!==aj||eQ[108]!==eJ.mode?(eb=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU",mode:eJ.mode}),aj(al)},eQ[107]=aj,eQ[108]=eJ.mode,eQ[109]=eb):eb=eQ[109];let aT=eb;eQ[110]!==eZ||eQ[111]!==eJ.mode||eQ[112]!==eJ.skillOptions?.deepCodeSearch?(eC=()=>{(0,s.BI)("dotcom_chat.activate",{target:"DEEP_CODESEARCH",mode:eJ.mode}),eZ.dispatch({type:"SET_DEEP_CODESEARCH",deepCodeSearch:!eJ.skillOptions?.deepCodeSearch})},eQ[110]=eZ,eQ[111]=eJ.mode,eQ[112]=eJ.skillOptions?.deepCodeSearch,eQ[113]=eC):eC=eQ[113],eJ.skillOptions?.deepCodeSearch;let aN=eC,aA="immersive"===eJ.mode&&!!eX.capabilities?.supports?.vision;eQ[114]!==eY||eQ[115]!==eZ||eQ[116]!==eX||eQ[117]!==e.existingFileNames||eQ[118]!==aA?(eS=async(t,a,n,r)=>{let i=new J.s(eY(),eZ),s=new Y.E(eZ,e.existingFileNames),l=[];[...t].some(ao)&&!eX.capabilities?.supports?.vision&&(eZ.addAmbientError(`The ${eX.displayName} model doesn't support answering questions about images. Select a different model and try again.`),(0,X.d)("vision_not_supported_for_model",{modelId:eX.id,uploadType:a}));let[o,c]=J.s.getAllowedFiles([...t],eX);if(aA){let e=await i.addImageAttachments(o,a);e&&l.push(...e)}let d=[];for(let e of c)if(await Y.E.isAttachable(e)){let t=await s.addAttachment(e,n,r);t&&l.push(t)}else d.push(e.type);return aA&&d.length>0&&(0,X.d)("included_unsupported_file",{fileTypes:d.join(","),uploadType:a}),l},eQ[114]=eY,eQ[115]=eZ,eQ[116]=eX,eQ[117]=e.existingFileNames,eQ[118]=aA,eQ[119]=eS):eS=eQ[119];let aR=eS;eQ[120]!==tN||eQ[121]!==aR||eQ[122]!==e1||eQ[123]!==tD||eQ[124]!==eJ.mode||eQ[125]!==tF?(ew=async()=>{if(!e1)return;let e=[e1],t=await aR(e,"paste",tm.current||void 0,tf.current);if(t.length>0&&t[0]?.type==="thread-scoped-file"){let e=await e1.text();tD(tF.replaceAll(e,`@${t[0].name}`)),tN(!1),(0,s.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_CONVERT",mode:eJ.mode})}},eQ[120]=tN,eQ[121]=aR,eQ[122]=e1,eQ[123]=tD,eQ[124]=eJ.mode,eQ[125]=tF,eQ[126]=ew):ew=eQ[126];let ak=ew;eQ[127]!==tN?(e_=()=>{tN(!0)},eQ[127]=tN,eQ[128]=e_):e_=eQ[128];let aM=e_;eQ[129]!==e1||eQ[130]!==eJ.isWaitingOnAttachment||eQ[131]!==eJ.mode?(ej=()=>{!e1||eJ.isWaitingOnAttachment||tg.current||(tg.current=!0,(0,s.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_TRIGGER",mode:eJ.mode}))},eI=[e1,eJ.isWaitingOnAttachment,eJ.mode],eQ[129]=e1,eQ[130]=eJ.isWaitingOnAttachment,eQ[131]=eJ.mode,eQ[132]=ej,eQ[133]=eI):(ej=eQ[132],eI=eQ[133]),(0,b.useEffect)(ej,eI);let aL=(tE.supportsReferenceAttachments??!0)&&"task"!==tG;eQ[134]!==ad||eQ[135]!==aR||eQ[136]!==eZ||eQ[137]!==e.existingFileNames||eQ[138]!==t8||eQ[139]!==e3||eQ[140]!==aL||eQ[141]!==tM?(eT=t=>{let a=t.clipboardData;if(a?.items){let n=[];for(let t=0;t<a.items.length;t++){let r=a.items[t];if(r){if("file"===r.kind){let e=r.getAsFile();e&&n.push(e)}else if("string"===r.kind&&["text","text/plain"].includes(r.type)){let t=a.getData(r.type);if(t.length>1e3&&t.length<=Y.E.getAttachmentSizeLimit())e3(()=>{tg.current=!1;let a=new File([t],"",{type:Y.x}),n=new Y.E(eZ,e.existingFileNames);e2(a),tm.current=n.generateFileName(t,a.type).then(e=>tf.current=e)},1);else if(aL){ad(t);let e=tM.current?.selectionStart??0;setTimeout(()=>t8([e,e+t.length]))}return}}}n.length>0&&(t.preventDefault(),aR(n,"paste"))}},eQ[134]=ad,eQ[135]=aR,eQ[136]=eZ,eQ[137]=e.existingFileNames,eQ[138]=t8,eQ[139]=e3,eQ[140]=aL,eQ[141]=tM,eQ[142]=eT):eT=eQ[142];let aP=eT;eQ[143]!==aR?(eN=e=>{aR(e,"drag")},eQ[143]=aR,eQ[144]=eN):eN=eQ[144];let aO=eN;eQ[145]!==tQ?(eA=e=>{e&&tQ(e),aE(e)},eQ[145]=tQ,eQ[146]=eA):eA=eQ[146];let aF=eA;eQ[147]!==tS.name||eQ[148]!==tv||eQ[149]!==tC||eQ[150]!==ty||eQ[151]!==t_||eQ[152]!==tD||eQ[153]!==tF?(eR=e=>{let t=tv.find(t=>t.key===e);if(t?.enabled?.()===!1&&t.disabledAction)return void t.disabledAction(ty);if(W.W.askModeDropdown){if(t?.mode){t_(t.mode,!0);let a=RegExp(`^/${e}\\s*`);a.test(tF)&&tD(tF.replace(a,""))}else if(tS.name!==$.II.Ask){let e=tC.find(ac);e&&t_(e,!0)}}},eQ[147]=tS.name,eQ[148]=tv,eQ[149]=tC,eQ[150]=ty,eQ[151]=t_,eQ[152]=tD,eQ[153]=tF,eQ[154]=eR):eR=eQ[154];let aD=eR,a$=e.isStreaming||eJ.isWaitingOnCopilot,aW=!!tE.supportsAttachments&&"task"!==tG,aB=o.tL,aU=a$?av:void 0,aq=ay?aC:void 0;eQ[155]!==aT||eQ[156]!==ax||eQ[157]!==ab||eQ[158]!==aN||eQ[159]!==aU||eQ[160]!==aq?(ek={"github:cancel":aU,"copilot-chat:send-message":ax,"copilot-chat:send-message-new-conversation":ab,"copilot-chat:add-attachment":aT,"copilot-chat:edit-last-message":aq,"copilot-chat:deep-codesearch":aN},eQ[155]=aT,eQ[156]=ax,eQ[157]=ab,eQ[158]=aN,eQ[159]=aU,eQ[160]=aq,eQ[161]=ek):ek=eQ[161];let aV=ek,az=(0,x.$)(e8,{[tn]:"small"===e.size,[tt]:t4},e.className);eQ[162]===Symbol.for("react.memo_cache_sentinel")?(eM=(0,l.G)("copilot-chat-input-form"),eQ[162]=eM):eM=eQ[162],eQ[163]!==ak||eQ[164]!==aM||eQ[165]!==t9||eQ[166]!==e4||eQ[167]!==e1||eQ[168]!==e.getReferenceVersion||eQ[169]!==e.initialReference||eQ[170]!==e.onRemoveReference||eQ[171]!==e.size||eQ[172]!==eJ.isWaitingOnAttachment||eQ[173]!==aL?(eL=aL&&(0,n.jsx)(tL,{className:tc,returnFocusRef:aw,tokenSize:"small"===e.size?"small":"medium",isLoading:t9,onSelectReference:e4,onRemoveReference:e.onRemoveReference,getReferenceVersion:e.getReferenceVersion,showConvertToFileText:!!e1&&!eJ.isWaitingOnAttachment,onConvertToFile:ak,onConvertToFileDismiss:aM,hideAttachmentsMenu:!!e.initialReference}),eQ[163]=ak,eQ[164]=aM,eQ[165]=t9,eQ[166]=e4,eQ[167]=e1,eQ[168]=e.getReferenceVersion,eQ[169]=e.initialReference,eQ[170]=e.onRemoveReference,eQ[171]=e.size,eQ[172]=eJ.isWaitingOnAttachment,eQ[173]=aL,eQ[174]=eL):eL=eQ[174];let aH=o.tL;eQ[175]!==e.isNewConversation?(eP=(0,x.$)(tr,{[tp]:e.isNewConversation}),eQ[175]=e.isNewConversation,eQ[176]=eP):eP=eQ[176];let aK=!tE.supportsAutocompletion,aG=!e.disableAutoFocus,aQ=Q.wg,aJ=(0,x.$)(e9,{[th]:t4}),aX=tE.textAreaAriaLabel||aS;eQ[177]===Symbol.for("react.memo_cache_sentinel")?(eO=(0,l.G)("copilot-chat-input-textarea"),eQ[177]=eO):eO=eQ[177],eQ[178]!==t4||eQ[179]!==tV||eQ[180]!==tH||eQ[181]!==aP||eQ[182]!==tq||eQ[183]!==aS||eQ[184]!==aG||eQ[185]!==aQ||eQ[186]!==aJ||eQ[187]!==aX||eQ[188]!==tF||eQ[189]!==tM?(eF=(0,n.jsx)("textarea",{autoFocus:aG,id:aQ,className:aJ,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-label":aX,"aria-multiline":"true",onPaste:aP,ref:tM,onScroll:tq,onChange:tV,onFocus:tH,placeholder:aS,value:tF,"data-react-autofocus":!0,disabled:t4,...eO}),eQ[178]=t4,eQ[179]=tV,eQ[180]=tH,eQ[181]=aP,eQ[182]=tq,eQ[183]=aS,eQ[184]=aG,eQ[185]=aQ,eQ[186]=aJ,eQ[187]=aX,eQ[188]=tF,eQ[189]=tM,eQ[190]=eF):eF=eQ[190],eQ[191]!==e7||eQ[192]!==aa||eQ[193]!==tv||eQ[194]!==tC||eQ[195]!==aD||eQ[196]!==aj||eQ[197]!==aK||eQ[198]!==eF?(eD=(0,n.jsx)(e7,{onSelectReference:aa,onShowAgentsDialog:aj,onSelectCommand:aD,hideAutocomplete:aK,availableCommands:tv,availableModes:tC,children:eF}),eQ[191]=e7,eQ[192]=aa,eQ[193]=tv,eQ[194]=tC,eQ[195]=aD,eQ[196]=aj,eQ[197]=aK,eQ[198]=eF,eQ[199]=eD):eD=eQ[199],eQ[200]!==tx||eQ[201]!==tF||eQ[202]!==tP?(e$=(0,n.jsx)(tj,{text:tF,ref:tP,availableCommandKeys:tx}),eQ[200]=tx,eQ[201]=tF,eQ[202]=tP,eQ[203]=e$):e$=eQ[203],eQ[204]!==aH.LimitKeybindingScope||eQ[205]!==t6||eQ[206]!==eP||eQ[207]!==eD||eQ[208]!==e$||eQ[209]!==tO?(eW=(0,n.jsxs)(aH.LimitKeybindingScope,{commandIds:t6,className:eP,ref:tO,children:[eD,e$]}),eQ[204]=aH.LimitKeybindingScope,eQ[205]=t6,eQ[206]=eP,eQ[207]=eD,eQ[208]=e$,eQ[209]=tO,eQ[210]=eW):eW=eQ[210];let aY=eJ.skillOptions?.deepCodeSearch;return eQ[211]!==t2||eQ[212]!==af||eQ[213]!==e.extraToolbar||eQ[214]!==t0||eQ[215]!==tY||eQ[216]!==tJ||eQ[217]!==t1||eQ[218]!==tZ||eQ[219]!==tX?(eB=af&&!e.extraToolbar?(0,n.jsx)(tB.s,{selectedRepo:tJ,selectedBranch:tY,selectedAgent:t0,onRepoSelect:tX,onBranchSelect:tZ,onAgentSelect:e=>t1(e),agentSelectionEnabled:W.W.sweAgentUseSubagents,initialRepoNWO:t2}):e.extraToolbar,eQ[211]=t2,eQ[212]=af,eQ[213]=e.extraToolbar,eQ[214]=t0,eQ[215]=tY,eQ[216]=tJ,eQ[217]=t1,eQ[218]=tZ,eQ[219]=tX,eQ[220]=eB):eB=eQ[220],eQ[221]!==aT||eQ[222]!==tv||eQ[223]!==tC||eQ[224]!==tG||eQ[225]!==tE||eQ[226]!==t3||eQ[227]!==t4||eQ[228]!==t$||eQ[229]!==am||eQ[230]!==ap||eQ[231]!==ty||eQ[232]!==tT||eQ[233]!==e.onNewThreadSelected||eQ[234]!==e.showPlanningToggle||eQ[235]!==e.showStartPullRequestButton||eQ[236]!==t0||eQ[237]!==eJ.thirdPartyMcpAllowed||eQ[238]!==a$||eQ[239]!==ag||eQ[240]!==aW||eQ[241]!==aY||eQ[242]!==eB?(eU=(0,n.jsx)(ae,{addAttachment:aT,currentMode:tE,attachmentButtonRef:aw,deepCodeSearch:aY,modes:tC,onClickMode:tT,stoppable:a$,submitDisabled:ag,onNewThreadSelected:e.onNewThreadSelected,thirdPartyMcpAllowed:eJ.thirdPartyMcpAllowed,supportsAttachments:aW,disabled:t4,extraToolbar:eB,showPlanningToggle:e.showPlanningToggle,chatCommand:tG,isCopilotSpace:am,isAgentTaskSubmitInProgress:t$,isIncompleteCommand:ap,customModelPicker:t3,selectedAgent:t0,showStartPullRequestButton:e.showStartPullRequestButton,availableCommands:tv,navigate:ty}),eQ[221]=aT,eQ[222]=tv,eQ[223]=tC,eQ[224]=tG,eQ[225]=tE,eQ[226]=t3,eQ[227]=t4,eQ[228]=t$,eQ[229]=am,eQ[230]=ap,eQ[231]=ty,eQ[232]=tT,eQ[233]=e.onNewThreadSelected,eQ[234]=e.showPlanningToggle,eQ[235]=e.showStartPullRequestButton,eQ[236]=t0,eQ[237]=eJ.thirdPartyMcpAllowed,eQ[238]=a$,eQ[239]=ag,eQ[240]=aW,eQ[241]=aY,eQ[242]=eB,eQ[243]=eU):eU=eQ[243],eQ[244]!==e6||eQ[245]!==az||eQ[246]!==eM||eQ[247]!==eL||eQ[248]!==eW||eQ[249]!==eU?(eq=(0,n.jsxs)("form",{className:az,ref:e6,...eM,children:[eL,eW,eU]}),eQ[244]=e6,eQ[245]=az,eQ[246]=eM,eQ[247]=eL,eQ[248]=eW,eQ[249]=eU,eQ[250]=eq):eq=eQ[250],eQ[251]!==tE.submitLabel||eQ[252]!==t$||eQ[253]!==ap||eQ[254]!==e.showStartPullRequestButton||eQ[255]!==ag?(eV=e.showStartPullRequestButton&&(0,n.jsx)(at,{disabled:ag,label:tE.submitLabel,isAgentTaskSubmitInProgress:t$,isIncompleteCommand:ap,showStartPullRequestButton:e.showStartPullRequestButton,className:(0,x.$)(to)}),eQ[251]=tE.submitLabel,eQ[252]=t$,eQ[253]=ap,eQ[254]=e.showStartPullRequestButton,eQ[255]=ag,eQ[256]=eV):eV=eQ[256],eQ[257]!==aB||eQ[258]!==aV||eQ[259]!==eq||eQ[260]!==eV?(ez=(0,n.jsxs)(aB,{commands:aV,children:[eq,eV]}),eQ[257]=aB,eQ[258]=aV,eQ[259]=eq,eQ[260]=eV,eQ[261]=ez):ez=eQ[261],eQ[262]!==a_||eQ[263]!==tV||eQ[264]!==aI||eQ[265]!==aF||eQ[266]!==e.attachmentMenuSide||eQ[267]!==aj||eQ[268]!==tM?(eH=(0,n.jsx)(eE,{inputRef:tM,inputOnChange:tV,anchorRef:aw,panel:a_,onPanelChange:aj,initialRepo:aI,onRepoSelect:aF,side:e.attachmentMenuSide}),eQ[262]=a_,eQ[263]=tV,eQ[264]=aI,eQ[265]=aF,eQ[266]=e.attachmentMenuSide,eQ[267]=aj,eQ[268]=tM,eQ[269]=eH):eH=eQ[269],eQ[270]!==aO||eQ[271]!==am||eQ[272]!==eJ.attachmentProcessingType||eQ[273]!==eJ.isWaitingOnAttachment||eQ[274]!==aW?(eK=aW&&!am&&(0,n.jsx)(tK.A,{onFilesDrop:aO,isUploading:eJ.isWaitingOnAttachment&&"file-upload"===eJ.attachmentProcessingType}),eQ[270]=aO,eQ[271]=am,eQ[272]=eJ.attachmentProcessingType,eQ[273]=eJ.isWaitingOnAttachment,eQ[274]=aW,eQ[275]=eK):eK=eQ[275],eQ[276]!==te||eQ[277]!==ez||eQ[278]!==eH||eQ[279]!==eK?(eG=(0,n.jsxs)("div",{className:te,children:[ez,eH,eK]}),eQ[276]=te,eQ[277]=ez,eQ[278]=eH,eQ[279]=eK,eQ[280]=eG):eG=eQ[280],eG},ae=(0,b.memo)(e=>{let{chatCommand:t,extraToolbar:a,currentMode:r,supportsAttachments:i,submitDisabled:s,isCopilotSpace:l,isAgentTaskSubmitInProgress:c=!1,isIncompleteCommand:d,showStartPullRequestButton:m,availableCommands:v,navigate:b}=e,C=("task"!==t||W.W.codingAgentModelSelection)&&"loop"!==t&&"spark"!==t,S=!!(e.onNewThreadSelected&&r.supportsModelSwitching&&C),w=K(r.name,t),_=l?"Add files":W.W.copilotChatRepositoryPicker?"Add files, and spaces":"Add repositories, files, and spaces",{customModelPicker:j,selectedAgent:I,onNewThreadSelected:E,disabled:T}=e;return(0,n.jsxs)("div",{className:(0,x.$)(ta,{[tf]:1===e.modes.length}),children:[e.modes.length>1&&(0,n.jsx)("div",{className:tv,children:(0,n.jsx)("div",{className:"d-flex",children:(0,n.jsxs)(p.W,{children:[(0,n.jsx)(p.W.Button,{className:tx,leadingVisual:(0,n.jsx)(r.icon,{}),variant:"invisible",trailingAction:u.TriangleDownIcon,children:r.name}),(0,n.jsx)(p.W.Overlay,{width:"auto",children:(0,n.jsx)(h.l,{selectionVariant:"single",role:"menu","aria-label":"Item",children:e.modes.map(t=>{let a=v.find(e=>e.mode?.name===t.name),i=!1;return a?.enabled&&(i=!1===a.enabled()),(0,n.jsxs)(h.l.Item,{selected:r.name===t.name,onSelect:()=>{i&&a?.disabledAction?a.disabledAction(b):e.onClickMode?.(t.name)},children:[(0,n.jsx)(h.l.LeadingVisual,{children:(0,n.jsx)(t.icon,{})}),t.name,i&&(0,n.jsx)(h.l.TrailingVisual,{children:(0,n.jsx)(f.A,{children:"Upgrade"})})]},t.name)})})})]})})}),(0,n.jsxs)("div",{className:tg,children:[i&&(W.W.askModeDropdown?(0,n.jsx)(g.K,{ref:e.attachmentButtonRef,icon:u.PlusIcon,className:tm,"aria-label":_,onClick:e.addAttachment,"data-testid":"attachment-menu-button"}):(0,n.jsx)(y.Q,{ref:e.attachmentButtonRef,leadingVisual:u.PlusIcon,variant:"invisible","aria-label":_,className:td,onClick:e.addAttachment,"data-testid":"attachment-menu-button",children:(0,n.jsx)("span",{className:(0,x.$)(tu,{"sr-only":w}),children:_})})),i&&W.W.copilotChatRepositoryPicker&&(0,n.jsx)(tU,{}),W.W.showDeepCodeSearchButton&&(0,n.jsx)(o.N5,{commandId:"copilot-chat:deep-codesearch",icon:u.RocketIcon,variant:"invisible",tooltipDirection:"s",className:(0,x.$)({[ts]:e.deepCodeSearch})}),a,W.W.planningAgent&&!W.W.chatInputCommands&&e.showPlanningToggle&&(0,n.jsx)(t7,{})]}),(0,n.jsxs)("div",{className:(0,x.$)(tb,{[tC]:S}),children:[S&&(j?j({selectedAgent:I}):(0,n.jsx)(t5.Yb,{onNewThreadSelected:E,disabled:T})),(0,n.jsxs)("div",{className:tS,children:[W.W.copilotThirdPartyMcp&&r.supportsMCP&&e.thirdPartyMcpAllowed&&C&&(0,n.jsx)(t2,{}),e.stoppable?(0,n.jsx)(aa,{}):(0,n.jsx)(at,{disabled:s,label:r.submitLabel,isAgentTaskSubmitInProgress:c,isIncompleteCommand:d,showStartPullRequestButton:m,className:m?tl:void 0})]})]})]})});function at(e){let t,a,i,s=(0,r.c)(12),{disabled:l,label:c,isAgentTaskSubmitInProgress:d,isIncompleteCommand:m,showStartPullRequestButton:p,className:h}=e,f=void 0!==d&&d;s[0]!==l||s[1]!==m||s[2]!==c?(t=()=>l?m?"Complete your slash command before sending":c||"Sending a message is unavailable":c||"Send now",s[0]=l,s[1]=m,s[2]=c,s[3]=t):t=s[3];let x=t;s[4]!==l||s[5]!==x||s[6]!==f||s[7]!==p?(a=f?(0,n.jsx)("div",{className:"d-flex flex-items-center height-full mx-2",children:(0,n.jsx)(v.A,{size:"small"})}):p&&l?(0,n.jsx)(y.Q,{size:"medium",leadingVisual:u.PaperAirplaneIcon,inactive:!0,children:t8}):l?(0,n.jsx)(g.K,{variant:"invisible",size:"medium",icon:u.PaperAirplaneIcon,"aria-label":x(),inactive:!0,"aria-disabled":!0}):p?(0,n.jsx)(o.cQ,{commandId:"copilot-chat:send-message",leadingVisual:u.PaperAirplaneIcon,children:t8}):(0,n.jsx)(o.N5,{commandId:"copilot-chat:send-message",variant:"invisible",size:"medium",icon:u.PaperAirplaneIcon,"aria-label":x()}),s[4]=l,s[5]=x,s[6]=f,s[7]=p,s[8]=a):a=s[8];let b=a;return s[9]!==b||s[10]!==h?(i=h?(0,n.jsx)("div",{className:h,children:b}):b,s[9]=b,s[10]=h,s[11]=i):i=s[11],i}function aa(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(o.N5,{...(0,l.G)("copilot-chat-stop-button"),commandId:"github:cancel",variant:"invisible",size:"medium",icon:u.SquareFillIcon,tooltipDirection:"s",className:ty}),t[0]=e):e=t[0],e}ae.displayName="ChatInputToolbar";try{t9.displayName||(t9.displayName="ChatInput")}catch{}try{at.displayName||(at.displayName="SubmitButton")}catch{}try{aa.displayName||(aa.displayName="StopButton")}catch{}function an(e){return e.mode}function ar(e){return void 0!==e}function ai(e){return"task"===e.key}function as(e){return"user"===e.role}function al(e){return"attachment-types"===e?null:"attachment-types"}function ao(e){return e.type.startsWith("image/")}function ac(e){return e.name===$.II.Ask}},97564:(e,t,a)=>{a.d(t,{V:()=>r});var n=a(96379);async function r(e){let t=await (0,n.lS)(`/github-copilot/chat/repositories/${e}`,{method:"GET"});if(!t.ok)throw Error(`Failed to fetch repository details: ${t.status}`);return await t.json()}},97793:(e,t,a)=>{a.d(t,{O:()=>f});var n=a(74848),r=a(96379),i=a(38621),s=a(57387),l=a(86877),o=a(30093),c=a(43371),d=a.n(c),u=a(96540);let m="McpServerDialog-module__inputError--Ojb_P",p="McpServerDialog-module__formField--rsUqW",h=(0,n.jsx)("a",{href:"https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"},children:"MCP authorization specification"}),f=({isOpen:e,onClose:t,returnUrl:a,onServerAdded:c,returnFocusRef:f,showSettingsLink:g=!0})=>{let[y,v]=(0,u.useState)(""),[x,b]=(0,u.useState)(""),[C,S]=(0,u.useState)(null),[w,_]=(0,u.useState)(null),j=(0,u.useCallback)(()=>{v(""),b(""),S(null),_(null),t()},[t]),I=async e=>{if(e&&e.preventDefault(),""===y.trim()||""===x.trim()){x.trim()||S("MCP server URL is required"),y.trim()||_("Name is required");return}try{if(S(null),!function(e){try{let t=new URL(e.trim(),window.location.origin),a=d()();return"https:"===t.protocol&&!!t.hostname&&/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.hostname)&&!a.test(e)}catch{return!1}}(x))return void S("Invalid HTTPS URL format");let e=new FormData;e.append("mcp_server_url",x.trim()),e.append("name",y.trim()),a&&e.append("return_url",a);let t=await (0,r.DI)("/copilot/mcp/servers",{method:"POST",body:e});if(!t.ok){let e="Failed to add MCP server";try{let a=await t.text();try{let t=JSON.parse(a);if("unsupported_server_type"===t.error)e=(0,n.jsxs)(n.Fragment,{children:["This server does not conform to the ",h,"."]});else if(t.field_errors){for(let[e,a]of Object.entries(t.field_errors)){let t=a.join(", ");"mcp_server_url"===e?S(t):"display_name"===e&&_(t)}return}else t.message&&(e=t.message)}catch{e=a.includes("well-known/oauth-authorization-server")||"Client setup failed"===a.trim()?(0,n.jsxs)(n.Fragment,{children:["This server does not conform to the ",h,"."]}):a||e}}catch{e="Failed to add MCP server"}S(e);return}let i=(await t.json()).redirect_url;i&&"string"==typeof i?(j(),c?.(),window.location.assign(i)):(j(),c?.())}catch(e){e instanceof Error?S(e.message):S("An unknown error occurred")}};return e?(0,n.jsx)(s.l,{title:"Add MCP server",onClose:j,footerButtons:[{buttonType:"default",content:"Cancel",onClick:j},{buttonType:"primary",content:(0,n.jsxs)(n.Fragment,{children:["Connect to MCP server",(0,n.jsx)("span",{style:{marginLeft:8},children:(0,n.jsx)(i.LinkExternalIcon,{size:16})})]}),onClick:()=>{I()}}],returnFocusRef:f,children:(0,n.jsxs)("form",{className:"McpServerDialog-module__dialogForm--pUtNF",onSubmit:I,autoComplete:"on",children:[(0,n.jsxs)(l.A,{required:!0,className:p,children:[(0,n.jsx)(l.A.Label,{children:"MCP server name"}),(0,n.jsx)(o.A,{name:"mcp-server-name",type:"text",value:y,onChange:e=>{v(e.target.value),_(null)},placeholder:"Enter a name for this MCP server",className:w?m:void 0,autoComplete:"on",block:!0}),w&&(0,n.jsx)(l.A.Validation,{variant:"error",children:w})]}),(0,n.jsxs)(l.A,{required:!0,className:p,children:[(0,n.jsx)(l.A.Label,{children:"MCP server URL"}),(0,n.jsx)(o.A,{name:"mcp-url",type:"url",value:x,onChange:e=>{b(e.target.value),S(null)},placeholder:"https://mcp.example.com",className:C?m:void 0,autoComplete:"on",block:!0}),C&&(0,n.jsx)(l.A.Validation,{variant:"error",children:C})]}),(0,n.jsx)("button",{type:"submit",className:"McpServerDialog-module__hiddenSubmitButton--KcK0s",tabIndex:-1,children:"Submit"}),(0,n.jsxs)("p",{children:["MCP Server data will be processed by models coming from third-party providers. Always review the permissions required by the MCP server and only connect to MCP servers you know and trust.",g&&(0,n.jsxs)(n.Fragment,{children:[" ","You can revoke access for the MCP server at any time in"," ",(0,n.jsx)("a",{href:"/settings",className:"McpServerDialog-module__underline--YKUMk",children:"your settings"}),"."]})]})]})}):null};try{h.displayName||(h.displayName="MCP_SPEC_LINK")}catch{}try{f.displayName||(f.displayName="McpServerDialog")}catch{}},97949:(e,t,a)=>{a.d(t,{U:()=>o});var n=a(99054),r=a(17925),i=a(25641),s=a(35247),l=a(79216);let o=function({references:e,agents:t,commands:a}){this.parser=function(o){let c=o.split(/(\s+)/),d=[];for(let[o,u]of c.entries()){if(s.W.chatInputCommands&&0===o){let e=(0,r.V)(u,a);if(e){d.push({type:"command",value:u,data:{command:e}});continue}}let c=0===o&&n.qj.exec(u)?.groups?.slug,m=c&&t.find(e=>e.slug===c);if(m){d.push({type:"agent-mention",value:u,data:{mentionedAgent:m}});continue}let p=l.Q.parse(u),h=p&&e?.find(e=>l.Q.refersTo(p,e));if(p){d.push({type:"reference-mention",value:u,data:{mentionedReferenceId:h&&(0,i.Vb)(h),referenceMention:p}});continue}let f=d.at(-1);f?.type==="text"?f.value+=u:d.push({type:"text",value:u})}return{type:"root",children:d}}}},99054:(e,t,a)=>{a.d(t,{JE:()=>h,Z3:()=>m,bn:()=>u,kw:()=>f,qj:()=>p});var n=a(16522),r=a(97286),i=a(8625),s=a(14521),l=a(25641),o=a(2635),c=a(33592),d=a(72206);let u="https://github.com/marketplace?type=apps&copilot_app=true",m="@",p=/^@(?<slug>\S+)$/;function h(e){let t,a,i,u,m,p,h=(0,n.c)(25),{agentsPath:f,model:g}=(0,o.bP)("agentsPath","model"),y=(0,d.tD)(),v=(0,c.b)(),x=!!(0,s.G)(),b=g?.hasLimitedCapabilities;h[0]!==y||h[1]!==x||h[2]!==b?(t=e=>{let{messages:t}=y();if(b||x)return{agents:[],showLimit:!1};let a=(0,l.Q7)(t)[0];return a?{agents:e.filter(e=>e.slug===a.name),showLimit:e.length>1}:{agents:e,showLimit:!1}},h[0]=y,h[1]=x,h[2]=b,h[3]=t):t=h[3];let C=t;h[4]!==f?(a=["copilot-chat","agents",f],h[4]=f,h[5]=a):a=h[5],h[6]!==f||h[7]!==v?(i=()=>f?v.fetchAgents(f):[],h[6]=f,h[7]=v,h[8]=i):i=h[8];let S=(void 0===e||e)&&!b&&!x;h[9]!==C||h[10]!==a||h[11]!==i||h[12]!==S?(u={queryKey:a,queryFn:i,select:C,enabled:S},h[9]=C,h[10]=a,h[11]=i,h[12]=S,h[13]=u):u=h[13];let{isLoading:w,data:_,refetch:j,isStale:I,isFetched:E}=(0,r.I)(u);h[14]!==_||h[15]!==E||h[16]!==I||h[17]!==j?(m=async()=>!E||I?(await j()).data:_,h[14]=_,h[15]=E,h[16]=I,h[17]=j,h[18]=m):m=h[18];let T=m,N=_?.agents,A=_?.showLimit??!1;return h[19]!==T||h[20]!==w||h[21]!==N||h[22]!==A||h[23]!==b?(p={loading:w,disabled:b,availableAgents:N,showLimit:A,imperativelyFetch:T},h[19]=T,h[20]=w,h[21]=N,h[22]=A,h[23]=b,h[24]=p):p=h[24],p}function f(e){let t,a,r=(0,n.c)(6),{inputOnChange:s,inputRef:l}=e;r[0]!==s||r[1]!==l?(t={inputRef:l,fallbackEventHandler:s},r[0]=s,r[1]=l,r[2]=t):t=r[2];let o=(0,i.H)(t);return r[3]!==o||r[4]!==l?(a=e=>{l.current?.value&&o(" ",[0,0]);let t=`${m}${void 0===e?"":e}`;o(t,[0,0],t.length)},r[3]=o,r[4]=l,r[5]=a):a=r[5],a}}},e=>{e.O(0,[3088,43934,82216,67733,97068,913,6488,31475,48775,42892,23832,99418,30587,4712,51220,28546,26744,48889,18312,347,89332,15874,45230,5853,16007,88324,3146,36978,25407,83494,40771,66990,29665,4817,91232,37294,2635,30721,99808,52302,81171,41474,1631,34522,92135,34031,74258],()=>e(e.s=8290)),e.O()}]);
//# sourceMappingURL=copilot-chat-a46beeea08b9.js.map